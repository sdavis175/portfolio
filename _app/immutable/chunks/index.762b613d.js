var ti=Object.defineProperty;var ei=(O,t,l)=>t in O?ti(O,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):O[t]=l;var ee=(O,t,l)=>(ei(O,typeof t!="symbol"?t+"":t,l),l),Ne=(O,t,l)=>{if(!t.has(O))throw TypeError("Cannot "+l)};var e=(O,t,l)=>(Ne(O,t,"read from private field"),l?l.call(O):t.get(O)),z=(O,t,l)=>{if(t.has(O))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(O):t.set(O,l)},st=(O,t,l,n)=>(Ne(O,t,"write to private field"),n?n.call(O,l):t.set(O,l),l),ge=(O,t,l,n)=>({set _(u){st(O,t,u,l)},get _(){return e(O,t,n)}}),Y=(O,t,l)=>(Ne(O,t,"access private method"),l);import{s as safe_not_equal,W as create_slot,f as element,a as space,g as claim_element,h as children,d as detach,c as claim_space,j as attr,i as insert_hydration,N as append_hydration,P as listen,X as update_slot_base,Y as get_all_dirty_from_scope,Z as get_slot_changes,w as run_all,M as null_to_empty,y as add_render_callback,U as bubble,o as onMount,S as onDestroy,a8 as get_svelte_dataset,n as noop,t as tick,q as binding_callbacks,$ as svg_element,l as text,a0 as claim_svg_element,m as claim_text,p as set_data,T as set_input_value}from"./scheduler.0fceb7f2.js";import{S as SvelteComponent,i as init,a as transition_in,g as group_outros,t as transition_out,c as check_outros,h as create_in_transition,j as create_out_transition,b as create_component,d as claim_component,m as mount_component,e as destroy_component}from"./index.b70c7824.js";import{h as getAugmentedNamespace}from"./app.b4d01cb1.js";const globals=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function commonjsRequire(O){throw new Error('Could not dynamically require "'+O+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(O){pdfExports=O}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,l){module.exports=t.pdfjsLib=l()})(globalThis,()=>(()=>{var __webpack_modules__=[,(O,t)=>{var qt;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=ct,t.bytesToString=W,t.createValidAbsoluteUrl=Et,t.getModificationDate=Ct,t.getUuid=Xt,t.getVerbosityLevel=K,t.info=rt,t.isArrayBuffer=ft,t.isArrayEqual=Tt,t.isNodeJS=void 0,t.normalizeUnicode=Vt,t.objectFromMap=dt,t.objectSize=ot,t.setVerbosityLevel=R,t.shadow=yt,t.string32=et,t.stringToBytes=tt,t.stringToPDFString=gt,t.stringToUTF8String=nt,t.unreachable=X,t.utf8StringToString=it,t.warn=lt;const l=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=l;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const u=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=u;const T=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=T;const k=1.35;t.LINE_FACTOR=k;const G=.35;t.LINE_DESCENT_FACTOR=G;const b=G/k;t.BASELINE_FACTOR=b;const _={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=_;const g={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=g;const L="pdfjs_internal_editor_";t.AnnotationEditorPrefix=L;const j={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=j;const x={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=x;const E={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=E;const A={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=A;const p={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=p;const y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=y;const M={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=M;const F={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=F;const P={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=P;const h={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=h;const f={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=f;const N={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=N;const v={O:"PageOpen",C:"PageClose"};t.PageActionEventType=v;const o={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=o;const I={NONE:0,BINARY:1};t.CMapCompressionType=I;const w={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=w;const V={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=V;let $=o.WARNINGS;function R(ht){Number.isInteger(ht)&&($=ht)}function K(){return $}function rt(ht){$>=o.INFOS&&console.log(`Info: ${ht}`)}function lt(ht){$>=o.WARNINGS&&console.log(`Warning: ${ht}`)}function X(ht){throw new Error(ht)}function ct(ht,Z){ht||X(Z)}function pt(ht){switch(ht==null?void 0:ht.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Et(ht,Z=null,B=null){if(!ht)return null;try{if(B&&typeof ht=="string"){if(B.addDefaultProtocol&&ht.startsWith("www.")){const bt=ht.match(/\./g);(bt==null?void 0:bt.length)>=2&&(ht=`http://${ht}`)}if(B.tryConvertEncoding)try{ht=nt(ht)}catch{}}const mt=Z?new URL(ht,Z):new URL(ht);if(pt(mt))return mt}catch{}return null}function yt(ht,Z,B,mt=!1){return Object.defineProperty(ht,Z,{value:B,enumerable:!mt,configurable:!0,writable:!1}),B}const C=function(){function Z(B,mt){this.constructor===Z&&X("Cannot initialize BaseException."),this.message=B,this.name=mt}return Z.prototype=new Error,Z.constructor=Z,Z}();t.BaseException=C;class s extends C{constructor(Z,B){super(Z,"PasswordException"),this.code=B}}t.PasswordException=s;class a extends C{constructor(Z,B){super(Z,"UnknownErrorException"),this.details=B}}t.UnknownErrorException=a;class r extends C{constructor(Z){super(Z,"InvalidPDFException")}}t.InvalidPDFException=r;class c extends C{constructor(Z){super(Z,"MissingPDFException")}}t.MissingPDFException=c;class d extends C{constructor(Z,B){super(Z,"UnexpectedResponseException"),this.status=B}}t.UnexpectedResponseException=d;class m extends C{constructor(Z){super(Z,"FormatError")}}t.FormatError=m;class D extends C{constructor(Z){super(Z,"AbortException")}}t.AbortException=D;function W(ht){(typeof ht!="object"||(ht==null?void 0:ht.length)===void 0)&&X("Invalid argument for bytesToString");const Z=ht.length,B=8192;if(Z<B)return String.fromCharCode.apply(null,ht);const mt=[];for(let bt=0;bt<Z;bt+=B){const te=Math.min(bt+B,Z),Zt=ht.subarray(bt,te);mt.push(String.fromCharCode.apply(null,Zt))}return mt.join("")}function tt(ht){typeof ht!="string"&&X("Invalid argument for stringToBytes");const Z=ht.length,B=new Uint8Array(Z);for(let mt=0;mt<Z;++mt)B[mt]=ht.charCodeAt(mt)&255;return B}function et(ht){return String.fromCharCode(ht>>24&255,ht>>16&255,ht>>8&255,ht&255)}function ot(ht){return Object.keys(ht).length}function dt(ht){const Z=Object.create(null);for(const[B,mt]of ht)Z[B]=mt;return Z}function vt(){const ht=new Uint8Array(4);return ht[0]=1,new Uint32Array(ht.buffer,0,1)[0]===1}function ut(){try{return new Function(""),!0}catch{return!1}}class Mt{static get isLittleEndian(){return yt(this,"isLittleEndian",vt())}static get isEvalSupported(){return yt(this,"isEvalSupported",ut())}static get isOffscreenCanvasSupported(){return yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?yt(this,"platform",{isWin:!1,isMac:!1}):yt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Z,B;return yt(this,"isCSSRoundSupported",(B=(Z=globalThis.CSS)==null?void 0:Z.supports)==null?void 0:B.call(Z,"width: round(1.5px, 1px)"))}}t.FeatureTest=Mt;const Bt=[...Array(256).keys()].map(ht=>ht.toString(16).padStart(2,"0"));class wt{static makeHexColor(Z,B,mt){return`#${Bt[Z]}${Bt[B]}${Bt[mt]}`}static scaleMinMax(Z,B){let mt;Z[0]?(Z[0]<0&&(mt=B[0],B[0]=B[1],B[1]=mt),B[0]*=Z[0],B[1]*=Z[0],Z[3]<0&&(mt=B[2],B[2]=B[3],B[3]=mt),B[2]*=Z[3],B[3]*=Z[3]):(mt=B[0],B[0]=B[2],B[2]=mt,mt=B[1],B[1]=B[3],B[3]=mt,Z[1]<0&&(mt=B[2],B[2]=B[3],B[3]=mt),B[2]*=Z[1],B[3]*=Z[1],Z[2]<0&&(mt=B[0],B[0]=B[1],B[1]=mt),B[0]*=Z[2],B[1]*=Z[2]),B[0]+=Z[4],B[1]+=Z[4],B[2]+=Z[5],B[3]+=Z[5]}static transform(Z,B){return[Z[0]*B[0]+Z[2]*B[1],Z[1]*B[0]+Z[3]*B[1],Z[0]*B[2]+Z[2]*B[3],Z[1]*B[2]+Z[3]*B[3],Z[0]*B[4]+Z[2]*B[5]+Z[4],Z[1]*B[4]+Z[3]*B[5]+Z[5]]}static applyTransform(Z,B){const mt=Z[0]*B[0]+Z[1]*B[2]+B[4],bt=Z[0]*B[1]+Z[1]*B[3]+B[5];return[mt,bt]}static applyInverseTransform(Z,B){const mt=B[0]*B[3]-B[1]*B[2],bt=(Z[0]*B[3]-Z[1]*B[2]+B[2]*B[5]-B[4]*B[3])/mt,te=(-Z[0]*B[1]+Z[1]*B[0]+B[4]*B[1]-B[5]*B[0])/mt;return[bt,te]}static getAxialAlignedBoundingBox(Z,B){const mt=this.applyTransform(Z,B),bt=this.applyTransform(Z.slice(2,4),B),te=this.applyTransform([Z[0],Z[3]],B),Zt=this.applyTransform([Z[2],Z[1]],B);return[Math.min(mt[0],bt[0],te[0],Zt[0]),Math.min(mt[1],bt[1],te[1],Zt[1]),Math.max(mt[0],bt[0],te[0],Zt[0]),Math.max(mt[1],bt[1],te[1],Zt[1])]}static inverseTransform(Z){const B=Z[0]*Z[3]-Z[1]*Z[2];return[Z[3]/B,-Z[1]/B,-Z[2]/B,Z[0]/B,(Z[2]*Z[5]-Z[4]*Z[3])/B,(Z[4]*Z[1]-Z[5]*Z[0])/B]}static singularValueDecompose2dScale(Z){const B=[Z[0],Z[2],Z[1],Z[3]],mt=Z[0]*B[0]+Z[1]*B[2],bt=Z[0]*B[1]+Z[1]*B[3],te=Z[2]*B[0]+Z[3]*B[2],Zt=Z[2]*B[1]+Z[3]*B[3],Q=(mt+Zt)/2,St=Math.sqrt((mt+Zt)**2-4*(mt*Zt-te*bt))/2,It=Q+St||1,kt=Q-St||1;return[Math.sqrt(It),Math.sqrt(kt)]}static normalizeRect(Z){const B=Z.slice(0);return Z[0]>Z[2]&&(B[0]=Z[2],B[2]=Z[0]),Z[1]>Z[3]&&(B[1]=Z[3],B[3]=Z[1]),B}static intersect(Z,B){const mt=Math.max(Math.min(Z[0],Z[2]),Math.min(B[0],B[2])),bt=Math.min(Math.max(Z[0],Z[2]),Math.max(B[0],B[2]));if(mt>bt)return null;const te=Math.max(Math.min(Z[1],Z[3]),Math.min(B[1],B[3])),Zt=Math.min(Math.max(Z[1],Z[3]),Math.max(B[1],B[3]));return te>Zt?null:[mt,te,bt,Zt]}static bezierBoundingBox(Z,B,mt,bt,te,Zt,Q,St){const It=[],kt=[[],[]];let Lt,Nt,Jt,At,Yt,Ot,U,i;for(let J=0;J<2;++J){if(J===0?(Nt=6*Z-12*mt+6*te,Lt=-3*Z+9*mt-9*te+3*Q,Jt=3*mt-3*Z):(Nt=6*B-12*bt+6*Zt,Lt=-3*B+9*bt-9*Zt+3*St,Jt=3*bt-3*B),Math.abs(Lt)<1e-12){if(Math.abs(Nt)<1e-12)continue;At=-Jt/Nt,0<At&&At<1&&It.push(At);continue}U=Nt*Nt-4*Jt*Lt,i=Math.sqrt(U),!(U<0)&&(Yt=(-Nt+i)/(2*Lt),0<Yt&&Yt<1&&It.push(Yt),Ot=(-Nt-i)/(2*Lt),0<Ot&&Ot<1&&It.push(Ot))}let S=It.length,H;const q=S;for(;S--;)At=It[S],H=1-At,kt[0][S]=H*H*H*Z+3*H*H*At*mt+3*H*At*At*te+At*At*At*Q,kt[1][S]=H*H*H*B+3*H*H*At*bt+3*H*At*At*Zt+At*At*At*St;return kt[0][q]=Z,kt[1][q]=B,kt[0][q+1]=Q,kt[1][q+1]=St,kt[0].length=kt[1].length=q+2,[Math.min(...kt[0]),Math.min(...kt[1]),Math.max(...kt[0]),Math.max(...kt[1])]}}t.Util=wt;const Dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function gt(ht){if(ht[0]>="ï"){let B;if(ht[0]==="þ"&&ht[1]==="ÿ"?B="utf-16be":ht[0]==="ÿ"&&ht[1]==="þ"?B="utf-16le":ht[0]==="ï"&&ht[1]==="»"&&ht[2]==="¿"&&(B="utf-8"),B)try{const mt=new TextDecoder(B,{fatal:!0}),bt=tt(ht);return mt.decode(bt)}catch(mt){lt(`stringToPDFString: "${mt}".`)}}const Z=[];for(let B=0,mt=ht.length;B<mt;B++){const bt=Dt[ht.charCodeAt(B)];Z.push(bt?String.fromCharCode(bt):ht.charAt(B))}return Z.join("")}function nt(ht){return decodeURIComponent(escape(ht))}function it(ht){return unescape(encodeURIComponent(ht))}function ft(ht){return typeof ht=="object"&&(ht==null?void 0:ht.byteLength)!==void 0}function Tt(ht,Z){if(ht.length!==Z.length)return!1;for(let B=0,mt=ht.length;B<mt;B++)if(ht[B]!==Z[B])return!1;return!0}function Ct(ht=new Date){return[ht.getUTCFullYear().toString(),(ht.getUTCMonth()+1).toString().padStart(2,"0"),ht.getUTCDate().toString().padStart(2,"0"),ht.getUTCHours().toString().padStart(2,"0"),ht.getUTCMinutes().toString().padStart(2,"0"),ht.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ut{constructor(){z(this,qt,!1);this.promise=new Promise((Z,B)=>{this.resolve=mt=>{st(this,qt,!0),Z(mt)},this.reject=mt=>{st(this,qt,!0),B(mt)}})}get settled(){return e(this,qt)}}qt=new WeakMap,t.PromiseCapability=Ut;let zt=null,Ht=null;function Vt(ht){return zt||(zt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ht=new Map([["ﬅ","ſt"]])),ht.replaceAll(zt,(Z,B,mt)=>B?B.normalize("NFKC"):Ht.get(mt))}function Xt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ht=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ht);else for(let Z=0;Z<32;Z++)ht[Z]=Math.floor(Math.random()*255);return W(ht)}const Wt="pdfjs_internal_id_";t.AnnotationPrefix=Wt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var O,l,n,u,he,k,Ee,b,_,g,L,j,x,E,A,p,we,M,F,Be,h,f;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(v){if(typeof v=="string"||v instanceof URL?v={url:v}:(0,_util.isArrayBuffer)(v)&&(v={data:v}),typeof v!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!v.url&&!v.data&&!v.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const o=new PDFDocumentLoadingTask,{docId:I}=o,w=v.url?getUrlProp(v.url):null,V=v.data?getDataProp(v.data):null,$=v.httpHeaders||null,R=v.withCredentials===!0,K=v.password??null,rt=v.range instanceof PDFDataRangeTransport?v.range:null,lt=Number.isInteger(v.rangeChunkSize)&&v.rangeChunkSize>0?v.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let X=v.worker instanceof PDFWorker?v.worker:null;const ct=v.verbosity,pt=typeof v.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(v.docBaseUrl)?v.docBaseUrl:null,Et=typeof v.cMapUrl=="string"?v.cMapUrl:null,yt=v.cMapPacked!==!1,C=v.CMapReaderFactory||DefaultCMapReaderFactory,s=typeof v.standardFontDataUrl=="string"?v.standardFontDataUrl:null,a=v.StandardFontDataFactory||DefaultStandardFontDataFactory,r=v.stopAtErrors!==!0,c=Number.isInteger(v.maxImageSize)&&v.maxImageSize>-1?v.maxImageSize:-1,d=v.isEvalSupported!==!1,m=typeof v.isOffscreenCanvasSupported=="boolean"?v.isOffscreenCanvasSupported:!_util.isNodeJS,D=Number.isInteger(v.canvasMaxAreaInBytes)?v.canvasMaxAreaInBytes:-1,W=typeof v.disableFontFace=="boolean"?v.disableFontFace:_util.isNodeJS,tt=v.fontExtraProperties===!0,et=v.enableXfa===!0,ot=v.ownerDocument||globalThis.document,dt=v.disableRange===!0,vt=v.disableStream===!0,ut=v.disableAutoFetch===!0,Mt=v.pdfBug===!0,Bt=rt?rt.length:v.length??NaN,wt=typeof v.useSystemFonts=="boolean"?v.useSystemFonts:!_util.isNodeJS&&!W,Dt=typeof v.useWorkerFetch=="boolean"?v.useWorkerFetch:C===_display_utils.DOMCMapReaderFactory&&a===_display_utils.DOMStandardFontDataFactory&&Et&&s&&(0,_display_utils.isValidFetchUrl)(Et,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(s,document.baseURI),gt=v.canvasFactory||new DefaultCanvasFactory({ownerDocument:ot}),nt=v.filterFactory||new DefaultFilterFactory({docId:I,ownerDocument:ot}),it=null;(0,_util.setVerbosityLevel)(ct);const ft={canvasFactory:gt,filterFactory:nt};if(Dt||(ft.cMapReaderFactory=new C({baseUrl:Et,isCompressed:yt}),ft.standardFontDataFactory=new a({baseUrl:s})),!X){const Ut={verbosity:ct,port:_worker_options.GlobalWorkerOptions.workerPort};X=Ut.port?PDFWorker.fromPort(Ut):new PDFWorker(Ut),o._worker=X}const Tt={docId:I,apiVersion:"3.11.174",data:V,password:K,disableAutoFetch:ut,rangeChunkSize:lt,length:Bt,docBaseUrl:pt,enableXfa:et,evaluatorOptions:{maxImageSize:c,disableFontFace:W,ignoreErrors:r,isEvalSupported:d,isOffscreenCanvasSupported:m,canvasMaxAreaInBytes:D,fontExtraProperties:tt,useSystemFonts:wt,cMapUrl:Dt?Et:null,standardFontDataUrl:Dt?s:null}},Ct={ignoreErrors:r,isEvalSupported:d,disableFontFace:W,fontExtraProperties:tt,enableXfa:et,ownerDocument:ot,disableAutoFetch:ut,pdfBug:Mt,styleElement:it};return X.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const Ut=_fetchDocument(X,Tt),zt=new Promise(function(Ht){let Vt;rt?Vt=new _transport_stream.PDFDataTransportStream({length:Bt,initialData:rt.initialData,progressiveDone:rt.progressiveDone,contentDispositionFilename:rt.contentDispositionFilename,disableRange:dt,disableStream:vt},rt):V||(Vt=(Wt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Wt):(0,_display_utils.isValidFetchUrl)(Wt.url)?new _displayFetch_stream.PDFFetchStream(Wt):new _displayNetwork.PDFNetworkStream(Wt))({url:w,length:Bt,httpHeaders:$,withCredentials:R,rangeChunkSize:lt,disableRange:dt,disableStream:vt})),Ht(Vt)});return Promise.all([Ut,zt]).then(function([Ht,Vt]){if(o.destroyed)throw new Error("Loading aborted");const Xt=new _message_handler.MessageHandler(I,Ht,X.port),Wt=new WorkerTransport(Xt,o,Vt,Ct,ft);o._transport=Wt,Xt.send("Ready",null)})}).catch(o._capability.reject),o}async function _fetchDocument(v,o){if(v.destroyed)throw new Error("Worker was destroyed");const I=await v.messageHandler.sendWithPromise("GetDocRequest",o,o.data?[o.data.buffer]:null);if(v.destroyed)throw new Error("Worker was destroyed");return I}function getUrlProp(v){if(v instanceof URL)return v.href;try{return new URL(v,window.location).href}catch{if(_util.isNodeJS&&typeof v=="string")return v}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(v){if(_util.isNodeJS&&typeof Buffer<"u"&&v instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength)return v;if(typeof v=="string")return(0,_util.stringToBytes)(v);if(typeof v=="object"&&!isNaN(v==null?void 0:v.length)||(0,_util.isArrayBuffer)(v))return new Uint8Array(v);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ge(t,O)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var o,I,w;this.destroyed=!0;try{(o=this._worker)!=null&&o.port&&(this._worker._pendingDestroy=!0),await((I=this._transport)==null?void 0:I.destroy())}catch(V){throw(w=this._worker)!=null&&w.port&&delete this._worker._pendingDestroy,V}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=t;O=new WeakMap,z(PDFDocumentLoadingTask,O,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,I,w=!1,V=null){this.length=o,this.initialData=I,this.progressiveDone=w,this.contentDispositionFilename=V,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,I){for(const w of this._rangeListeners)w(o,I)}onDataProgress(o,I){this._readyCapability.promise.then(()=>{for(const w of this._progressListeners)w(o,I)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const I of this._progressiveReadListeners)I(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,I){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,I){this._pdfInfo=o,this._transport=I,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(w=>{if(!w)return w;const V=[];for(const $ in w)V.push(...w[$]);return V}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,I,w,V=!1){z(this,u);z(this,k);z(this,l,null);z(this,n,!1);this._pageIndex=o,this._pageInfo=I,this._transport=w,this._stats=V?new _display_utils.StatTimer:null,this._pdfBug=V,this.commonObjs=w.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:I=this.rotate,offsetX:w=0,offsetY:V=0,dontFlip:$=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:I,offsetX:w,offsetY:V,dontFlip:$})}getAnnotations({intent:o="display"}={}){const I=this._transport.getRenderingIntent(o);return this._transport.getAnnotations(this._pageIndex,I.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var o;return((o=this._transport._htmlForXfa)==null?void 0:o.children[this._pageIndex])||null}render({canvasContext:o,viewport:I,intent:w="display",annotationMode:V=_util.AnnotationMode.ENABLE,transform:$=null,background:R=null,optionalContentConfigPromise:K=null,annotationCanvasMap:rt=null,pageColors:lt=null,printAnnotationStorage:X=null}){var a,r;(a=this._stats)==null||a.time("Overall");const ct=this._transport.getRenderingIntent(w,V,X);st(this,n,!1),Y(this,k,Ee).call(this),K||(K=this._transport.getOptionalContentConfig());let pt=this._intentStates.get(ct.cacheKey);pt||(pt=Object.create(null),this._intentStates.set(ct.cacheKey,pt)),pt.streamReaderCancelTimeout&&(clearTimeout(pt.streamReaderCancelTimeout),pt.streamReaderCancelTimeout=null);const Et=!!(ct.renderingIntent&_util.RenderingIntentFlag.PRINT);pt.displayReadyCapability||(pt.displayReadyCapability=new _util.PromiseCapability,pt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(r=this._stats)==null||r.time("Page Request"),this._pumpOperatorList(ct));const yt=c=>{var d,m;pt.renderTasks.delete(C),(this._maybeCleanupAfterRender||Et)&&st(this,n,!0),Y(this,u,he).call(this,!Et),c?(C.capability.reject(c),this._abortOperatorList({intentState:pt,reason:c instanceof Error?c:new Error(c)})):C.capability.resolve(),(d=this._stats)==null||d.timeEnd("Rendering"),(m=this._stats)==null||m.timeEnd("Overall")},C=new InternalRenderTask({callback:yt,params:{canvasContext:o,viewport:I,transform:$,background:R},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:rt,operatorList:pt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Et,pdfBug:this._pdfBug,pageColors:lt});(pt.renderTasks||(pt.renderTasks=new Set)).add(C);const s=C.task;return Promise.all([pt.displayReadyCapability.promise,K]).then(([c,d])=>{var m;if(this.destroyed){yt();return}(m=this._stats)==null||m.time("Rendering"),C.initializeGraphics({transparency:c,optionalContentConfig:d}),C.operatorListChanged()}).catch(yt),s}getOperatorList({intent:o="display",annotationMode:I=_util.AnnotationMode.ENABLE,printAnnotationStorage:w=null}={}){var rt;function V(){R.operatorList.lastChunk&&(R.opListReadCapability.resolve(R.operatorList),R.renderTasks.delete(K))}const $=this._transport.getRenderingIntent(o,I,w,!0);let R=this._intentStates.get($.cacheKey);R||(R=Object.create(null),this._intentStates.set($.cacheKey,R));let K;return R.opListReadCapability||(K=Object.create(null),K.operatorListChanged=V,R.opListReadCapability=new _util.PromiseCapability,(R.renderTasks||(R.renderTasks=new Set)).add(K),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(rt=this._stats)==null||rt.time("Page Request"),this._pumpOperatorList($)),R.opListReadCapability.promise}streamTextContent({includeMarkedContent:o=!1,disableNormalization:I=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:o===!0,disableNormalization:I===!0},{highWaterMark:100,size(V){return V.items.length}})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(w=>_xfa_text.XfaText.textContent(w));const I=this.streamTextContent(o);return new Promise(function(w,V){function $(){R.read().then(function({value:rt,done:lt}){if(lt){w(K);return}Object.assign(K.styles,rt.styles),K.items.push(...rt.items),$()},V)}const R=I.getReader(),K={items:[],styles:Object.create(null)};$()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const I of this._intentStates.values())if(this._abortOperatorList({intentState:I,reason:new Error("Page was destroyed."),force:!0}),!I.opListReadCapability)for(const w of I.renderTasks)o.push(w.completed),w.cancel();return this.objs.clear(),st(this,n,!1),Y(this,k,Ee).call(this),Promise.all(o)}cleanup(o=!1){st(this,n,!0);const I=Y(this,u,he).call(this,!1);return o&&I&&this._stats&&(this._stats=new _display_utils.StatTimer),I}_startRenderPage(o,I){var V,$;const w=this._intentStates.get(I);w&&((V=this._stats)==null||V.timeEnd("Page Request"),($=w.displayReadyCapability)==null||$.resolve(o))}_renderPageChunk(o,I){for(let w=0,V=o.length;w<V;w++)I.operatorList.fnArray.push(o.fnArray[w]),I.operatorList.argsArray.push(o.argsArray[w]);I.operatorList.lastChunk=o.lastChunk,I.operatorList.separateAnnots=o.separateAnnots;for(const w of I.renderTasks)w.operatorListChanged();o.lastChunk&&Y(this,u,he).call(this,!0)}_pumpOperatorList({renderingIntent:o,cacheKey:I,annotationStorageSerializable:w}){const{map:V,transfers:$}=w,K=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:I,annotationStorage:V},$).getReader(),rt=this._intentStates.get(I);rt.streamReader=K;const lt=()=>{K.read().then(({value:X,done:ct})=>{if(ct){rt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(X,rt),lt())},X=>{if(rt.streamReader=null,!this._transport.destroyed){if(rt.operatorList){rt.operatorList.lastChunk=!0;for(const ct of rt.renderTasks)ct.operatorListChanged();Y(this,u,he).call(this,!0)}if(rt.displayReadyCapability)rt.displayReadyCapability.reject(X);else if(rt.opListReadCapability)rt.opListReadCapability.reject(X);else throw X}})};lt()}_abortOperatorList({intentState:o,reason:I,force:w=!1}){if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!w){if(o.renderTasks.size>0)return;if(I instanceof _display_utils.RenderingCancelledException){let V=RENDERING_CANCELLED_TIMEOUT;I.extraDelay>0&&I.extraDelay<1e3&&(V+=I.extraDelay),o.streamReaderCancelTimeout=setTimeout(()=>{o.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:o,reason:I,force:!0})},V);return}}if(o.streamReader.cancel(new _util.AbortException(I.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[V,$]of this._intentStates)if($===o){this._intentStates.delete(V);break}this.cleanup()}}}get stats(){return this._stats}}l=new WeakMap,n=new WeakMap,u=new WeakSet,he=function(o=!1){if(Y(this,k,Ee).call(this),!e(this,n)||this.destroyed)return!1;if(o)return st(this,l,setTimeout(()=>{st(this,l,null),Y(this,u,he).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:I,operatorList:w}of this._intentStates.values())if(I.size>0||!w.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),st(this,n,!1),!0},k=new WeakSet,Ee=function(){e(this,l)&&(clearTimeout(e(this,l)),st(this,l,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){z(this,b,new Set);z(this,_,Promise.resolve())}postMessage(o,I){const w={data:structuredClone(o,I?{transfer:I}:null)};e(this,_).then(()=>{for(const V of e(this,b))V.call(this,w)})}addEventListener(o,I){e(this,b).add(I)}removeEventListener(o,I){e(this,b).delete(I)}terminate(){e(this,b).clear()}}b=new WeakMap,_=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const v=(g=document==null?void 0:document.currentScript)==null?void 0:g.src;v&&(PDFWorkerUtil.fallbackWorkerSrc=v.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(v,o){let I;try{if(I=new URL(v),!I.origin||I.origin==="null")return!1}catch{return!1}const w=new URL(o,I);return I.origin===w.origin},PDFWorkerUtil.createCDNWrapper=function(v){const o=`importScripts("${v}");`;return URL.createObjectURL(new Blob([o]))}}const _PDFWorker=class{constructor({name:v=null,port:o=null,verbosity:I=(0,_util.getVerbosityLevel)()}={}){var w;if(this.name=v,this.destroyed=!1,this.verbosity=I,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,o){if((w=e(_PDFWorker,L))!=null&&w.has(o))throw new Error("Cannot use more than one PDFWorker per port.");(e(_PDFWorker,L)||st(_PDFWorker,L,new WeakMap)).set(o,this),this._initializeFromPort(o);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(v){this._port=v,this._messageHandler=new _message_handler.MessageHandler("main","worker",v),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:v}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,v)||(v=PDFWorkerUtil.createCDNWrapper(new URL(v,window.location).href));const o=new Worker(v),I=new _message_handler.MessageHandler("main","worker",o),w=()=>{o.removeEventListener("error",V),I.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},V=()=>{this._webWorker||w()};o.addEventListener("error",V),I.on("test",R=>{if(o.removeEventListener("error",V),this.destroyed){w();return}R?(this._messageHandler=I,this._port=o,this._webWorker=o,this._readyCapability.resolve(),I.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),I.destroy(),o.terminate())}),I.on("ready",R=>{if(o.removeEventListener("error",V),this.destroyed){w();return}try{$()}catch{this._setupFakeWorker()}});const $=()=>{const R=new Uint8Array;I.send("test",R,[R.buffer])};$();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(v=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const o=new LoopbackPort;this._port=o;const I=`fake${PDFWorkerUtil.fakeWorkerId++}`,w=new _message_handler.MessageHandler(I+"_worker",I,o);v.setup(w,o);const V=new _message_handler.MessageHandler(I,I+"_worker",o);this._messageHandler=V,this._readyCapability.resolve(),V.send("configure",{verbosity:this.verbosity})}).catch(v=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${v.message}".`))})}destroy(){var v;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(v=e(_PDFWorker,L))==null||v.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(v){var I;if(!(v!=null&&v.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const o=(I=e(this,L))==null?void 0:I.get(v.port);if(o){if(o._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return o}return new _PDFWorker(v)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var v;try{return((v=globalThis.pdfjsWorker)==null?void 0:v.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;L=new WeakMap,z(PDFWorker,L,void 0),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(o,I,w,V,$){z(this,p);z(this,j,new Map);z(this,x,new Map);z(this,E,new Map);z(this,A,null);this.messageHandler=o,this.loadingTask=I,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:V.ownerDocument,styleElement:V.styleElement}),this._params=V,this.canvasFactory=$.canvasFactory,this.filterFactory=$.filterFactory,this.cMapReaderFactory=$.cMapReaderFactory,this.standardFontDataFactory=$.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=w,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(o,I=_util.AnnotationMode.ENABLE,w=null,V=!1){let $=_util.RenderingIntentFlag.DISPLAY,R=_annotation_storage.SerializableEmpty;switch(o){case"any":$=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":$=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(I){case _util.AnnotationMode.DISABLE:$+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:$+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:$+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,R=($&_util.RenderingIntentFlag.PRINT&&w instanceof _annotation_storage.PrintAnnotationStorage?w:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${I}`)}return V&&($+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:$,cacheKey:`${$}_${R.hash}`,annotationStorageSerializable:R}}destroy(){var w;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(w=e(this,A))==null||w.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const V of e(this,x).values())o.push(V._destroy());e(this,x).clear(),e(this,E).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const I=this.messageHandler.sendWithPromise("Terminate",null);return o.push(I),Promise.all(o).then(()=>{var V;this.commonObjs.clear(),this.fontLoader.clear(),e(this,j).clear(),this.filterFactory.destroy(),(V=this._networkStream)==null||V.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:I}=this;o.on("GetReader",(w,V)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=$=>{this._lastProgress={loaded:$.loaded,total:$.total}},V.onPull=()=>{this._fullReader.read().then(function({value:$,done:R}){if(R){V.close();return}(0,_util.assert)($ instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),V.enqueue(new Uint8Array($),1,[$])}).catch($=>{V.error($)})},V.onCancel=$=>{this._fullReader.cancel($),V.ready.catch(R=>{if(!this.destroyed)throw R})}}),o.on("ReaderHeadersReady",w=>{const V=new _util.PromiseCapability,$=this._fullReader;return $.headersReady.then(()=>{var R;(!$.isStreamingSupported||!$.isRangeSupported)&&(this._lastProgress&&((R=I.onProgress)==null||R.call(I,this._lastProgress)),$.onProgress=K=>{var rt;(rt=I.onProgress)==null||rt.call(I,{loaded:K.loaded,total:K.total})}),V.resolve({isStreamingSupported:$.isStreamingSupported,isRangeSupported:$.isRangeSupported,contentLength:$.contentLength})},V.reject),V.promise}),o.on("GetRangeReader",(w,V)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const $=this._networkStream.getRangeReader(w.begin,w.end);if(!$){V.close();return}V.onPull=()=>{$.read().then(function({value:R,done:K}){if(K){V.close();return}(0,_util.assert)(R instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),V.enqueue(new Uint8Array(R),1,[R])}).catch(R=>{V.error(R)})},V.onCancel=R=>{$.cancel(R),V.ready.catch(K=>{if(!this.destroyed)throw K})}}),o.on("GetDoc",({pdfInfo:w})=>{this._numPages=w.numPages,this._htmlForXfa=w.htmlForXfa,delete w.htmlForXfa,I._capability.resolve(new PDFDocumentProxy(w,this))}),o.on("DocException",function(w){let V;switch(w.name){case"PasswordException":V=new _util.PasswordException(w.message,w.code);break;case"InvalidPDFException":V=new _util.InvalidPDFException(w.message);break;case"MissingPDFException":V=new _util.MissingPDFException(w.message);break;case"UnexpectedResponseException":V=new _util.UnexpectedResponseException(w.message,w.status);break;case"UnknownErrorException":V=new _util.UnknownErrorException(w.message,w.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}I._capability.reject(V)}),o.on("PasswordRequest",w=>{if(st(this,A,new _util.PromiseCapability),I.onPassword){const V=$=>{$ instanceof Error?e(this,A).reject($):e(this,A).resolve({password:$})};try{I.onPassword(V,w.code)}catch($){e(this,A).reject($)}}else e(this,A).reject(new _util.PasswordException(w.message,w.code));return e(this,A).promise}),o.on("DataLoaded",w=>{var V;(V=I.onProgress)==null||V.call(I,{loaded:w.length,total:w.length}),this.downloadInfoCapability.resolve(w)}),o.on("StartRenderPage",w=>{if(this.destroyed)return;e(this,x).get(w.pageIndex)._startRenderPage(w.transparency,w.cacheKey)}),o.on("commonobj",([w,V,$])=>{var R;if(!this.destroyed&&!this.commonObjs.has(w))switch(V){case"Font":const K=this._params;if("error"in $){const X=$.error;(0,_util.warn)(`Error during font loading: ${X}`),this.commonObjs.resolve(w,X);break}const rt=K.pdfBug&&((R=globalThis.FontInspector)!=null&&R.enabled)?(X,ct)=>globalThis.FontInspector.fontAdded(X,ct):null,lt=new _font_loader.FontFaceObject($,{isEvalSupported:K.isEvalSupported,disableFontFace:K.disableFontFace,ignoreErrors:K.ignoreErrors,inspectFont:rt});this.fontLoader.bind(lt).catch(X=>o.sendWithPromise("FontFallback",{id:w})).finally(()=>{!K.fontExtraProperties&&lt.data&&(lt.data=null),this.commonObjs.resolve(w,lt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(w,$);break;default:throw new Error(`Got unknown common object type ${V}`)}}),o.on("obj",([w,V,$,R])=>{var rt;if(this.destroyed)return;const K=e(this,x).get(V);if(!K.objs.has(w))switch($){case"Image":if(K.objs.resolve(w,R),R){let lt;if(R.bitmap){const{width:X,height:ct}=R;lt=X*ct*4}else lt=((rt=R.data)==null?void 0:rt.length)||0;lt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(K._maybeCleanupAfterRender=!0)}break;case"Pattern":K.objs.resolve(w,R);break;default:throw new Error(`Got unknown object type ${$}`)}}),o.on("DocProgress",w=>{var V;this.destroyed||(V=I.onProgress)==null||V.call(I,{loaded:w.loaded,total:w.total})}),o.on("FetchBuiltInCMap",w=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(w):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",w=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(w):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var w;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:o,transfers:I}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:o,filename:((w=this._fullReader)==null?void 0:w.filename)??null},I).finally(()=>{this.annotationStorage.resetModified()})}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const I=o-1,w=e(this,E).get(I);if(w)return w;const V=this.messageHandler.sendWithPromise("GetPage",{pageIndex:I}).then($=>{if(this.destroyed)throw new Error("Transport destroyed");const R=new PDFPageProxy(I,$,this,this._params.pdfBug);return e(this,x).set(I,R),R});return e(this,E).set(I,V),V}getPageIndex(o){return typeof o!="object"||o===null||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,I){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:I})}getFieldObjects(){return Y(this,p,we).call(this,"GetFieldObjects")}hasJSActions(){return Y(this,p,we).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return typeof o!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Y(this,p,we).call(this,"GetDocJSActions")}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const o="GetMetadata",I=e(this,j).get(o);if(I)return I;const w=this.messageHandler.sendWithPromise(o,null).then(V=>{var $,R;return{info:V[0],metadata:V[1]?new _metadata.Metadata(V[1]):null,contentDispositionFilename:(($=this._fullReader)==null?void 0:$.filename)??null,contentLength:((R=this._fullReader)==null?void 0:R.contentLength)??null}});return e(this,j).set(o,w),w}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const I of e(this,x).values())if(!I.cleanup())throw new Error(`startCleanup: Page ${I.pageNumber} is currently rendering.`);this.commonObjs.clear(),o||this.fontLoader.clear(),e(this,j).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:o,enableXfa:I}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o,enableXfa:I})}}j=new WeakMap,x=new WeakMap,E=new WeakMap,A=new WeakMap,p=new WeakSet,we=function(o,I=null){const w=e(this,j).get(o);if(w)return w;const V=this.messageHandler.sendWithPromise(o,I);return e(this,j).set(o,V),V};class PDFObjects{constructor(){z(this,F);z(this,M,Object.create(null))}get(o,I=null){if(I){const V=Y(this,F,Be).call(this,o);return V.capability.promise.then(()=>I(V.data)),null}const w=e(this,M)[o];if(!(w!=null&&w.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${o}.`);return w.data}has(o){const I=e(this,M)[o];return(I==null?void 0:I.capability.settled)||!1}resolve(o,I=null){const w=Y(this,F,Be).call(this,o);w.data=I,w.capability.resolve()}clear(){var o;for(const I in e(this,M)){const{data:w}=e(this,M)[I];(o=w==null?void 0:w.bitmap)==null||o.close()}st(this,M,Object.create(null))}}M=new WeakMap,F=new WeakSet,Be=function(o){var I;return(I=e(this,M))[o]||(I[o]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(o){z(this,h,null);st(this,h,o),this.onContinue=null}get promise(){return e(this,h).capability.promise}cancel(o=0){e(this,h).cancel(null,o)}get separateAnnots(){const{separateAnnots:o}=e(this,h).operatorList;if(!o)return!1;const{annotationCanvasMap:I}=e(this,h);return o.form||o.canvas&&(I==null?void 0:I.size)>0}}h=new WeakMap,exports.RenderTask=RenderTask;const N=class{constructor({callback:o,params:I,objs:w,commonObjs:V,annotationCanvasMap:$,operatorList:R,pageIndex:K,canvasFactory:rt,filterFactory:lt,useRequestAnimationFrame:X=!1,pdfBug:ct=!1,pageColors:pt=null}){this.callback=o,this.params=I,this.objs=w,this.commonObjs=V,this.annotationCanvasMap=$,this.operatorListIdx=null,this.operatorList=R,this._pageIndex=K,this.canvasFactory=rt,this.filterFactory=lt,this._pdfBug=ct,this.pageColors=pt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=X===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=I.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:I}){var K,rt;if(this.cancelled)return;if(this._canvas){if(e(N,f).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e(N,f).add(this._canvas)}this._pdfBug&&((K=globalThis.StepperManager)!=null&&K.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:w,viewport:V,transform:$,background:R}=this.params;this.gfx=new _canvas.CanvasGraphics(w,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:I},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:$,viewport:V,transparency:o,background:R}),this.operatorListIdx=0,this.graphicsReady=!0,(rt=this.graphicsReadyCallback)==null||rt.call(this)}cancel(o=null,I=0){var w;this.running=!1,this.cancelled=!0,(w=this.gfx)==null||w.endDrawing(),e(N,f).delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,I))}operatorListChanged(){var o;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(o=this.stepper)==null||o.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),e(N,f).delete(this._canvas),this.callback())))}};let InternalRenderTask=N;f=new WeakMap,z(InternalRenderTask,f,new WeakSet);const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(O,t,l)=>{var _,g,L,vn,x;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=l(1),u=l(4),T=l(8);const k=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=k;class G{constructor(){z(this,L);z(this,_,!1);z(this,g,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(A,p){const y=e(this,g).get(A);return y===void 0?p:Object.assign(p,y)}getRawValue(A){return e(this,g).get(A)}remove(A){if(e(this,g).delete(A),e(this,g).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const p of e(this,g).values())if(p instanceof u.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(A,p){const y=e(this,g).get(A);let M=!1;if(y!==void 0)for(const[F,P]of Object.entries(p))y[F]!==P&&(M=!0,y[F]=P);else M=!0,e(this,g).set(A,p);M&&Y(this,L,vn).call(this),p instanceof u.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(p.constructor._type)}has(A){return e(this,g).has(A)}getAll(){return e(this,g).size>0?(0,n.objectFromMap)(e(this,g)):null}setAll(A){for(const[p,y]of Object.entries(A))this.setValue(p,y)}get size(){return e(this,g).size}resetModified(){e(this,_)&&(st(this,_,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new b(this)}get serializable(){if(e(this,g).size===0)return k;const A=new Map,p=new T.MurmurHash3_64,y=[],M=Object.create(null);let F=!1;for(const[P,h]of e(this,g)){const f=h instanceof u.AnnotationEditor?h.serialize(!1,M):h;f&&(A.set(P,f),p.update(`${P}:${JSON.stringify(f)}`),F||(F=!!f.bitmap))}if(F)for(const P of A.values())P.bitmap&&y.push(P.bitmap);return A.size>0?{map:A,hash:p.hexdigest(),transfers:y}:k}}_=new WeakMap,g=new WeakMap,L=new WeakSet,vn=function(){e(this,_)||(st(this,_,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=G;class b extends G{constructor(p){super();z(this,x,void 0);const{map:y,hash:M,transfers:F}=p.serializable,P=structuredClone(y,F?{transfer:F}:null);st(this,x,{map:P,hash:M,transfers:F})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return e(this,x)}}x=new WeakMap,t.PrintAnnotationStorage=b},(O,t,l)=>{var b,_,g,L,j,x,E,A,p,y,M,F,P,h,f,Ue,v,He,I,je,V,We,R,yn,rt,Sn,X,En,pt,ze,yt,wn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=l(5),u=l(1),T=l(6);const s=class{constructor(r){z(this,f);z(this,v);z(this,V);z(this,R);z(this,rt);z(this,X);z(this,pt);z(this,yt);z(this,b,"");z(this,_,!1);z(this,g,null);z(this,L,null);z(this,j,null);z(this,x,!1);z(this,E,null);z(this,A,this.focusin.bind(this));z(this,p,this.focusout.bind(this));z(this,y,!1);z(this,M,!1);z(this,F,!1);ee(this,"_initialOptions",Object.create(null));ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);ee(this,"_l10nPromise",null);z(this,P,!1);z(this,h,s._zIndex++);this.constructor===s&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=r.parent,this.id=r.id,this.width=this.height=null,this.pageIndex=r.parent.pageIndex,this.name=r.name,this.div=null,this._uiManager=r.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=r.isCentered,this._structTreeParentId=null;const{rotation:c,rawDims:{pageWidth:d,pageHeight:m,pageX:D,pageY:W}}=this.parent.viewport;this.rotation=c,this.pageRotation=(360+c-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,m],this.pageTranslation=[D,W];const[tt,et]=this.parentDimensions;this.x=r.x/tt,this.y=r.y/et,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(r){const c=new G({id:r.parent.getNextId(),parent:r.parent,uiManager:r._uiManager});c.annotationElementId=r.annotationElementId,c.deleted=!0,c._uiManager.addToAnnotationStorage(c)}static initialize(r,c=null){if(s._l10nPromise||(s._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(m=>[m,r.get(m)]))),c!=null&&c.strings)for(const m of c.strings)s._l10nPromise.set(m,r.get(m));if(s._borderLineWidth!==-1)return;const d=getComputedStyle(document.documentElement);s._borderLineWidth=parseFloat(d.getPropertyValue("--outline-width"))||0}static updateDefaultParams(r,c){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(r){return!1}static paste(r,c){(0,u.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return e(this,P)}set _isDraggable(r){var c;st(this,P,r),(c=this.div)==null||c.classList.toggle("draggable",r)}center(){const[r,c]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*c/(r*2),this.y+=this.width*r/(c*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*c/(r*2),this.y-=this.width*r/(c*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(r){this._uiManager.addCommands(r)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=e(this,h)}setParent(r){r!==null&&(this.pageIndex=r.pageIndex,this.pageDimensions=r.pageDimensions),this.parent=r}focusin(r){this._focusEventsAllowed&&(e(this,y)?st(this,y,!1):this.parent.setSelected(this))}focusout(r){var d;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const c=r.relatedTarget;c!=null&&c.closest(`#${this.id}`)||(r.preventDefault(),(d=this.parent)!=null&&d.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(r,c,d,m){const[D,W]=this.parentDimensions;[d,m]=this.screenToPageTranslation(d,m),this.x=(r+d)/D,this.y=(c+m)/W,this.fixAndSetPosition()}translate(r,c){Y(this,f,Ue).call(this,this.parentDimensions,r,c)}translateInPage(r,c){Y(this,f,Ue).call(this,this.pageDimensions,r,c),this.div.scrollIntoView({block:"nearest"})}drag(r,c){const[d,m]=this.parentDimensions;if(this.x+=r/d,this.y+=c/m,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ot,y:dt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ot,dt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:D,y:W}=this;const[tt,et]=Y(this,v,He).call(this);D+=tt,W+=et,this.div.style.left=`${(100*D).toFixed(2)}%`,this.div.style.top=`${(100*W).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[r,c]=this.pageDimensions;let{x:d,y:m,width:D,height:W}=this;switch(D*=r,W*=c,d*=r,m*=c,this.rotation){case 0:d=Math.max(0,Math.min(r-D,d)),m=Math.max(0,Math.min(c-W,m));break;case 90:d=Math.max(0,Math.min(r-W,d)),m=Math.min(c,Math.max(D,m));break;case 180:d=Math.min(r,Math.max(D,d)),m=Math.min(c,Math.max(W,m));break;case 270:d=Math.min(r,Math.max(W,d)),m=Math.max(0,Math.min(c-D,m));break}this.x=d/=r,this.y=m/=c;const[tt,et]=Y(this,v,He).call(this);d+=tt,m+=et;const{style:ot}=this.div;ot.left=`${(100*d).toFixed(2)}%`,ot.top=`${(100*m).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(r,c){var d;return Y(d=s,I,je).call(d,r,c,this.parentRotation)}pageTranslationToScreen(r,c){var d;return Y(d=s,I,je).call(d,r,c,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:r,pageDimensions:[c,d]}=this,m=c*r,D=d*r;return u.FeatureTest.isCSSRoundSupported?[Math.round(m),Math.round(D)]:[m,D]}setDims(r,c){var D;const[d,m]=this.parentDimensions;this.div.style.width=`${(100*r/d).toFixed(2)}%`,e(this,x)||(this.div.style.height=`${(100*c/m).toFixed(2)}%`),(D=e(this,g))==null||D.classList.toggle("small",r<s.SMALL_EDITOR_SIZE||c<s.SMALL_EDITOR_SIZE)}fixDims(){const{style:r}=this.div,{height:c,width:d}=r,m=d.endsWith("%"),D=!e(this,x)&&c.endsWith("%");if(m&&D)return;const[W,tt]=this.parentDimensions;m||(r.width=`${(100*parseFloat(d)/W).toFixed(2)}%`),!e(this,x)&&!D&&(r.height=`${(100*parseFloat(c)/tt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(e(this,g))return;const r=st(this,g,document.createElement("button"));r.className="altText";const c=await s._l10nPromise.get("editor_alt_text_button_label");r.textContent=c,r.setAttribute("aria-label",c),r.tabIndex="0",r.addEventListener("contextmenu",T.noContextMenu),r.addEventListener("pointerdown",d=>d.stopPropagation()),r.addEventListener("click",d=>{d.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),r.addEventListener("keydown",d=>{d.target===r&&d.key==="Enter"&&(d.preventDefault(),this._uiManager.editAltText(this))}),Y(this,pt,ze).call(this),this.div.append(r),s.SMALL_EDITOR_SIZE||(s.SMALL_EDITOR_SIZE=Math.min(128,Math.round(r.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:e(this,b),decorative:e(this,_)}}set altTextData({altText:r,decorative:c}){e(this,b)===r&&e(this,_)===c||(st(this,b,r),st(this,_,c),Y(this,pt,ze).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",e(this,A)),this.div.addEventListener("focusout",e(this,p));const[r,c]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*c/r).toFixed(2)}%`,this.div.style.maxHeight=`${(100*r/c).toFixed(2)}%`);const[d,m]=this.getInitialTranslation();return this.translate(d,m),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(r){const{isMac:c}=u.FeatureTest.platform;if(r.button!==0||r.ctrlKey&&c){r.preventDefault();return}st(this,y,!0),Y(this,yt,wn).call(this,r)}moveInDOM(){var r;(r=this.parent)==null||r.moveEditorInDOM(this)}_setParentAndPosition(r,c,d){r.changeParent(this),this.x=c,this.y=d,this.fixAndSetPosition()}getRect(r,c){const d=this.parentScale,[m,D]=this.pageDimensions,[W,tt]=this.pageTranslation,et=r/d,ot=c/d,dt=this.x*m,vt=this.y*D,ut=this.width*m,Mt=this.height*D;switch(this.rotation){case 0:return[dt+et+W,D-vt-ot-Mt+tt,dt+et+ut+W,D-vt-ot+tt];case 90:return[dt+ot+W,D-vt+et+tt,dt+ot+Mt+W,D-vt+et+ut+tt];case 180:return[dt-et-ut+W,D-vt+ot+tt,dt-et+W,D-vt+ot+Mt+tt];case 270:return[dt-ot-Mt+W,D-vt-et-ut+tt,dt-ot+W,D-vt-et+tt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(r,c){const[d,m,D,W]=r,tt=D-d,et=W-m;switch(this.rotation){case 0:return[d,c-W,tt,et];case 90:return[d,c-m,et,tt];case 180:return[D,c-m,tt,et];case 270:return[D,c-W,et,tt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){st(this,F,!0)}disableEditMode(){st(this,F,!1)}isInEditMode(){return e(this,F)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var r,c;(r=this.div)==null||r.addEventListener("focusin",e(this,A)),(c=this.div)==null||c.addEventListener("focusout",e(this,p))}serialize(r=!1,c=null){(0,u.unreachable)("An editor must be serializable")}static deserialize(r,c,d){const m=new this.prototype.constructor({parent:c,id:c.getNextId(),uiManager:d});m.rotation=r.rotation;const[D,W]=m.pageDimensions,[tt,et,ot,dt]=m.getRectInCurrentCoords(r.rect,W);return m.x=tt/D,m.y=et/W,m.width=ot/D,m.height=dt/W,m}remove(){var r;this.div.removeEventListener("focusin",e(this,A)),this.div.removeEventListener("focusout",e(this,p)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(r=e(this,g))==null||r.remove(),st(this,g,null),st(this,L,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Y(this,R,yn).call(this),e(this,E).classList.remove("hidden"))}select(){var r;this.makeResizable(),(r=this.div)==null||r.classList.add("selectedEditor")}unselect(){var r,c,d;(r=e(this,E))==null||r.classList.add("hidden"),(c=this.div)==null||c.classList.remove("selectedEditor"),(d=this.div)!=null&&d.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(r,c){}disableEditing(){e(this,g)&&(e(this,g).hidden=!0)}enableEditing(){e(this,g)&&(e(this,g).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return e(this,M)}set isEditing(r){st(this,M,r),this.parent&&(r?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(r,c){st(this,x,!0);const d=r/c,{style:m}=this.div;m.aspectRatio=d,m.height="auto"}static get MIN_SIZE(){return 16}};let k=s;b=new WeakMap,_=new WeakMap,g=new WeakMap,L=new WeakMap,j=new WeakMap,x=new WeakMap,E=new WeakMap,A=new WeakMap,p=new WeakMap,y=new WeakMap,M=new WeakMap,F=new WeakMap,P=new WeakMap,h=new WeakMap,f=new WeakSet,Ue=function([r,c],d,m){[d,m]=this.screenToPageTranslation(d,m),this.x+=d/r,this.y+=m/c,this.fixAndSetPosition()},v=new WeakSet,He=function(){const[r,c]=this.parentDimensions,{_borderLineWidth:d}=s,m=d/r,D=d/c;switch(this.rotation){case 90:return[-m,D];case 180:return[m,D];case 270:return[m,-D];default:return[-m,-D]}},I=new WeakSet,je=function(r,c,d){switch(d){case 90:return[c,-r];case 180:return[-r,-c];case 270:return[-c,r];default:return[r,c]}},V=new WeakSet,We=function(r){switch(r){case 90:{const[c,d]=this.pageDimensions;return[0,-c/d,d/c,0]}case 180:return[-1,0,0,-1];case 270:{const[c,d]=this.pageDimensions;return[0,c/d,-d/c,0]}default:return[1,0,0,1]}},R=new WeakSet,yn=function(){if(e(this,E))return;st(this,E,document.createElement("div")),e(this,E).classList.add("resizers");const r=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||r.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const c of r){const d=document.createElement("div");e(this,E).append(d),d.classList.add("resizer",c),d.addEventListener("pointerdown",Y(this,rt,Sn).bind(this,c)),d.addEventListener("contextmenu",T.noContextMenu)}this.div.prepend(e(this,E))},rt=new WeakSet,Sn=function(r,c){c.preventDefault();const{isMac:d}=u.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&d)return;const m=Y(this,X,En).bind(this,r),D=this._isDraggable;this._isDraggable=!1;const W={passive:!0,capture:!0};window.addEventListener("pointermove",m,W);const tt=this.x,et=this.y,ot=this.width,dt=this.height,vt=this.parent.div.style.cursor,ut=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(c.target).cursor;const Mt=()=>{this._isDraggable=D,window.removeEventListener("pointerup",Mt),window.removeEventListener("blur",Mt),window.removeEventListener("pointermove",m,W),this.parent.div.style.cursor=vt,this.div.style.cursor=ut;const Bt=this.x,wt=this.y,Dt=this.width,gt=this.height;Bt===tt&&wt===et&&Dt===ot&&gt===dt||this.addCommands({cmd:()=>{this.width=Dt,this.height=gt,this.x=Bt,this.y=wt;const[nt,it]=this.parentDimensions;this.setDims(nt*Dt,it*gt),this.fixAndSetPosition()},undo:()=>{this.width=ot,this.height=dt,this.x=tt,this.y=et;const[nt,it]=this.parentDimensions;this.setDims(nt*ot,it*dt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Mt),window.addEventListener("blur",Mt)},X=new WeakSet,En=function(r,c){const[d,m]=this.parentDimensions,D=this.x,W=this.y,tt=this.width,et=this.height,ot=s.MIN_SIZE/d,dt=s.MIN_SIZE/m,vt=mt=>Math.round(mt*1e4)/1e4,ut=Y(this,V,We).call(this,this.rotation),Mt=(mt,bt)=>[ut[0]*mt+ut[2]*bt,ut[1]*mt+ut[3]*bt],Bt=Y(this,V,We).call(this,360-this.rotation),wt=(mt,bt)=>[Bt[0]*mt+Bt[2]*bt,Bt[1]*mt+Bt[3]*bt];let Dt,gt,nt=!1,it=!1;switch(r){case"topLeft":nt=!0,Dt=(mt,bt)=>[0,0],gt=(mt,bt)=>[mt,bt];break;case"topMiddle":Dt=(mt,bt)=>[mt/2,0],gt=(mt,bt)=>[mt/2,bt];break;case"topRight":nt=!0,Dt=(mt,bt)=>[mt,0],gt=(mt,bt)=>[0,bt];break;case"middleRight":it=!0,Dt=(mt,bt)=>[mt,bt/2],gt=(mt,bt)=>[0,bt/2];break;case"bottomRight":nt=!0,Dt=(mt,bt)=>[mt,bt],gt=(mt,bt)=>[0,0];break;case"bottomMiddle":Dt=(mt,bt)=>[mt/2,bt],gt=(mt,bt)=>[mt/2,0];break;case"bottomLeft":nt=!0,Dt=(mt,bt)=>[0,bt],gt=(mt,bt)=>[mt,0];break;case"middleLeft":it=!0,Dt=(mt,bt)=>[0,bt/2],gt=(mt,bt)=>[mt,bt/2];break}const ft=Dt(tt,et),Tt=gt(tt,et);let Ct=Mt(...Tt);const Ut=vt(D+Ct[0]),zt=vt(W+Ct[1]);let Ht=1,Vt=1,[Xt,Wt]=this.screenToPageTranslation(c.movementX,c.movementY);if([Xt,Wt]=wt(Xt/d,Wt/m),nt){const mt=Math.hypot(tt,et);Ht=Vt=Math.max(Math.min(Math.hypot(Tt[0]-ft[0]-Xt,Tt[1]-ft[1]-Wt)/mt,1/tt,1/et),ot/tt,dt/et)}else it?Ht=Math.max(ot,Math.min(1,Math.abs(Tt[0]-ft[0]-Xt)))/tt:Vt=Math.max(dt,Math.min(1,Math.abs(Tt[1]-ft[1]-Wt)))/et;const qt=vt(tt*Ht),ht=vt(et*Vt);Ct=Mt(...gt(qt,ht));const Z=Ut-Ct[0],B=zt-Ct[1];this.width=qt,this.height=ht,this.x=Z,this.y=B,this.setDims(d*qt,m*ht),this.fixAndSetPosition()},pt=new WeakSet,ze=async function(){var d;const r=e(this,g);if(!r)return;if(!e(this,b)&&!e(this,_)){r.classList.remove("done"),(d=e(this,L))==null||d.remove();return}s._l10nPromise.get("editor_alt_text_edit_button_label").then(m=>{r.setAttribute("aria-label",m)});let c=e(this,L);if(!c){st(this,L,c=document.createElement("span")),c.className="tooltip",c.setAttribute("role","tooltip");const m=c.id=`alt-text-tooltip-${this.id}`;r.setAttribute("aria-describedby",m);const D=100;r.addEventListener("mouseenter",()=>{st(this,j,setTimeout(()=>{st(this,j,null),e(this,L).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},D))}),r.addEventListener("mouseleave",()=>{var W;clearTimeout(e(this,j)),st(this,j,null),(W=e(this,L))==null||W.classList.remove("show")})}r.classList.add("done"),c.innerText=e(this,_)?await s._l10nPromise.get("editor_alt_text_decorative_tooltip"):e(this,b),c.parentNode||r.append(c)},yt=new WeakSet,wn=function(r){if(!this._isDraggable)return;const c=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let d,m;c&&(d={passive:!0,capture:!0},m=W=>{const[tt,et]=this.screenToPageTranslation(W.movementX,W.movementY);this._uiManager.dragSelectedEditors(tt,et)},window.addEventListener("pointermove",m,d));const D=()=>{if(window.removeEventListener("pointerup",D),window.removeEventListener("blur",D),c&&window.removeEventListener("pointermove",m,d),st(this,y,!1),!this._uiManager.endDragSession()){const{isMac:W}=u.FeatureTest.platform;r.ctrlKey&&!W||r.shiftKey||r.metaKey&&W?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",D),window.addEventListener("blur",D)},z(k,I),ee(k,"_borderLineWidth",-1),ee(k,"_colorManager",new n.ColorManager),ee(k,"_zIndex",1),ee(k,"SMALL_EDITOR_SIZE",0),t.AnnotationEditor=k;class G extends k{constructor(r){super(r),this.annotationElementId=r.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(O,t,l)=>{var x,E,A,p,y,Ve,P,h,f,N,v,Tn,w,V,$,R,K,rt,lt,X,ct,pt,Et,yt,C,s,a,r,c,d,m,D,W,tt,et,ot,dt,vt,ut,Mt,Bt,wt,Dt,gt,nt,it,ft,Cn,Ct,Ge,zt,Xe,Vt,Te,Wt,qe,ht,$e,B,re,bt,me,Zt,kn,St,Pn,kt,Ye,Nt,_e,At,Ke;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=T,t.opacityToHex=k;var n=l(1),u=l(6);function T(U,i,S){for(const H of S)i.addEventListener(H,U[H].bind(U))}function k(U){return Math.round(Math.min(255,Math.max(1,255*U))).toString(16).padStart(2,"0")}class G{constructor(){z(this,x,0)}getId(){return`${n.AnnotationEditorPrefix}${ge(this,x)._++}`}}x=new WeakMap;const F=class{constructor(){z(this,y);z(this,E,(0,n.getUuid)());z(this,A,0);z(this,p,null)}static get _isSVGFittingCanvas(){const i='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',H=new OffscreenCanvas(1,3).getContext("2d"),q=new Image;q.src=i;const J=q.decode().then(()=>(H.drawImage(q,0,0,1,1,0,0,1,3),new Uint32Array(H.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",J)}async getFromFile(i){const{lastModified:S,name:H,size:q,type:J}=i;return Y(this,y,Ve).call(this,`${S}_${H}_${q}_${J}`,i)}async getFromUrl(i){return Y(this,y,Ve).call(this,i,i)}async getFromId(i){e(this,p)||st(this,p,new Map);const S=e(this,p).get(i);return S?S.bitmap?(S.refCounter+=1,S):S.file?this.getFromFile(S.file):this.getFromUrl(S.url):null}getSvgUrl(i){const S=e(this,p).get(i);return S!=null&&S.isSvg?S.svgUrl:null}deleteId(i){e(this,p)||st(this,p,new Map);const S=e(this,p).get(i);S&&(S.refCounter-=1,S.refCounter===0&&(S.bitmap=null))}isValidId(i){return i.startsWith(`image_${e(this,E)}_`)}};let b=F;E=new WeakMap,A=new WeakMap,p=new WeakMap,y=new WeakSet,Ve=async function(i,S){e(this,p)||st(this,p,new Map);let H=e(this,p).get(i);if(H===null)return null;if(H!=null&&H.bitmap)return H.refCounter+=1,H;try{H||(H={bitmap:null,id:`image_${e(this,E)}_${ge(this,A)._++}`,refCounter:0,isSvg:!1});let q;if(typeof S=="string"){H.url=S;const J=await fetch(S);if(!J.ok)throw new Error(J.statusText);q=await J.blob()}else q=H.file=S;if(q.type==="image/svg+xml"){const J=F._isSVGFittingCanvas,at=new FileReader,_t=new Image,xt=new Promise((Pt,Gt)=>{_t.onload=()=>{H.bitmap=_t,H.isSvg=!0,Pt()},at.onload=async()=>{const Ft=H.svgUrl=at.result;_t.src=await J?`${Ft}#svgView(preserveAspectRatio(none))`:Ft},_t.onerror=at.onerror=Gt});at.readAsDataURL(q),await xt}else H.bitmap=await createImageBitmap(q);H.refCounter=1}catch(q){console.error(q),H=null}return e(this,p).set(i,H),H&&e(this,p).set(H.id,H),H};class _{constructor(i=128){z(this,P,[]);z(this,h,!1);z(this,f,void 0);z(this,N,-1);st(this,f,i)}add({cmd:i,undo:S,mustExec:H,type:q=NaN,overwriteIfSameType:J=!1,keepUndo:at=!1}){if(H&&i(),e(this,h))return;const _t={cmd:i,undo:S,type:q};if(e(this,N)===-1){e(this,P).length>0&&(e(this,P).length=0),st(this,N,0),e(this,P).push(_t);return}if(J&&e(this,P)[e(this,N)].type===q){at&&(_t.undo=e(this,P)[e(this,N)].undo),e(this,P)[e(this,N)]=_t;return}const xt=e(this,N)+1;xt===e(this,f)?e(this,P).splice(0,1):(st(this,N,xt),xt<e(this,P).length&&e(this,P).splice(xt)),e(this,P).push(_t)}undo(){e(this,N)!==-1&&(st(this,h,!0),e(this,P)[e(this,N)].undo(),st(this,h,!1),st(this,N,e(this,N)-1))}redo(){e(this,N)<e(this,P).length-1&&(st(this,N,e(this,N)+1),st(this,h,!0),e(this,P)[e(this,N)].cmd(),st(this,h,!1))}hasSomethingToUndo(){return e(this,N)!==-1}hasSomethingToRedo(){return e(this,N)<e(this,P).length-1}destroy(){st(this,P,null)}}P=new WeakMap,h=new WeakMap,f=new WeakMap,N=new WeakMap,t.CommandManager=_;class g{constructor(i){z(this,v);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:S}=n.FeatureTest.platform;for(const[H,q,J={}]of i)for(const at of H){const _t=at.startsWith("mac+");S&&_t?(this.callbacks.set(at.slice(4),{callback:q,options:J}),this.allKeys.add(at.split("+").at(-1))):!S&&!_t&&(this.callbacks.set(at,{callback:q,options:J}),this.allKeys.add(at.split("+").at(-1)))}}exec(i,S){if(!this.allKeys.has(S.key))return;const H=this.callbacks.get(Y(this,v,Tn).call(this,S));if(!H)return;const{callback:q,options:{bubbles:J=!1,args:at=[],checker:_t=null}}=H;_t&&!_t(i,S)||(q.bind(i,...at)(),J||(S.stopPropagation(),S.preventDefault()))}}v=new WeakSet,Tn=function(i){i.altKey&&this.buffer.push("alt"),i.ctrlKey&&this.buffer.push("ctrl"),i.metaKey&&this.buffer.push("meta"),i.shiftKey&&this.buffer.push("shift"),this.buffer.push(i.key);const S=this.buffer.join("+");return this.buffer.length=0,S},t.KeyboardManager=g;const I=class{get _colors(){const i=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(i),(0,n.shadow)(this,"_colors",i)}convert(i){const S=(0,u.getRGB)(i);if(!window.matchMedia("(forced-colors: active)").matches)return S;for(const[H,q]of this._colors)if(q.every((J,at)=>J===S[at]))return I._colorsMapping.get(H);return S}getHexCode(i){const S=this._colors.get(i);return S?n.Util.makeHexColor(...S):i}};let L=I;ee(L,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=L;const Ot=class{constructor(i,S,H,q,J,at){z(this,ft);z(this,Ct);z(this,zt);z(this,Vt);z(this,Wt);z(this,ht);z(this,B);z(this,bt);z(this,Zt);z(this,St);z(this,kt);z(this,Nt);z(this,At);z(this,w,null);z(this,V,new Map);z(this,$,new Map);z(this,R,null);z(this,K,null);z(this,rt,new _);z(this,lt,0);z(this,X,new Set);z(this,ct,null);z(this,pt,null);z(this,Et,new Set);z(this,yt,null);z(this,C,new G);z(this,s,!1);z(this,a,!1);z(this,r,null);z(this,c,n.AnnotationEditorType.NONE);z(this,d,new Set);z(this,m,null);z(this,D,this.blur.bind(this));z(this,W,this.focus.bind(this));z(this,tt,this.copy.bind(this));z(this,et,this.cut.bind(this));z(this,ot,this.paste.bind(this));z(this,dt,this.keydown.bind(this));z(this,vt,this.onEditingAction.bind(this));z(this,ut,this.onPageChanging.bind(this));z(this,Mt,this.onScaleChanging.bind(this));z(this,Bt,this.onRotationChanging.bind(this));z(this,wt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});z(this,Dt,[0,0]);z(this,gt,null);z(this,nt,null);z(this,it,null);st(this,nt,i),st(this,it,S),st(this,R,H),this._eventBus=q,this._eventBus._on("editingaction",e(this,vt)),this._eventBus._on("pagechanging",e(this,ut)),this._eventBus._on("scalechanging",e(this,Mt)),this._eventBus._on("rotationchanging",e(this,Bt)),st(this,K,J.annotationStorage),st(this,yt,J.filterFactory),st(this,m,at),this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const i=Ot.prototype,S=J=>{const{activeElement:at}=document;return at&&e(J,nt).contains(at)&&J.hasSomethingToControl()},H=this.TRANSLATE_SMALL,q=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],i.selectAll],[["ctrl+z","mac+meta+z"],i.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],i.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],i.delete],[["Escape","mac+Escape"],i.unselectAll],[["ArrowLeft","mac+ArrowLeft"],i.translateSelectedEditors,{args:[-H,0],checker:S}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],i.translateSelectedEditors,{args:[-q,0],checker:S}],[["ArrowRight","mac+ArrowRight"],i.translateSelectedEditors,{args:[H,0],checker:S}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],i.translateSelectedEditors,{args:[q,0],checker:S}],[["ArrowUp","mac+ArrowUp"],i.translateSelectedEditors,{args:[0,-H],checker:S}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],i.translateSelectedEditors,{args:[0,-q],checker:S}],[["ArrowDown","mac+ArrowDown"],i.translateSelectedEditors,{args:[0,H],checker:S}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],i.translateSelectedEditors,{args:[0,q],checker:S}]]))}destroy(){Y(this,Vt,Te).call(this),Y(this,Ct,Ge).call(this),this._eventBus._off("editingaction",e(this,vt)),this._eventBus._off("pagechanging",e(this,ut)),this._eventBus._off("scalechanging",e(this,Mt)),this._eventBus._off("rotationchanging",e(this,Bt));for(const i of e(this,$).values())i.destroy();e(this,$).clear(),e(this,V).clear(),e(this,Et).clear(),st(this,w,null),e(this,d).clear(),e(this,rt).destroy(),e(this,R).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",e(this,m)?e(this,yt).addHCMFilter(e(this,m).foreground,e(this,m).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(e(this,nt)).direction)}editAltText(i){var S;(S=e(this,R))==null||S.editAltText(this,i)}onPageChanging({pageNumber:i}){st(this,lt,i-1)}focusMainContainer(){e(this,nt).focus()}findParent(i,S){for(const H of e(this,$).values()){const{x:q,y:J,width:at,height:_t}=H.div.getBoundingClientRect();if(i>=q&&i<=q+at&&S>=J&&S<=J+_t)return H}return null}disableUserSelect(i=!1){e(this,it).classList.toggle("noUserSelect",i)}addShouldRescale(i){e(this,Et).add(i)}removeShouldRescale(i){e(this,Et).delete(i)}onScaleChanging({scale:i}){this.commitOrRemove(),this.viewParameters.realScale=i*u.PixelsPerInch.PDF_TO_CSS_UNITS;for(const S of e(this,Et))S.onScaleChanging()}onRotationChanging({pagesRotation:i}){this.commitOrRemove(),this.viewParameters.rotation=i}addToAnnotationStorage(i){!i.isEmpty()&&e(this,K)&&!e(this,K).has(i.id)&&e(this,K).setValue(i.id,i)}blur(){if(!this.hasSelection)return;const{activeElement:i}=document;for(const S of e(this,d))if(S.div.contains(i)){st(this,r,[S,i]),S._focusEventsAllowed=!1;break}}focus(){if(!e(this,r))return;const[i,S]=e(this,r);st(this,r,null),S.addEventListener("focusin",()=>{i._focusEventsAllowed=!0},{once:!0}),S.focus()}addEditListeners(){Y(this,zt,Xe).call(this),Y(this,Wt,qe).call(this)}removeEditListeners(){Y(this,Vt,Te).call(this),Y(this,ht,$e).call(this)}copy(i){var H;if(i.preventDefault(),(H=e(this,w))==null||H.commitOrRemove(),!this.hasSelection)return;const S=[];for(const q of e(this,d)){const J=q.serialize(!0);J&&S.push(J)}S.length!==0&&i.clipboardData.setData("application/pdfjs",JSON.stringify(S))}cut(i){this.copy(i),this.delete()}paste(i){i.preventDefault();const{clipboardData:S}=i;for(const J of S.items)for(const at of e(this,pt))if(at.isHandlingMimeForPasting(J.type)){at.paste(J,this.currentLayer);return}let H=S.getData("application/pdfjs");if(!H)return;try{H=JSON.parse(H)}catch(J){(0,n.warn)(`paste: "${J.message}".`);return}if(!Array.isArray(H))return;this.unselectAll();const q=this.currentLayer;try{const J=[];for(const xt of H){const Pt=q.deserialize(xt);if(!Pt)return;J.push(Pt)}const at=()=>{for(const xt of J)Y(this,kt,Ye).call(this,xt);Y(this,At,Ke).call(this,J)},_t=()=>{for(const xt of J)xt.remove()};this.addCommands({cmd:at,undo:_t,mustExec:!0})}catch(J){(0,n.warn)(`paste: "${J.message}".`)}}keydown(i){var S;(S=this.getActive())!=null&&S.shouldGetKeyboardEvents()||Ot._keyboardManager.exec(this,i)}onEditingAction(i){["undo","redo","delete","selectAll"].includes(i.name)&&this[i.name]()}setEditingState(i){i?(Y(this,ft,Cn).call(this),Y(this,zt,Xe).call(this),Y(this,Wt,qe).call(this),Y(this,B,re).call(this,{isEditing:e(this,c)!==n.AnnotationEditorType.NONE,isEmpty:Y(this,Nt,_e).call(this),hasSomethingToUndo:e(this,rt).hasSomethingToUndo(),hasSomethingToRedo:e(this,rt).hasSomethingToRedo(),hasSelectedEditor:!1})):(Y(this,Ct,Ge).call(this),Y(this,Vt,Te).call(this),Y(this,ht,$e).call(this),Y(this,B,re).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(i){if(!e(this,pt)){st(this,pt,i);for(const S of e(this,pt))Y(this,bt,me).call(this,S.defaultPropertiesToUpdate)}}getId(){return e(this,C).getId()}get currentLayer(){return e(this,$).get(e(this,lt))}getLayer(i){return e(this,$).get(i)}get currentPageIndex(){return e(this,lt)}addLayer(i){e(this,$).set(i.pageIndex,i),e(this,s)?i.enable():i.disable()}removeLayer(i){e(this,$).delete(i.pageIndex)}updateMode(i,S=null){if(e(this,c)!==i){if(st(this,c,i),i===n.AnnotationEditorType.NONE){this.setEditingState(!1),Y(this,St,Pn).call(this);return}this.setEditingState(!0),Y(this,Zt,kn).call(this),this.unselectAll();for(const H of e(this,$).values())H.updateMode(i);if(S){for(const H of e(this,V).values())if(H.annotationElementId===S){this.setSelected(H),H.enterInEditMode();break}}}}updateToolbar(i){i!==e(this,c)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:i})}updateParams(i,S){if(e(this,pt)){if(i===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(i);return}for(const H of e(this,d))H.updateParams(i,S);for(const H of e(this,pt))H.updateDefaultParams(i,S)}}enableWaiting(i=!1){if(e(this,a)!==i){st(this,a,i);for(const S of e(this,$).values())i?S.disableClick():S.enableClick(),S.div.classList.toggle("waiting",i)}}getEditors(i){const S=[];for(const H of e(this,V).values())H.pageIndex===i&&S.push(H);return S}getEditor(i){return e(this,V).get(i)}addEditor(i){e(this,V).set(i.id,i)}removeEditor(i){var S;e(this,V).delete(i.id),this.unselect(i),(!i.annotationElementId||!e(this,X).has(i.annotationElementId))&&((S=e(this,K))==null||S.remove(i.id))}addDeletedAnnotationElement(i){e(this,X).add(i.annotationElementId),i.deleted=!0}isDeletedAnnotationElement(i){return e(this,X).has(i)}removeDeletedAnnotationElement(i){e(this,X).delete(i.annotationElementId),i.deleted=!1}setActiveEditor(i){e(this,w)!==i&&(st(this,w,i),i&&Y(this,bt,me).call(this,i.propertiesToUpdate))}toggleSelected(i){if(e(this,d).has(i)){e(this,d).delete(i),i.unselect(),Y(this,B,re).call(this,{hasSelectedEditor:this.hasSelection});return}e(this,d).add(i),i.select(),Y(this,bt,me).call(this,i.propertiesToUpdate),Y(this,B,re).call(this,{hasSelectedEditor:!0})}setSelected(i){for(const S of e(this,d))S!==i&&S.unselect();e(this,d).clear(),e(this,d).add(i),i.select(),Y(this,bt,me).call(this,i.propertiesToUpdate),Y(this,B,re).call(this,{hasSelectedEditor:!0})}isSelected(i){return e(this,d).has(i)}unselect(i){i.unselect(),e(this,d).delete(i),Y(this,B,re).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return e(this,d).size!==0}undo(){e(this,rt).undo(),Y(this,B,re).call(this,{hasSomethingToUndo:e(this,rt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Y(this,Nt,_e).call(this)})}redo(){e(this,rt).redo(),Y(this,B,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:e(this,rt).hasSomethingToRedo(),isEmpty:Y(this,Nt,_e).call(this)})}addCommands(i){e(this,rt).add(i),Y(this,B,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Y(this,Nt,_e).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const i=[...e(this,d)],S=()=>{for(const q of i)q.remove()},H=()=>{for(const q of i)Y(this,kt,Ye).call(this,q)};this.addCommands({cmd:S,undo:H,mustExec:!0})}commitOrRemove(){var i;(i=e(this,w))==null||i.commitOrRemove()}hasSomethingToControl(){return e(this,w)||this.hasSelection}selectAll(){for(const i of e(this,d))i.commit();Y(this,At,Ke).call(this,e(this,V).values())}unselectAll(){if(e(this,w)){e(this,w).commitOrRemove();return}if(this.hasSelection){for(const i of e(this,d))i.unselect();e(this,d).clear(),Y(this,B,re).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(i,S,H=!1){if(H||this.commitOrRemove(),!this.hasSelection)return;e(this,Dt)[0]+=i,e(this,Dt)[1]+=S;const[q,J]=e(this,Dt),at=[...e(this,d)],_t=1e3;e(this,gt)&&clearTimeout(e(this,gt)),st(this,gt,setTimeout(()=>{st(this,gt,null),e(this,Dt)[0]=e(this,Dt)[1]=0,this.addCommands({cmd:()=>{for(const xt of at)e(this,V).has(xt.id)&&xt.translateInPage(q,J)},undo:()=>{for(const xt of at)e(this,V).has(xt.id)&&xt.translateInPage(-q,-J)},mustExec:!1})},_t));for(const xt of at)xt.translateInPage(i,S)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),st(this,ct,new Map);for(const i of e(this,d))e(this,ct).set(i,{savedX:i.x,savedY:i.y,savedPageIndex:i.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!e(this,ct))return!1;this.disableUserSelect(!1);const i=e(this,ct);st(this,ct,null);let S=!1;for(const[{x:q,y:J,pageIndex:at},_t]of i)_t.newX=q,_t.newY=J,_t.newPageIndex=at,S||(S=q!==_t.savedX||J!==_t.savedY||at!==_t.savedPageIndex);if(!S)return!1;const H=(q,J,at,_t)=>{if(e(this,V).has(q.id)){const xt=e(this,$).get(_t);xt?q._setParentAndPosition(xt,J,at):(q.pageIndex=_t,q.x=J,q.y=at)}};return this.addCommands({cmd:()=>{for(const[q,{newX:J,newY:at,newPageIndex:_t}]of i)H(q,J,at,_t)},undo:()=>{for(const[q,{savedX:J,savedY:at,savedPageIndex:_t}]of i)H(q,J,at,_t)},mustExec:!0}),!0}dragSelectedEditors(i,S){if(e(this,ct))for(const H of e(this,ct).keys())H.drag(i,S)}rebuild(i){if(i.parent===null){const S=this.getLayer(i.pageIndex);S?(S.changeParent(i),S.addOrRebuild(i)):(this.addEditor(i),this.addToAnnotationStorage(i),i.rebuild())}else i.parent.addOrRebuild(i)}isActive(i){return e(this,w)===i}getActive(){return e(this,w)}getMode(){return e(this,c)}get imageManager(){return(0,n.shadow)(this,"imageManager",new b)}};let j=Ot;w=new WeakMap,V=new WeakMap,$=new WeakMap,R=new WeakMap,K=new WeakMap,rt=new WeakMap,lt=new WeakMap,X=new WeakMap,ct=new WeakMap,pt=new WeakMap,Et=new WeakMap,yt=new WeakMap,C=new WeakMap,s=new WeakMap,a=new WeakMap,r=new WeakMap,c=new WeakMap,d=new WeakMap,m=new WeakMap,D=new WeakMap,W=new WeakMap,tt=new WeakMap,et=new WeakMap,ot=new WeakMap,dt=new WeakMap,vt=new WeakMap,ut=new WeakMap,Mt=new WeakMap,Bt=new WeakMap,wt=new WeakMap,Dt=new WeakMap,gt=new WeakMap,nt=new WeakMap,it=new WeakMap,ft=new WeakSet,Cn=function(){window.addEventListener("focus",e(this,W)),window.addEventListener("blur",e(this,D))},Ct=new WeakSet,Ge=function(){window.removeEventListener("focus",e(this,W)),window.removeEventListener("blur",e(this,D))},zt=new WeakSet,Xe=function(){window.addEventListener("keydown",e(this,dt),{capture:!0})},Vt=new WeakSet,Te=function(){window.removeEventListener("keydown",e(this,dt),{capture:!0})},Wt=new WeakSet,qe=function(){document.addEventListener("copy",e(this,tt)),document.addEventListener("cut",e(this,et)),document.addEventListener("paste",e(this,ot))},ht=new WeakSet,$e=function(){document.removeEventListener("copy",e(this,tt)),document.removeEventListener("cut",e(this,et)),document.removeEventListener("paste",e(this,ot))},B=new WeakSet,re=function(i){Object.entries(i).some(([H,q])=>e(this,wt)[H]!==q)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(e(this,wt),i)})},bt=new WeakSet,me=function(i){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:i})},Zt=new WeakSet,kn=function(){if(!e(this,s)){st(this,s,!0);for(const i of e(this,$).values())i.enable()}},St=new WeakSet,Pn=function(){if(this.unselectAll(),e(this,s)){st(this,s,!1);for(const i of e(this,$).values())i.disable()}},kt=new WeakSet,Ye=function(i){const S=e(this,$).get(i.pageIndex);S?S.addOrRebuild(i):this.addEditor(i)},Nt=new WeakSet,_e=function(){if(e(this,V).size===0)return!0;if(e(this,V).size===1)for(const i of e(this,V).values())return i.isEmpty();return!1},At=new WeakSet,Ke=function(i){e(this,d).clear();for(const S of i)S.isEmpty()||(e(this,d).add(S),S.select());Y(this,B,re).call(this,{hasSelectedEditor:!0})},ee(j,"TRANSLATE_SMALL",1),ee(j,"TRANSLATE_BIG",10),t.AnnotationEditorUIManager=j},(O,t,l)=>{var lt,X,ct,pt,Et,yt,C,s,a,r,c,d,de,D,ue,tt,Je,ot,Ce,vt,ke,Mt,be,wt,Ae;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=N,t.getColorValues=V,t.getCurrentTransform=$,t.getCurrentTransformInverse=R,t.getFilenameFromUrl=y,t.getPdfFilenameFromUrl=M,t.getRGB=w,t.getXfaPageViewport=I,t.isDataScheme=A,t.isPdfFile=p,t.isValidFetchUrl=P,t.loadScript=f,t.noContextMenu=h,t.setLayerDimensions=K;var n=l(7),u=l(1);const T="http://www.w3.org/2000/svg",rt=class{};let k=rt;ee(k,"CSS",96),ee(k,"PDF",72),ee(k,"PDF_TO_CSS_UNITS",rt.CSS/rt.PDF),t.PixelsPerInch=k;class G extends n.BaseFilterFactory{constructor({docId:it,ownerDocument:ft=globalThis.document}={}){super();z(this,d);z(this,D);z(this,tt);z(this,ot);z(this,vt);z(this,Mt);z(this,wt);z(this,lt,void 0);z(this,X,void 0);z(this,ct,void 0);z(this,pt,void 0);z(this,Et,void 0);z(this,yt,void 0);z(this,C,void 0);z(this,s,void 0);z(this,a,void 0);z(this,r,void 0);z(this,c,0);st(this,ct,it),st(this,pt,ft)}addFilter(it){if(!it)return"none";let ft=e(this,d,de).get(it);if(ft)return ft;let Tt,Ct,Ut,zt;if(it.length===1){const Wt=it[0],qt=new Array(256);for(let ht=0;ht<256;ht++)qt[ht]=Wt[ht]/255;zt=Tt=Ct=Ut=qt.join(",")}else{const[Wt,qt,ht]=it,Z=new Array(256),B=new Array(256),mt=new Array(256);for(let bt=0;bt<256;bt++)Z[bt]=Wt[bt]/255,B[bt]=qt[bt]/255,mt[bt]=ht[bt]/255;Tt=Z.join(","),Ct=B.join(","),Ut=mt.join(","),zt=`${Tt}${Ct}${Ut}`}if(ft=e(this,d,de).get(zt),ft)return e(this,d,de).set(it,ft),ft;const Ht=`g_${e(this,ct)}_transfer_map_${ge(this,c)._++}`,Vt=`url(#${Ht})`;e(this,d,de).set(it,Vt),e(this,d,de).set(zt,Vt);const Xt=Y(this,ot,Ce).call(this,Ht);return Y(this,Mt,be).call(this,Tt,Ct,Ut,Xt),Vt}addHCMFilter(it,ft){var qt;const Tt=`${it}-${ft}`;if(e(this,yt)===Tt)return e(this,C);if(st(this,yt,Tt),st(this,C,"none"),(qt=e(this,Et))==null||qt.remove(),!it||!ft)return e(this,C);const Ct=Y(this,wt,Ae).call(this,it);it=u.Util.makeHexColor(...Ct);const Ut=Y(this,wt,Ae).call(this,ft);if(ft=u.Util.makeHexColor(...Ut),e(this,D,ue).style.color="",it==="#000000"&&ft==="#ffffff"||it===ft)return e(this,C);const zt=new Array(256);for(let ht=0;ht<=255;ht++){const Z=ht/255;zt[ht]=Z<=.03928?Z/12.92:((Z+.055)/1.055)**2.4}const Ht=zt.join(","),Vt=`g_${e(this,ct)}_hcm_filter`,Xt=st(this,s,Y(this,ot,Ce).call(this,Vt));Y(this,Mt,be).call(this,Ht,Ht,Ht,Xt),Y(this,tt,Je).call(this,Xt);const Wt=(ht,Z)=>{const B=Ct[ht]/255,mt=Ut[ht]/255,bt=new Array(Z+1);for(let te=0;te<=Z;te++)bt[te]=B+te/Z*(mt-B);return bt.join(",")};return Y(this,Mt,be).call(this,Wt(0,5),Wt(1,5),Wt(2,5),Xt),st(this,C,`url(#${Vt})`),e(this,C)}addHighlightHCMFilter(it,ft,Tt,Ct){var mt;const Ut=`${it}-${ft}-${Tt}-${Ct}`;if(e(this,a)===Ut)return e(this,r);if(st(this,a,Ut),st(this,r,"none"),(mt=e(this,s))==null||mt.remove(),!it||!ft)return e(this,r);const[zt,Ht]=[it,ft].map(Y(this,wt,Ae).bind(this));let Vt=Math.round(.2126*zt[0]+.7152*zt[1]+.0722*zt[2]),Xt=Math.round(.2126*Ht[0]+.7152*Ht[1]+.0722*Ht[2]),[Wt,qt]=[Tt,Ct].map(Y(this,wt,Ae).bind(this));Xt<Vt&&([Vt,Xt,Wt,qt]=[Xt,Vt,qt,Wt]),e(this,D,ue).style.color="";const ht=(bt,te,Zt)=>{const Q=new Array(256),St=(Xt-Vt)/Zt,It=bt/255,kt=(te-bt)/(255*Zt);let Lt=0;for(let Nt=0;Nt<=Zt;Nt++){const Jt=Math.round(Vt+Nt*St),At=It+Nt*kt;for(let Yt=Lt;Yt<=Jt;Yt++)Q[Yt]=At;Lt=Jt+1}for(let Nt=Lt;Nt<256;Nt++)Q[Nt]=Q[Lt-1];return Q.join(",")},Z=`g_${e(this,ct)}_hcm_highlight_filter`,B=st(this,s,Y(this,ot,Ce).call(this,Z));return Y(this,tt,Je).call(this,B),Y(this,Mt,be).call(this,ht(Wt[0],qt[0],5),ht(Wt[1],qt[1],5),ht(Wt[2],qt[2],5),B),st(this,r,`url(#${Z})`),e(this,r)}destroy(it=!1){it&&(e(this,C)||e(this,r))||(e(this,X)&&(e(this,X).parentNode.parentNode.remove(),st(this,X,null)),e(this,lt)&&(e(this,lt).clear(),st(this,lt,null)),st(this,c,0))}}lt=new WeakMap,X=new WeakMap,ct=new WeakMap,pt=new WeakMap,Et=new WeakMap,yt=new WeakMap,C=new WeakMap,s=new WeakMap,a=new WeakMap,r=new WeakMap,c=new WeakMap,d=new WeakSet,de=function(){return e(this,lt)||st(this,lt,new Map)},D=new WeakSet,ue=function(){if(!e(this,X)){const it=e(this,pt).createElement("div"),{style:ft}=it;ft.visibility="hidden",ft.contain="strict",ft.width=ft.height=0,ft.position="absolute",ft.top=ft.left=0,ft.zIndex=-1;const Tt=e(this,pt).createElementNS(T,"svg");Tt.setAttribute("width",0),Tt.setAttribute("height",0),st(this,X,e(this,pt).createElementNS(T,"defs")),it.append(Tt),Tt.append(e(this,X)),e(this,pt).body.append(it)}return e(this,X)},tt=new WeakSet,Je=function(it){const ft=e(this,pt).createElementNS(T,"feColorMatrix");ft.setAttribute("type","matrix"),ft.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),it.append(ft)},ot=new WeakSet,Ce=function(it){const ft=e(this,pt).createElementNS(T,"filter");return ft.setAttribute("color-interpolation-filters","sRGB"),ft.setAttribute("id",it),e(this,D,ue).append(ft),ft},vt=new WeakSet,ke=function(it,ft,Tt){const Ct=e(this,pt).createElementNS(T,ft);Ct.setAttribute("type","discrete"),Ct.setAttribute("tableValues",Tt),it.append(Ct)},Mt=new WeakSet,be=function(it,ft,Tt,Ct){const Ut=e(this,pt).createElementNS(T,"feComponentTransfer");Ct.append(Ut),Y(this,vt,ke).call(this,Ut,"feFuncR",it),Y(this,vt,ke).call(this,Ut,"feFuncG",ft),Y(this,vt,ke).call(this,Ut,"feFuncB",Tt)},wt=new WeakSet,Ae=function(it){return e(this,D,ue).style.color=it,w(getComputedStyle(e(this,D,ue)).getPropertyValue("color"))},t.DOMFilterFactory=G;class b extends n.BaseCanvasFactory{constructor({ownerDocument:nt=globalThis.document}={}){super(),this._document=nt}_createCanvas(nt,it){const ft=this._document.createElement("canvas");return ft.width=nt,ft.height=it,ft}}t.DOMCanvasFactory=b;async function _(gt,nt=!1){if(P(gt,document.baseURI)){const it=await fetch(gt);if(!it.ok)throw new Error(it.statusText);return nt?new Uint8Array(await it.arrayBuffer()):(0,u.stringToBytes)(await it.text())}return new Promise((it,ft)=>{const Tt=new XMLHttpRequest;Tt.open("GET",gt,!0),nt&&(Tt.responseType="arraybuffer"),Tt.onreadystatechange=()=>{if(Tt.readyState===XMLHttpRequest.DONE){if(Tt.status===200||Tt.status===0){let Ct;if(nt&&Tt.response?Ct=new Uint8Array(Tt.response):!nt&&Tt.responseText&&(Ct=(0,u.stringToBytes)(Tt.responseText)),Ct){it(Ct);return}}ft(new Error(Tt.statusText))}},Tt.send(null)})}class g extends n.BaseCMapReaderFactory{_fetchData(nt,it){return _(nt,this.isCompressed).then(ft=>({cMapData:ft,compressionType:it}))}}t.DOMCMapReaderFactory=g;class L extends n.BaseStandardFontDataFactory{_fetchData(nt){return _(nt,!0)}}t.DOMStandardFontDataFactory=L;class j extends n.BaseSVGFactory{_createSVG(nt){return document.createElementNS(T,nt)}}t.DOMSVGFactory=j;class x{constructor({viewBox:nt,scale:it,rotation:ft,offsetX:Tt=0,offsetY:Ct=0,dontFlip:Ut=!1}){this.viewBox=nt,this.scale=it,this.rotation=ft,this.offsetX=Tt,this.offsetY=Ct;const zt=(nt[2]+nt[0])/2,Ht=(nt[3]+nt[1])/2;let Vt,Xt,Wt,qt;switch(ft%=360,ft<0&&(ft+=360),ft){case 180:Vt=-1,Xt=0,Wt=0,qt=1;break;case 90:Vt=0,Xt=1,Wt=1,qt=0;break;case 270:Vt=0,Xt=-1,Wt=-1,qt=0;break;case 0:Vt=1,Xt=0,Wt=0,qt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ut&&(Wt=-Wt,qt=-qt);let ht,Z,B,mt;Vt===0?(ht=Math.abs(Ht-nt[1])*it+Tt,Z=Math.abs(zt-nt[0])*it+Ct,B=(nt[3]-nt[1])*it,mt=(nt[2]-nt[0])*it):(ht=Math.abs(zt-nt[0])*it+Tt,Z=Math.abs(Ht-nt[1])*it+Ct,B=(nt[2]-nt[0])*it,mt=(nt[3]-nt[1])*it),this.transform=[Vt*it,Xt*it,Wt*it,qt*it,ht-Vt*it*zt-Wt*it*Ht,Z-Xt*it*zt-qt*it*Ht],this.width=B,this.height=mt}get rawDims(){const{viewBox:nt}=this;return(0,u.shadow)(this,"rawDims",{pageWidth:nt[2]-nt[0],pageHeight:nt[3]-nt[1],pageX:nt[0],pageY:nt[1]})}clone({scale:nt=this.scale,rotation:it=this.rotation,offsetX:ft=this.offsetX,offsetY:Tt=this.offsetY,dontFlip:Ct=!1}={}){return new x({viewBox:this.viewBox.slice(),scale:nt,rotation:it,offsetX:ft,offsetY:Tt,dontFlip:Ct})}convertToViewportPoint(nt,it){return u.Util.applyTransform([nt,it],this.transform)}convertToViewportRectangle(nt){const it=u.Util.applyTransform([nt[0],nt[1]],this.transform),ft=u.Util.applyTransform([nt[2],nt[3]],this.transform);return[it[0],it[1],ft[0],ft[1]]}convertToPdfPoint(nt,it){return u.Util.applyInverseTransform([nt,it],this.transform)}}t.PageViewport=x;class E extends u.BaseException{constructor(nt,it=0){super(nt,"RenderingCancelledException"),this.extraDelay=it}}t.RenderingCancelledException=E;function A(gt){const nt=gt.length;let it=0;for(;it<nt&&gt[it].trim()==="";)it++;return gt.substring(it,it+5).toLowerCase()==="data:"}function p(gt){return typeof gt=="string"&&/\.pdf$/i.test(gt)}function y(gt,nt=!1){return nt||([gt]=gt.split(/[#?]/,1)),gt.substring(gt.lastIndexOf("/")+1)}function M(gt,nt="document.pdf"){if(typeof gt!="string")return nt;if(A(gt))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),nt;const it=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ft=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Tt=it.exec(gt);let Ct=ft.exec(Tt[1])||ft.exec(Tt[2])||ft.exec(Tt[3]);if(Ct&&(Ct=Ct[0],Ct.includes("%")))try{Ct=ft.exec(decodeURIComponent(Ct))[0]}catch{}return Ct||nt}class F{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(nt){nt in this.started&&(0,u.warn)(`Timer is already running for ${nt}`),this.started[nt]=Date.now()}timeEnd(nt){nt in this.started||(0,u.warn)(`Timer has not been started for ${nt}`),this.times.push({name:nt,start:this.started[nt],end:Date.now()}),delete this.started[nt]}toString(){const nt=[];let it=0;for(const{name:ft}of this.times)it=Math.max(ft.length,it);for(const{name:ft,start:Tt,end:Ct}of this.times)nt.push(`${ft.padEnd(it)} ${Ct-Tt}ms
`);return nt.join("")}}t.StatTimer=F;function P(gt,nt){try{const{protocol:it}=nt?new URL(gt,nt):new URL(gt);return it==="http:"||it==="https:"}catch{return!1}}function h(gt){gt.preventDefault()}function f(gt,nt=!1){return new Promise((it,ft)=>{const Tt=document.createElement("script");Tt.src=gt,Tt.onload=function(Ct){nt&&Tt.remove(),it(Ct)},Tt.onerror=function(){ft(new Error(`Cannot load script at: ${Tt.src}`))},(document.head||document.documentElement).append(Tt)})}function N(gt){console.log("Deprecated API usage: "+gt)}let v;class o{static toDateObject(nt){if(!nt||typeof nt!="string")return null;v||(v=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const it=v.exec(nt);if(!it)return null;const ft=parseInt(it[1],10);let Tt=parseInt(it[2],10);Tt=Tt>=1&&Tt<=12?Tt-1:0;let Ct=parseInt(it[3],10);Ct=Ct>=1&&Ct<=31?Ct:1;let Ut=parseInt(it[4],10);Ut=Ut>=0&&Ut<=23?Ut:0;let zt=parseInt(it[5],10);zt=zt>=0&&zt<=59?zt:0;let Ht=parseInt(it[6],10);Ht=Ht>=0&&Ht<=59?Ht:0;const Vt=it[7]||"Z";let Xt=parseInt(it[8],10);Xt=Xt>=0&&Xt<=23?Xt:0;let Wt=parseInt(it[9],10)||0;return Wt=Wt>=0&&Wt<=59?Wt:0,Vt==="-"?(Ut+=Xt,zt+=Wt):Vt==="+"&&(Ut-=Xt,zt-=Wt),new Date(Date.UTC(ft,Tt,Ct,Ut,zt,Ht))}}t.PDFDateString=o;function I(gt,{scale:nt=1,rotation:it=0}){const{width:ft,height:Tt}=gt.attributes.style,Ct=[0,0,parseInt(ft),parseInt(Tt)];return new x({viewBox:Ct,scale:nt,rotation:it})}function w(gt){if(gt.startsWith("#")){const nt=parseInt(gt.slice(1),16);return[(nt&16711680)>>16,(nt&65280)>>8,nt&255]}return gt.startsWith("rgb(")?gt.slice(4,-1).split(",").map(nt=>parseInt(nt)):gt.startsWith("rgba(")?gt.slice(5,-1).split(",").map(nt=>parseInt(nt)).slice(0,3):((0,u.warn)(`Not a valid color format: "${gt}"`),[0,0,0])}function V(gt){const nt=document.createElement("span");nt.style.visibility="hidden",document.body.append(nt);for(const it of gt.keys()){nt.style.color=it;const ft=window.getComputedStyle(nt).color;gt.set(it,w(ft))}nt.remove()}function $(gt){const{a:nt,b:it,c:ft,d:Tt,e:Ct,f:Ut}=gt.getTransform();return[nt,it,ft,Tt,Ct,Ut]}function R(gt){const{a:nt,b:it,c:ft,d:Tt,e:Ct,f:Ut}=gt.getTransform().invertSelf();return[nt,it,ft,Tt,Ct,Ut]}function K(gt,nt,it=!1,ft=!0){if(nt instanceof x){const{pageWidth:Tt,pageHeight:Ct}=nt.rawDims,{style:Ut}=gt,zt=u.FeatureTest.isCSSRoundSupported,Ht=`var(--scale-factor) * ${Tt}px`,Vt=`var(--scale-factor) * ${Ct}px`,Xt=zt?`round(${Ht}, 1px)`:`calc(${Ht})`,Wt=zt?`round(${Vt}, 1px)`:`calc(${Vt})`;!it||nt.rotation%180===0?(Ut.width=Xt,Ut.height=Wt):(Ut.width=Wt,Ut.height=Xt)}ft&&gt.setAttribute("data-main-rotation",nt.rotation)}},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=l(1);class u{constructor(){this.constructor===u&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(g){return"none"}addHCMFilter(g,L){return"none"}addHighlightHCMFilter(g,L,j,x){return"none"}destroy(g=!1){}}t.BaseFilterFactory=u;class T{constructor(){this.constructor===T&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(g,L){if(g<=0||L<=0)throw new Error("Invalid canvas size");const j=this._createCanvas(g,L);return{canvas:j,context:j.getContext("2d")}}reset(g,L,j){if(!g.canvas)throw new Error("Canvas is not specified");if(L<=0||j<=0)throw new Error("Invalid canvas size");g.canvas.width=L,g.canvas.height=j}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,L){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=T;class k{constructor({baseUrl:g=null,isCompressed:L=!0}){this.constructor===k&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=g,this.isCompressed=L}async fetch({name:g}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!g)throw new Error("CMap name must be specified.");const L=this.baseUrl+g+(this.isCompressed?".bcmap":""),j=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(L,j).catch(x=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${L}`)})}_fetchData(g,L){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=k;class G{constructor({baseUrl:g=null}){this.constructor===G&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!g)throw new Error("Font filename must be specified.");const L=`${this.baseUrl}${g}`;return this._fetchData(L).catch(j=>{throw new Error(`Unable to load font data at: ${L}`)})}_fetchData(g){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=G;class b{constructor(){this.constructor===b&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(g,L,j=!1){if(g<=0||L<=0)throw new Error("Invalid SVG dimensions");const x=this._createSVG("svg:svg");return x.setAttribute("version","1.1"),j||(x.setAttribute("width",`${g}px`),x.setAttribute("height",`${L}px`)),x.setAttribute("preserveAspectRatio","none"),x.setAttribute("viewBox",`0 0 ${g} ${L}`),x}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=b},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=l(1);const u=3285377520,T=4294901760,k=65535;class G{constructor(_){this.h1=_?_&4294967295:u,this.h2=_?_&4294967295:u}update(_){let g,L;if(typeof _=="string"){g=new Uint8Array(_.length*2),L=0;for(let N=0,v=_.length;N<v;N++){const o=_.charCodeAt(N);o<=255?g[L++]=o:(g[L++]=o>>>8,g[L++]=o&255)}}else if((0,n.isArrayBuffer)(_))g=_.slice(),L=g.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const j=L>>2,x=L-j*4,E=new Uint32Array(g.buffer,0,j);let A=0,p=0,y=this.h1,M=this.h2;const F=3432918353,P=461845907,h=F&k,f=P&k;for(let N=0;N<j;N++)N&1?(A=E[N],A=A*F&T|A*h&k,A=A<<15|A>>>17,A=A*P&T|A*f&k,y^=A,y=y<<13|y>>>19,y=y*5+3864292196):(p=E[N],p=p*F&T|p*h&k,p=p<<15|p>>>17,p=p*P&T|p*f&k,M^=p,M=M<<13|M>>>19,M=M*5+3864292196);switch(A=0,x){case 3:A^=g[j*4+2]<<16;case 2:A^=g[j*4+1]<<8;case 1:A^=g[j*4],A=A*F&T|A*h&k,A=A<<15|A>>>17,A=A*P&T|A*f&k,j&1?y^=A:M^=A}this.h1=y,this.h2=M}hexdigest(){let _=this.h1,g=this.h2;return _^=g>>>1,_=_*3981806797&T|_*36045&k,g=g*4283543511&T|((g<<16|_>>>16)*2950163797&T)>>>16,_^=g>>>1,_=_*444984403&T|_*60499&k,g=g*3301882366&T|((g<<16|_>>>16)*3120437893&T)>>>16,_^=g>>>1,(_>>>0).toString(16).padStart(8,"0")+(g>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=G},(O,t,l)=>{var k;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=l(1);class u{constructor({ownerDocument:b=globalThis.document,styleElement:_=null}){z(this,k,new Set);this._document=b,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(b){this.nativeFontFaces.add(b),this._document.fonts.add(b)}removeNativeFontFace(b){this.nativeFontFaces.delete(b),this._document.fonts.delete(b)}insertRule(b){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const _=this.styleElement.sheet;_.insertRule(b,_.cssRules.length)}clear(){for(const b of this.nativeFontFaces)this._document.fonts.delete(b);this.nativeFontFaces.clear(),e(this,k).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(b){if(!(!b||e(this,k).has(b.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:_,src:g,style:L}=b,j=new FontFace(_,g,L);this.addNativeFontFace(j);try{await j.load(),e(this,k).add(_)}catch{(0,n.warn)(`Cannot load system font: ${b.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(j)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(b){if(b.attached||b.missingFile&&!b.systemFontInfo)return;if(b.attached=!0,b.systemFontInfo){await this.loadSystemFont(b.systemFontInfo);return}if(this.isFontLoadingAPISupported){const g=b.createNativeFontFace();if(g){this.addNativeFontFace(g);try{await g.loaded}catch(L){throw(0,n.warn)(`Failed to load font '${g.family}': '${L}'.`),b.disableFontFace=!0,L}}return}const _=b.createFontFaceRule();if(_){if(this.insertRule(_),this.isSyncFontLoadingSupported)return;await new Promise(g=>{const L=this._queueLoadingCallback(g);this._prepareFontLoadEvent(b,L)})}}get isFontLoadingAPISupported(){var _;const b=!!((_=this._document)!=null&&_.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",b)}get isSyncFontLoadingSupported(){let b=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(b=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",b)}_queueLoadingCallback(b){function _(){for((0,n.assert)(!L.done,"completeRequest() cannot be called twice."),L.done=!0;g.length>0&&g[0].done;){const j=g.shift();setTimeout(j.callback,0)}}const{loadingRequests:g}=this,L={done:!1,complete:_,callback:b};return g.push(L),L}get _loadTestFont(){const b=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",b)}_prepareFontLoadEvent(b,_){function g(w,V){return w.charCodeAt(V)<<24|w.charCodeAt(V+1)<<16|w.charCodeAt(V+2)<<8|w.charCodeAt(V+3)&255}function L(w,V,$,R){const K=w.substring(0,V),rt=w.substring(V+$);return K+R+rt}let j,x;const E=this._document.createElement("canvas");E.width=1,E.height=1;const A=E.getContext("2d");let p=0;function y(w,V){if(++p>30){(0,n.warn)("Load test font never loaded."),V();return}if(A.font="30px "+w,A.fillText(".",0,20),A.getImageData(0,0,1,1).data[3]>0){V();return}setTimeout(y.bind(null,w,V))}const M=`lt${Date.now()}${this.loadTestFontId++}`;let F=this._loadTestFont;F=L(F,976,M.length,M);const h=16,f=1482184792;let N=g(F,h);for(j=0,x=M.length-3;j<x;j+=4)N=N-f+g(M,j)|0;j<M.length&&(N=N-f+g(M+"XXX",j)|0),F=L(F,h,4,(0,n.string32)(N));const v=`url(data:font/opentype;base64,${btoa(F)});`,o=`@font-face {font-family:"${M}";src:${v}}`;this.insertRule(o);const I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(const w of[b.loadedName,M]){const V=this._document.createElement("span");V.textContent="Hi",V.style.fontFamily=w,I.append(V)}this._document.body.append(I),y(M,()=>{I.remove(),_.complete()})}}k=new WeakMap,t.FontLoader=u;class T{constructor(b,{isEvalSupported:_=!0,disableFontFace:g=!1,ignoreErrors:L=!1,inspectFont:j=null}){this.compiledGlyphs=Object.create(null);for(const x in b)this[x]=b[x];this.isEvalSupported=_!==!1,this.disableFontFace=g===!0,this.ignoreErrors=L===!0,this._inspectFont=j}createNativeFontFace(){var _;if(!this.data||this.disableFontFace)return null;let b;if(!this.cssFontInfo)b=new FontFace(this.loadedName,this.data,{});else{const g={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(g.style=`oblique ${this.cssFontInfo.italicAngle}deg`),b=new FontFace(this.cssFontInfo.fontFamily,this.data,g)}return(_=this._inspectFont)==null||_.call(this,this),b}createFontFaceRule(){var L;if(!this.data||this.disableFontFace)return null;const b=(0,n.bytesToString)(this.data),_=`url(data:${this.mimetype};base64,${btoa(b)});`;let g;if(!this.cssFontInfo)g=`@font-face {font-family:"${this.loadedName}";src:${_}}`;else{let j=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(j+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),g=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${j}src:${_}}`}return(L=this._inspectFont)==null||L.call(this,this,_),g}getPathGenerator(b,_){if(this.compiledGlyphs[_]!==void 0)return this.compiledGlyphs[_];let g;try{g=b.get(this.loadedName+"_path_"+_)}catch(L){if(!this.ignoreErrors)throw L;return(0,n.warn)(`getPathGenerator - ignoring character: "${L}".`),this.compiledGlyphs[_]=function(j,x){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const L=[];for(const j of g){const x=j.args!==void 0?j.args.join(","):"";L.push("c.",j.cmd,"(",x,`);
`)}return this.compiledGlyphs[_]=new Function("c","size",L.join(""))}return this.compiledGlyphs[_]=function(L,j){for(const x of g)x.cmd==="scale"&&(x.args=[j,-j]),L[x.cmd].apply(L,x.args)}}}t.FontFaceObject=T},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=l(7);l(1);const u=function(_){return new Promise((g,L)=>{require$$5.readFile(_,(x,E)=>{if(x||!E){L(new Error(x));return}g(new Uint8Array(E))})})};class T extends n.BaseFilterFactory{}t.NodeFilterFactory=T;class k extends n.BaseCanvasFactory{_createCanvas(g,L){return require$$5.createCanvas(g,L)}}t.NodeCanvasFactory=k;class G extends n.BaseCMapReaderFactory{_fetchData(g,L){return u(g).then(j=>({cMapData:j,compressionType:L}))}}t.NodeCMapReaderFactory=G;class b extends n.BaseStandardFontDataFactory{_fetchData(g){return u(g)}}t.NodeStandardFontDataFactory=b},(O,t,l)=>{var X,Qe,pt,Ze;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=l(1),u=l(6),T=l(12),k=l(13);const G=16,b=100,_=4096,g=15,L=10,j=1e3,x=16;function E(C,s){if(C._removeMirroring)throw new Error("Context is already forwarding operations.");C.__originalSave=C.save,C.__originalRestore=C.restore,C.__originalRotate=C.rotate,C.__originalScale=C.scale,C.__originalTranslate=C.translate,C.__originalTransform=C.transform,C.__originalSetTransform=C.setTransform,C.__originalResetTransform=C.resetTransform,C.__originalClip=C.clip,C.__originalMoveTo=C.moveTo,C.__originalLineTo=C.lineTo,C.__originalBezierCurveTo=C.bezierCurveTo,C.__originalRect=C.rect,C.__originalClosePath=C.closePath,C.__originalBeginPath=C.beginPath,C._removeMirroring=()=>{C.save=C.__originalSave,C.restore=C.__originalRestore,C.rotate=C.__originalRotate,C.scale=C.__originalScale,C.translate=C.__originalTranslate,C.transform=C.__originalTransform,C.setTransform=C.__originalSetTransform,C.resetTransform=C.__originalResetTransform,C.clip=C.__originalClip,C.moveTo=C.__originalMoveTo,C.lineTo=C.__originalLineTo,C.bezierCurveTo=C.__originalBezierCurveTo,C.rect=C.__originalRect,C.closePath=C.__originalClosePath,C.beginPath=C.__originalBeginPath,delete C._removeMirroring},C.save=function(){s.save(),this.__originalSave()},C.restore=function(){s.restore(),this.__originalRestore()},C.translate=function(r,c){s.translate(r,c),this.__originalTranslate(r,c)},C.scale=function(r,c){s.scale(r,c),this.__originalScale(r,c)},C.transform=function(r,c,d,m,D,W){s.transform(r,c,d,m,D,W),this.__originalTransform(r,c,d,m,D,W)},C.setTransform=function(r,c,d,m,D,W){s.setTransform(r,c,d,m,D,W),this.__originalSetTransform(r,c,d,m,D,W)},C.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},C.rotate=function(r){s.rotate(r),this.__originalRotate(r)},C.clip=function(r){s.clip(r),this.__originalClip(r)},C.moveTo=function(a,r){s.moveTo(a,r),this.__originalMoveTo(a,r)},C.lineTo=function(a,r){s.lineTo(a,r),this.__originalLineTo(a,r)},C.bezierCurveTo=function(a,r,c,d,m,D){s.bezierCurveTo(a,r,c,d,m,D),this.__originalBezierCurveTo(a,r,c,d,m,D)},C.rect=function(a,r,c,d){s.rect(a,r,c,d),this.__originalRect(a,r,c,d)},C.closePath=function(){s.closePath(),this.__originalClosePath()},C.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class A{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,a,r){let c;return this.cache[s]!==void 0?(c=this.cache[s],this.canvasFactory.reset(c,a,r)):(c=this.canvasFactory.create(a,r),this.cache[s]=c),c}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const a=this.cache[s];this.canvasFactory.destroy(a),delete this.cache[s]}}}function p(C,s,a,r,c,d,m,D,W,tt){const[et,ot,dt,vt,ut,Mt]=(0,u.getCurrentTransform)(C);if(ot===0&&dt===0){const Dt=m*et+ut,gt=Math.round(Dt),nt=D*vt+Mt,it=Math.round(nt),ft=(m+W)*et+ut,Tt=Math.abs(Math.round(ft)-gt)||1,Ct=(D+tt)*vt+Mt,Ut=Math.abs(Math.round(Ct)-it)||1;return C.setTransform(Math.sign(et),0,0,Math.sign(vt),gt,it),C.drawImage(s,a,r,c,d,0,0,Tt,Ut),C.setTransform(et,ot,dt,vt,ut,Mt),[Tt,Ut]}if(et===0&&vt===0){const Dt=D*dt+ut,gt=Math.round(Dt),nt=m*ot+Mt,it=Math.round(nt),ft=(D+tt)*dt+ut,Tt=Math.abs(Math.round(ft)-gt)||1,Ct=(m+W)*ot+Mt,Ut=Math.abs(Math.round(Ct)-it)||1;return C.setTransform(0,Math.sign(ot),Math.sign(dt),0,gt,it),C.drawImage(s,a,r,c,d,0,0,Ut,Tt),C.setTransform(et,ot,dt,vt,ut,Mt),[Ut,Tt]}C.drawImage(s,a,r,c,d,m,D,W,tt);const Bt=Math.hypot(et,ot),wt=Math.hypot(dt,vt);return[Bt*W,wt*tt]}function y(C){const{width:s,height:a}=C;if(s>j||a>j)return null;const r=1e3,c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),d=s+1;let m=new Uint8Array(d*(a+1)),D,W,tt;const et=s+7&-8;let ot=new Uint8Array(et*a),dt=0;for(const wt of C.data){let Dt=128;for(;Dt>0;)ot[dt++]=wt&Dt?0:255,Dt>>=1}let vt=0;for(dt=0,ot[dt]!==0&&(m[0]=1,++vt),W=1;W<s;W++)ot[dt]!==ot[dt+1]&&(m[W]=ot[dt]?2:1,++vt),dt++;for(ot[dt]!==0&&(m[W]=2,++vt),D=1;D<a;D++){dt=D*et,tt=D*d,ot[dt-et]!==ot[dt]&&(m[tt]=ot[dt]?1:8,++vt);let wt=(ot[dt]?4:0)+(ot[dt-et]?8:0);for(W=1;W<s;W++)wt=(wt>>2)+(ot[dt+1]?4:0)+(ot[dt-et+1]?8:0),c[wt]&&(m[tt+W]=c[wt],++vt),dt++;if(ot[dt-et]!==ot[dt]&&(m[tt+W]=ot[dt]?2:4,++vt),vt>r)return null}for(dt=et*(a-1),tt=D*d,ot[dt]!==0&&(m[tt]=8,++vt),W=1;W<s;W++)ot[dt]!==ot[dt+1]&&(m[tt+W]=ot[dt]?4:8,++vt),dt++;if(ot[dt]!==0&&(m[tt+W]=4,++vt),vt>r)return null;const ut=new Int32Array([0,d,-1,0,-d,0,0,0,1]),Mt=new Path2D;for(D=0;vt&&D<=a;D++){let wt=D*d;const Dt=wt+s;for(;wt<Dt&&!m[wt];)wt++;if(wt===Dt)continue;Mt.moveTo(wt%d,D);const gt=wt;let nt=m[wt];do{const it=ut[nt];do wt+=it;while(!m[wt]);const ft=m[wt];ft!==5&&ft!==10?(nt=ft,m[wt]=0):(nt=ft&51*nt>>4,m[wt]&=nt>>2|nt<<2),Mt.lineTo(wt%d,wt/d|0),m[wt]||--vt}while(gt!==wt);--D}return ot=null,m=null,function(wt){wt.save(),wt.scale(1/s,-1/a),wt.translate(0,-a),wt.fill(Mt),wt.beginPath(),wt.restore()}}class M{constructor(s,a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,a])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,a){this.x=s,this.y=a}updatePathMinMax(s,a,r){[a,r]=n.Util.applyTransform([a,r],s),this.minX=Math.min(this.minX,a),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,a),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(s,a){const r=n.Util.applyTransform(a,s),c=n.Util.applyTransform(a.slice(2),s);this.minX=Math.min(this.minX,r[0],c[0]),this.minY=Math.min(this.minY,r[1],c[1]),this.maxX=Math.max(this.maxX,r[0],c[0]),this.maxY=Math.max(this.maxY,r[1],c[1])}updateScalingPathMinMax(s,a){n.Util.scaleMinMax(s,a),this.minX=Math.min(this.minX,a[0]),this.maxX=Math.max(this.maxX,a[1]),this.minY=Math.min(this.minY,a[2]),this.maxY=Math.max(this.maxY,a[3])}updateCurvePathMinMax(s,a,r,c,d,m,D,W,tt,et){const ot=n.Util.bezierBoundingBox(a,r,c,d,m,D,W,tt);if(et){et[0]=Math.min(et[0],ot[0],ot[2]),et[1]=Math.max(et[1],ot[0],ot[2]),et[2]=Math.min(et[2],ot[1],ot[3]),et[3]=Math.max(et[3],ot[1],ot[3]);return}this.updateRectMinMax(s,ot)}getPathBoundingBox(s=T.PathType.FILL,a=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(s===T.PathType.STROKE){a||(0,n.unreachable)("Stroke bounding box must include transform.");const c=n.Util.singularValueDecompose2dScale(a),d=c[0]*this.lineWidth/2,m=c[1]*this.lineWidth/2;r[0]-=d,r[1]-=m,r[2]+=d,r[3]+=m}return r}updateClipFromPath(){const s=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=T.PathType.FILL,a=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(s,a))}}function F(C,s){if(typeof ImageData<"u"&&s instanceof ImageData){C.putImageData(s,0,0);return}const a=s.height,r=s.width,c=a%x,d=(a-c)/x,m=c===0?d:d+1,D=C.createImageData(r,x);let W=0,tt;const et=s.data,ot=D.data;let dt,vt,ut,Mt;if(s.kind===n.ImageKind.GRAYSCALE_1BPP){const Bt=et.byteLength,wt=new Uint32Array(ot.buffer,0,ot.byteLength>>2),Dt=wt.length,gt=r+7>>3,nt=4294967295,it=n.FeatureTest.isLittleEndian?4278190080:255;for(dt=0;dt<m;dt++){for(ut=dt<d?x:c,tt=0,vt=0;vt<ut;vt++){const ft=Bt-W;let Tt=0;const Ct=ft>gt?r:ft*8-7,Ut=Ct&-8;let zt=0,Ht=0;for(;Tt<Ut;Tt+=8)Ht=et[W++],wt[tt++]=Ht&128?nt:it,wt[tt++]=Ht&64?nt:it,wt[tt++]=Ht&32?nt:it,wt[tt++]=Ht&16?nt:it,wt[tt++]=Ht&8?nt:it,wt[tt++]=Ht&4?nt:it,wt[tt++]=Ht&2?nt:it,wt[tt++]=Ht&1?nt:it;for(;Tt<Ct;Tt++)zt===0&&(Ht=et[W++],zt=128),wt[tt++]=Ht&zt?nt:it,zt>>=1}for(;tt<Dt;)wt[tt++]=0;C.putImageData(D,0,dt*x)}}else if(s.kind===n.ImageKind.RGBA_32BPP){for(vt=0,Mt=r*x*4,dt=0;dt<d;dt++)ot.set(et.subarray(W,W+Mt)),W+=Mt,C.putImageData(D,0,vt),vt+=x;dt<m&&(Mt=r*c*4,ot.set(et.subarray(W,W+Mt)),C.putImageData(D,0,vt))}else if(s.kind===n.ImageKind.RGB_24BPP)for(ut=x,Mt=r*ut,dt=0;dt<m;dt++){for(dt>=d&&(ut=c,Mt=r*ut),tt=0,vt=Mt;vt--;)ot[tt++]=et[W++],ot[tt++]=et[W++],ot[tt++]=et[W++],ot[tt++]=255;C.putImageData(D,0,dt*x)}else throw new Error(`bad image kind: ${s.kind}`)}function P(C,s){if(s.bitmap){C.drawImage(s.bitmap,0,0);return}const a=s.height,r=s.width,c=a%x,d=(a-c)/x,m=c===0?d:d+1,D=C.createImageData(r,x);let W=0;const tt=s.data,et=D.data;for(let ot=0;ot<m;ot++){const dt=ot<d?x:c;({srcPos:W}=(0,k.convertBlackAndWhiteToRGBA)({src:tt,srcPos:W,dest:et,width:r,height:dt,nonBlackColor:0})),C.putImageData(D,0,ot*x)}}function h(C,s){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of a)C[r]!==void 0&&(s[r]=C[r]);C.setLineDash!==void 0&&(s.setLineDash(C.getLineDash()),s.lineDashOffset=C.lineDashOffset)}function f(C){if(C.strokeStyle=C.fillStyle="#000000",C.fillRule="nonzero",C.globalAlpha=1,C.lineWidth=1,C.lineCap="butt",C.lineJoin="miter",C.miterLimit=10,C.globalCompositeOperation="source-over",C.font="10px sans-serif",C.setLineDash!==void 0&&(C.setLineDash([]),C.lineDashOffset=0),!n.isNodeJS){const{filter:s}=C;s!=="none"&&s!==""&&(C.filter="none")}}function N(C,s,a,r){const c=C.length;for(let d=3;d<c;d+=4){const m=C[d];if(m===0)C[d-3]=s,C[d-2]=a,C[d-1]=r;else if(m<255){const D=255-m;C[d-3]=C[d-3]*m+s*D>>8,C[d-2]=C[d-2]*m+a*D>>8,C[d-1]=C[d-1]*m+r*D>>8}}}function v(C,s,a){const r=C.length,c=1/255;for(let d=3;d<r;d+=4){const m=a?a[C[d]]:C[d];s[d]=s[d]*m*c|0}}function o(C,s,a){const r=C.length;for(let c=3;c<r;c+=4){const d=C[c-3]*77+C[c-2]*152+C[c-1]*28;s[c]=a?s[c]*a[d>>8]>>8:s[c]*d>>16}}function I(C,s,a,r,c,d,m,D,W,tt,et){const ot=!!d,dt=ot?d[0]:0,vt=ot?d[1]:0,ut=ot?d[2]:0,Mt=c==="Luminosity"?o:v,wt=Math.min(r,Math.ceil(1048576/a));for(let Dt=0;Dt<r;Dt+=wt){const gt=Math.min(wt,r-Dt),nt=C.getImageData(D-tt,Dt+(W-et),a,gt),it=s.getImageData(D,Dt+W,a,gt);ot&&N(nt.data,dt,vt,ut),Mt(nt.data,it.data,m),s.putImageData(it,D,Dt+W)}}function w(C,s,a,r){const c=r[0],d=r[1],m=r[2]-c,D=r[3]-d;m===0||D===0||(I(s.context,a,m,D,s.subtype,s.backdrop,s.transferMap,c,d,s.offsetX,s.offsetY),C.save(),C.globalAlpha=1,C.globalCompositeOperation="source-over",C.setTransform(1,0,0,1,0,0),C.drawImage(a.canvas,0,0),C.restore())}function V(C,s){const a=n.Util.singularValueDecompose2dScale(C);a[0]=Math.fround(a[0]),a[1]=Math.fround(a[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:a[0]<=r||a[1]<=r}const $=["butt","round","square"],R=["miter","round","bevel"],K={},rt={},yt=class{constructor(s,a,r,c,d,{optionalContentConfig:m,markedContentStack:D=null},W,tt){z(this,X);z(this,pt);this.ctx=s,this.current=new M(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=r,this.canvasFactory=c,this.filterFactory=d,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=D||[],this.optionalContentConfig=m,this.cachedCanvases=new A(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=W,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=tt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,a=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):a}beginDrawing({transform:s,viewport:a,transparency:r=!1,background:c=null}){const d=this.ctx.canvas.width,m=this.ctx.canvas.height,D=this.ctx.fillStyle;if(this.ctx.fillStyle=c||"#ffffff",this.ctx.fillRect(0,0,d,m),this.ctx.fillStyle=D,r){const W=this.cachedCanvases.getCanvas("transparent",d,m);this.compositeCtx=this.ctx,this.transparentCanvas=W.canvas,this.ctx=W.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),f(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}executeOperatorList(s,a,r,c){const d=s.argsArray,m=s.fnArray;let D=a||0;const W=d.length;if(W===D)return D;const tt=W-D>L&&typeof r=="function",et=tt?Date.now()+g:0;let ot=0;const dt=this.commonObjs,vt=this.objs;let ut;for(;;){if(c!==void 0&&D===c.nextBreakPoint)return c.breakIt(D,r),D;if(ut=m[D],ut!==n.OPS.dependency)this[ut].apply(this,d[D]);else for(const Mt of d[D]){const Bt=Mt.startsWith("g_")?dt:vt;if(!Bt.has(Mt))return Bt.get(Mt,r),D}if(D++,D===W)return D;if(tt&&++ot>L){if(Date.now()>et)return r(),D;ot=0}}}endDrawing(){Y(this,X,Qe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const a of s.values())typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&(a.width=a.height=0);s.clear()}this._cachedBitmapsMap.clear(),Y(this,pt,Ze).call(this)}_scaleImage(s,a){const r=s.width,c=s.height;let d=Math.max(Math.hypot(a[0],a[1]),1),m=Math.max(Math.hypot(a[2],a[3]),1),D=r,W=c,tt="prescale1",et,ot;for(;d>2&&D>1||m>2&&W>1;){let dt=D,vt=W;d>2&&D>1&&(dt=D>=16384?Math.floor(D/2)-1||1:Math.ceil(D/2),d/=D/dt),m>2&&W>1&&(vt=W>=16384?Math.floor(W/2)-1||1:Math.ceil(W)/2,m/=W/vt),et=this.cachedCanvases.getCanvas(tt,dt,vt),ot=et.context,ot.clearRect(0,0,dt,vt),ot.drawImage(s,0,0,D,W,0,0,dt,vt),s=et.canvas,D=dt,W=vt,tt=tt==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:D,paintHeight:W}}_createMaskCanvas(s){const a=this.ctx,{width:r,height:c}=s,d=this.current.fillColor,m=this.current.patternFill,D=(0,u.getCurrentTransform)(a);let W,tt,et,ot;if((s.bitmap||s.data)&&s.count>1){const Tt=s.bitmap||s.data.buffer;tt=JSON.stringify(m?D:[D.slice(0,4),d]),W=this._cachedBitmapsMap.get(Tt),W||(W=new Map,this._cachedBitmapsMap.set(Tt,W));const Ct=W.get(tt);if(Ct&&!m){const Ut=Math.round(Math.min(D[0],D[2])+D[4]),zt=Math.round(Math.min(D[1],D[3])+D[5]);return{canvas:Ct,offsetX:Ut,offsetY:zt}}et=Ct}et||(ot=this.cachedCanvases.getCanvas("maskCanvas",r,c),P(ot.context,s));let dt=n.Util.transform(D,[1/r,0,0,-1/c,0,0]);dt=n.Util.transform(dt,[1,0,0,1,0,-c]);const vt=n.Util.applyTransform([0,0],dt),ut=n.Util.applyTransform([r,c],dt),Mt=n.Util.normalizeRect([vt[0],vt[1],ut[0],ut[1]]),Bt=Math.round(Mt[2]-Mt[0])||1,wt=Math.round(Mt[3]-Mt[1])||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",Bt,wt),gt=Dt.context,nt=Math.min(vt[0],ut[0]),it=Math.min(vt[1],ut[1]);gt.translate(-nt,-it),gt.transform(...dt),et||(et=this._scaleImage(ot.canvas,(0,u.getCurrentTransformInverse)(gt)),et=et.img,W&&m&&W.set(tt,et)),gt.imageSmoothingEnabled=V((0,u.getCurrentTransform)(gt),s.interpolate),p(gt,et,0,0,et.width,et.height,0,0,r,c),gt.globalCompositeOperation="source-in";const ft=n.Util.transform((0,u.getCurrentTransformInverse)(gt),[1,0,0,1,-nt,-it]);return gt.fillStyle=m?d.getPattern(a,this,ft,T.PathType.FILL):d,gt.fillRect(0,0,r,c),W&&!m&&(this.cachedCanvases.delete("fillCanvas"),W.set(tt,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(nt),offsetY:Math.round(it)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=$[s]}setLineJoin(s){this.ctx.lineJoin=R[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,a){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(s),r.lineDashOffset=a)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[a,r]of s)switch(a){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,a=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,c=this.cachedCanvases.getCanvas(r,s,a);this.suspendedCtx=this.ctx,this.ctx=c.context;const d=this.ctx;d.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),h(this.suspendedCtx,d),E(d,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),h(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const a=this.current.activeSMask,r=this.suspendedCtx;w(r,a,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(h(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),h(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,a,r,c,d,m){this.ctx.transform(s,a,r,c,d,m),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,a,r){const c=this.ctx,d=this.current;let m=d.x,D=d.y,W,tt;const et=(0,u.getCurrentTransform)(c),ot=et[0]===0&&et[3]===0||et[1]===0&&et[2]===0,dt=ot?r.slice(0):null;for(let vt=0,ut=0,Mt=s.length;vt<Mt;vt++)switch(s[vt]|0){case n.OPS.rectangle:m=a[ut++],D=a[ut++];const Bt=a[ut++],wt=a[ut++],Dt=m+Bt,gt=D+wt;c.moveTo(m,D),Bt===0||wt===0?c.lineTo(Dt,gt):(c.lineTo(Dt,D),c.lineTo(Dt,gt),c.lineTo(m,gt)),ot||d.updateRectMinMax(et,[m,D,Dt,gt]),c.closePath();break;case n.OPS.moveTo:m=a[ut++],D=a[ut++],c.moveTo(m,D),ot||d.updatePathMinMax(et,m,D);break;case n.OPS.lineTo:m=a[ut++],D=a[ut++],c.lineTo(m,D),ot||d.updatePathMinMax(et,m,D);break;case n.OPS.curveTo:W=m,tt=D,m=a[ut+4],D=a[ut+5],c.bezierCurveTo(a[ut],a[ut+1],a[ut+2],a[ut+3],m,D),d.updateCurvePathMinMax(et,W,tt,a[ut],a[ut+1],a[ut+2],a[ut+3],m,D,dt),ut+=6;break;case n.OPS.curveTo2:W=m,tt=D,c.bezierCurveTo(m,D,a[ut],a[ut+1],a[ut+2],a[ut+3]),d.updateCurvePathMinMax(et,W,tt,m,D,a[ut],a[ut+1],a[ut+2],a[ut+3],dt),m=a[ut+2],D=a[ut+3],ut+=4;break;case n.OPS.curveTo3:W=m,tt=D,m=a[ut+2],D=a[ut+3],c.bezierCurveTo(a[ut],a[ut+1],m,D,m,D),d.updateCurvePathMinMax(et,W,tt,a[ut],a[ut+1],m,D,m,D,dt),ut+=4;break;case n.OPS.closePath:c.closePath();break}ot&&d.updateScalingPathMinMax(et,dt),d.setCurrentPoint(m,D)}closePath(){this.ctx.closePath()}stroke(s=!0){const a=this.ctx,r=this.current.strokeColor;a.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&(r!=null&&r.getPattern)?(a.save(),a.strokeStyle=r.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),T.PathType.STROKE),this.rescaleAndStroke(!1),a.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),a.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const a=this.ctx,r=this.current.fillColor,c=this.current.patternFill;let d=!1;c&&(a.save(),a.fillStyle=r.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),T.PathType.FILL),d=!0);const m=this.current.getClippedPathBoundingBox();this.contentVisible&&m!==null&&(this.pendingEOFill?(a.fill("evenodd"),this.pendingEOFill=!1):a.fill()),d&&a.restore(),s&&this.consumePath(m)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=K}eoClip(){this.pendingClip=rt}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,a=this.ctx;if(s===void 0){a.beginPath();return}a.save(),a.beginPath();for(const r of s)a.setTransform(...r.transform),a.translate(r.x,r.y),r.addToPath(a,r.fontSize);a.restore(),a.clip(),a.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,a){var et;const r=this.commonObjs.get(s),c=this.current;if(!r)throw new Error(`Can't find font for ${s}`);if(c.fontMatrix=r.fontMatrix||n.FONT_IDENTITY_MATRIX,(c.fontMatrix[0]===0||c.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+s),a<0?(a=-a,c.fontDirection=-1):c.fontDirection=1,this.current.font=r,this.current.fontSize=a,r.isType3Font)return;const d=r.loadedName||"sans-serif",m=((et=r.systemFontInfo)==null?void 0:et.css)||`"${d}", ${r.fallbackName}`;let D="normal";r.black?D="900":r.bold&&(D="bold");const W=r.italic?"italic":"normal";let tt=a;a<G?tt=G:a>b&&(tt=b),this.current.fontSizeScale=a/tt,this.ctx.font=`${W} ${D} ${tt}px ${m}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,a){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=a}setLeadingMoveText(s,a){this.setLeading(-a),this.moveText(s,a)}setTextMatrix(s,a,r,c,d,m){this.current.textMatrix=[s,a,r,c,d,m],this.current.textMatrixScale=Math.hypot(s,a),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,a,r,c){const d=this.ctx,m=this.current,D=m.font,W=m.textRenderingMode,tt=m.fontSize/m.fontSizeScale,et=W&n.TextRenderingMode.FILL_STROKE_MASK,ot=!!(W&n.TextRenderingMode.ADD_TO_PATH_FLAG),dt=m.patternFill&&!D.missingFile;let vt;(D.disableFontFace||ot||dt)&&(vt=D.getPathGenerator(this.commonObjs,s)),D.disableFontFace||dt?(d.save(),d.translate(a,r),d.beginPath(),vt(d,tt),c&&d.setTransform(...c),(et===n.TextRenderingMode.FILL||et===n.TextRenderingMode.FILL_STROKE)&&d.fill(),(et===n.TextRenderingMode.STROKE||et===n.TextRenderingMode.FILL_STROKE)&&d.stroke(),d.restore()):((et===n.TextRenderingMode.FILL||et===n.TextRenderingMode.FILL_STROKE)&&d.fillText(s,a,r),(et===n.TextRenderingMode.STROKE||et===n.TextRenderingMode.FILL_STROKE)&&d.strokeText(s,a,r)),ot&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,u.getCurrentTransform)(d),x:a,y:r,fontSize:tt,addToPath:vt})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const a=s.getImageData(0,0,10,10).data;let r=!1;for(let c=3;c<a.length;c+=4)if(a[c]>0&&a[c]<255){r=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",r)}showText(s){const a=this.current,r=a.font;if(r.isType3Font)return this.showType3Text(s);const c=a.fontSize;if(c===0)return;const d=this.ctx,m=a.fontSizeScale,D=a.charSpacing,W=a.wordSpacing,tt=a.fontDirection,et=a.textHScale*tt,ot=s.length,dt=r.vertical,vt=dt?1:-1,ut=r.defaultVMetrics,Mt=c*a.fontMatrix[0],Bt=a.textRenderingMode===n.TextRenderingMode.FILL&&!r.disableFontFace&&!a.patternFill;d.save(),d.transform(...a.textMatrix),d.translate(a.x,a.y+a.textRise),tt>0?d.scale(et,-1):d.scale(et,1);let wt;if(a.patternFill){d.save();const ft=a.fillColor.getPattern(d,this,(0,u.getCurrentTransformInverse)(d),T.PathType.FILL);wt=(0,u.getCurrentTransform)(d),d.restore(),d.fillStyle=ft}let Dt=a.lineWidth;const gt=a.textMatrixScale;if(gt===0||Dt===0){const ft=a.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(ft===n.TextRenderingMode.STROKE||ft===n.TextRenderingMode.FILL_STROKE)&&(Dt=this.getSinglePixelWidth())}else Dt/=gt;if(m!==1&&(d.scale(m,m),Dt/=m),d.lineWidth=Dt,r.isInvalidPDFjsFont){const ft=[];let Tt=0;for(const Ct of s)ft.push(Ct.unicode),Tt+=Ct.width;d.fillText(ft.join(""),0,0),a.x+=Tt*Mt*et,d.restore(),this.compose();return}let nt=0,it;for(it=0;it<ot;++it){const ft=s[it];if(typeof ft=="number"){nt+=vt*ft*c/1e3;continue}let Tt=!1;const Ct=(ft.isSpace?W:0)+D,Ut=ft.fontChar,zt=ft.accent;let Ht,Vt,Xt=ft.width;if(dt){const qt=ft.vmetric||ut,ht=-(ft.vmetric?qt[1]:Xt*.5)*Mt,Z=qt[2]*Mt;Xt=qt?-qt[0]:Xt,Ht=ht/m,Vt=(nt+Z)/m}else Ht=nt/m,Vt=0;if(r.remeasure&&Xt>0){const qt=d.measureText(Ut).width*1e3/c*m;if(Xt<qt&&this.isFontSubpixelAAEnabled){const ht=Xt/qt;Tt=!0,d.save(),d.scale(ht,1),Ht/=ht}else Xt!==qt&&(Ht+=(Xt-qt)/2e3*c/m)}if(this.contentVisible&&(ft.isInFont||r.missingFile)){if(Bt&&!zt)d.fillText(Ut,Ht,Vt);else if(this.paintChar(Ut,Ht,Vt,wt),zt){const qt=Ht+c*zt.offset.x/m,ht=Vt-c*zt.offset.y/m;this.paintChar(zt.fontChar,qt,ht,wt)}}const Wt=dt?Xt*Mt-Ct*tt:Xt*Mt+Ct*tt;nt+=Wt,Tt&&d.restore()}dt?a.y-=nt:a.x+=nt*et,d.restore(),this.compose()}showType3Text(s){const a=this.ctx,r=this.current,c=r.font,d=r.fontSize,m=r.fontDirection,D=c.vertical?1:-1,W=r.charSpacing,tt=r.wordSpacing,et=r.textHScale*m,ot=r.fontMatrix||n.FONT_IDENTITY_MATRIX,dt=s.length,vt=r.textRenderingMode===n.TextRenderingMode.INVISIBLE;let ut,Mt,Bt,wt;if(!(vt||d===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...r.textMatrix),a.translate(r.x,r.y),a.scale(et,m),ut=0;ut<dt;++ut){if(Mt=s[ut],typeof Mt=="number"){wt=D*Mt*d/1e3,this.ctx.translate(wt,0),r.x+=wt*et;continue}const Dt=(Mt.isSpace?tt:0)+W,gt=c.charProcOperatorList[Mt.operatorListId];if(!gt){(0,n.warn)(`Type3 character "${Mt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Mt,this.save(),a.scale(d,d),a.transform(...ot),this.executeOperatorList(gt),this.restore()),Bt=n.Util.applyTransform([Mt.width,0],ot)[0]*d+Dt,a.translate(Bt,0),r.x+=Bt*et}a.restore(),this.processingType3=null}}setCharWidth(s,a){}setCharWidthAndBounds(s,a,r,c,d,m){this.ctx.rect(r,c,d-r,m-c),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let a;if(s[0]==="TilingPattern"){const r=s[1],c=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),d={createCanvasGraphics:m=>new yt(m,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};a=new T.TilingPattern(s,r,this.ctx,d,c)}else a=this._getPattern(s[1],s[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,a,r){const c=n.Util.makeHexColor(s,a,r);this.ctx.strokeStyle=c,this.current.strokeColor=c}setFillRGBColor(s,a,r){const c=n.Util.makeHexColor(s,a,r);this.ctx.fillStyle=c,this.current.fillColor=c,this.current.patternFill=!1}_getPattern(s,a=null){let r;return this.cachedPatterns.has(s)?r=this.cachedPatterns.get(s):(r=(0,T.getShadingPattern)(this.getObject(s)),this.cachedPatterns.set(s,r)),a&&(r.matrix=a),r}shadingFill(s){if(!this.contentVisible)return;const a=this.ctx;this.save();const r=this._getPattern(s);a.fillStyle=r.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),T.PathType.SHADING);const c=(0,u.getCurrentTransformInverse)(a);if(c){const{width:d,height:m}=a.canvas,[D,W,tt,et]=n.Util.getAxialAlignedBoundingBox([0,0,d,m],c);this.ctx.fillRect(D,W,tt-D,et-W)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,a){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),a)){const r=a[2]-a[0],c=a[3]-a[1];this.ctx.rect(a[0],a[1],r,c),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),a),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;s.isolated||(0,n.info)("TODO: Support non-isolated groups."),s.knockout&&(0,n.warn)("Knockout groups not supported.");const r=(0,u.getCurrentTransform)(a);if(s.matrix&&a.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let c=n.Util.getAxialAlignedBoundingBox(s.bbox,(0,u.getCurrentTransform)(a));const d=[0,0,a.canvas.width,a.canvas.height];c=n.Util.intersect(c,d)||[0,0,0,0];const m=Math.floor(c[0]),D=Math.floor(c[1]);let W=Math.max(Math.ceil(c[2])-m,1),tt=Math.max(Math.ceil(c[3])-D,1),et=1,ot=1;W>_&&(et=W/_,W=_),tt>_&&(ot=tt/_,tt=_),this.current.startNewPathAndClipBox([0,0,W,tt]);let dt="groupAt"+this.groupLevel;s.smask&&(dt+="_smask_"+this.smaskCounter++%2);const vt=this.cachedCanvases.getCanvas(dt,W,tt),ut=vt.context;ut.scale(1/et,1/ot),ut.translate(-m,-D),ut.transform(...r),s.smask?this.smaskStack.push({canvas:vt.canvas,context:ut,offsetX:m,offsetY:D,scaleX:et,scaleY:ot,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(m,D),a.scale(et,ot),a.save()),h(a,ut),this.ctx=ut,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const c=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...c);const d=n.Util.getAxialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],c);this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(d)}}beginAnnotation(s,a,r,c,d){if(Y(this,X,Qe).call(this),f(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(a)&&a.length===4){const m=a[2]-a[0],D=a[3]-a[1];if(d&&this.annotationCanvasMap){r=r.slice(),r[4]-=a[0],r[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=m,a[3]=D;const[W,tt]=n.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:et}=this,ot=Math.ceil(m*this.outputScaleX*et),dt=Math.ceil(D*this.outputScaleY*et);this.annotationCanvas=this.canvasFactory.create(ot,dt);const{canvas:vt,context:ut}=this.annotationCanvas;this.annotationCanvasMap.set(s,vt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ut,this.ctx.save(),this.ctx.setTransform(W,0,0,-tt,0,D*tt),f(this.ctx)}else f(this.ctx),this.ctx.rect(a[0],a[1],m,D),this.ctx.clip(),this.endPath()}this.current=new M(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...c)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Y(this,pt,Ze).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const a=s.count;s=this.getObject(s.data,s),s.count=a;const r=this.ctx,c=this.processingType3;if(c&&(c.compiled===void 0&&(c.compiled=y(s)),c.compiled)){c.compiled(r);return}const d=this._createMaskCanvas(s),m=d.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(m,d.offsetX,d.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(s,a,r=0,c=0,d,m){if(!this.contentVisible)return;s=this.getObject(s.data,s);const D=this.ctx;D.save();const W=(0,u.getCurrentTransform)(D);D.transform(a,r,c,d,0,0);const tt=this._createMaskCanvas(s);D.setTransform(1,0,0,1,tt.offsetX-W[4],tt.offsetY-W[5]);for(let et=0,ot=m.length;et<ot;et+=2){const dt=n.Util.transform(W,[a,r,c,d,m[et],m[et+1]]),[vt,ut]=n.Util.applyTransform([0,0],dt);D.drawImage(tt.canvas,vt,ut)}D.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const a=this.ctx,r=this.current.fillColor,c=this.current.patternFill;for(const d of s){const{data:m,width:D,height:W,transform:tt}=d,et=this.cachedCanvases.getCanvas("maskCanvas",D,W),ot=et.context;ot.save();const dt=this.getObject(m,d);P(ot,dt),ot.globalCompositeOperation="source-in",ot.fillStyle=c?r.getPattern(ot,this,(0,u.getCurrentTransformInverse)(a),T.PathType.FILL):r,ot.fillRect(0,0,D,W),ot.restore(),a.save(),a.transform(...tt),a.scale(1,-1),p(a,et.canvas,0,0,D,W,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const a=this.getObject(s);if(!a){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(a)}paintImageXObjectRepeat(s,a,r,c){if(!this.contentVisible)return;const d=this.getObject(s);if(!d){(0,n.warn)("Dependent image isn't ready yet");return}const m=d.width,D=d.height,W=[];for(let tt=0,et=c.length;tt<et;tt+=2)W.push({transform:[a,0,0,r,c[tt],c[tt+1]],x:0,y:0,w:m,h:D});this.paintInlineImageXObjectGroup(d,W)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:a,width:r,height:c}=s,d=this.cachedCanvases.getCanvas("inlineImage",r,c),m=d.context;return m.filter=this.current.transferMaps,m.drawImage(a,0,0),m.filter="none",d.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const a=s.width,r=s.height,c=this.ctx;if(this.save(),!n.isNodeJS){const{filter:D}=c;D!=="none"&&D!==""&&(c.filter="none")}c.scale(1/a,-1/r);let d;if(s.bitmap)d=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)d=s;else{const W=this.cachedCanvases.getCanvas("inlineImage",a,r).context;F(W,s),d=this.applyTransferMapsToCanvas(W)}const m=this._scaleImage(d,(0,u.getCurrentTransformInverse)(c));c.imageSmoothingEnabled=V((0,u.getCurrentTransform)(c),s.interpolate),p(c,m.img,0,0,m.paintWidth,m.paintHeight,0,-r,a,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,a){if(!this.contentVisible)return;const r=this.ctx;let c;if(s.bitmap)c=s.bitmap;else{const d=s.width,m=s.height,W=this.cachedCanvases.getCanvas("inlineImage",d,m).context;F(W,s),c=this.applyTransferMapsToCanvas(W)}for(const d of a)r.save(),r.transform(...d.transform),r.scale(1,-1),p(r,c,d.x,d.y,d.w,d.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,a){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,a){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const r=this.ctx;this.pendingClip&&(a||(this.pendingClip===rt?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,u.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const a=Math.abs(s[0]*s[3]-s[2]*s[1]),r=Math.hypot(s[0],s[2]),c=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(r,c)/a}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a,b:r,c,d}=this.ctx.getTransform();let m,D;if(r===0&&c===0){const W=Math.abs(a),tt=Math.abs(d);if(W===tt)if(s===0)m=D=1/W;else{const et=W*s;m=D=et<1?1/et:1}else if(s===0)m=1/W,D=1/tt;else{const et=W*s,ot=tt*s;m=et<1?1/et:1,D=ot<1?1/ot:1}}else{const W=Math.abs(a*d-r*c),tt=Math.hypot(a,r),et=Math.hypot(c,d);if(s===0)m=et/W,D=tt/W;else{const ot=s*W;m=et>ot?et/ot:1,D=tt>ot?tt/ot:1}}this._cachedScaleForStroking[0]=m,this._cachedScaleForStroking[1]=D}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:a}=this,{lineWidth:r}=this.current,[c,d]=this.getScaleForStroking();if(a.lineWidth=r||1,c===1&&d===1){a.stroke();return}const m=a.getLineDash();if(s&&a.save(),a.scale(c,d),m.length>0){const D=Math.max(c,d);a.setLineDash(m.map(W=>W/D)),a.lineDashOffset/=D}a.stroke(),s&&a.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};let lt=yt;X=new WeakSet,Qe=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},pt=new WeakSet,Ze=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const a=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=a}}},t.CanvasGraphics=lt;for(const C in n.OPS)lt.prototype[C]!==void 0&&(lt.prototype[n.OPS[C]]=lt.prototype[C])},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=x;var n=l(1),u=l(6);const T={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=T;function k(y,M){if(!M)return;const F=M[2]-M[0],P=M[3]-M[1],h=new Path2D;h.rect(M[0],M[1],F,P),y.clip(h)}class G{constructor(){this.constructor===G&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class b extends G{constructor(M){super(),this._type=M[1],this._bbox=M[2],this._colorStops=M[3],this._p0=M[4],this._p1=M[5],this._r0=M[6],this._r1=M[7],this.matrix=null}_createGradient(M){let F;this._type==="axial"?F=M.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(F=M.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const P of this._colorStops)F.addColorStop(P[0],P[1]);return F}getPattern(M,F,P,h){let f;if(h===T.STROKE||h===T.FILL){const N=F.current.getClippedPathBoundingBox(h,(0,u.getCurrentTransform)(M))||[0,0,0,0],v=Math.ceil(N[2]-N[0])||1,o=Math.ceil(N[3]-N[1])||1,I=F.cachedCanvases.getCanvas("pattern",v,o,!0),w=I.context;w.clearRect(0,0,w.canvas.width,w.canvas.height),w.beginPath(),w.rect(0,0,w.canvas.width,w.canvas.height),w.translate(-N[0],-N[1]),P=n.Util.transform(P,[1,0,0,1,N[0],N[1]]),w.transform(...F.baseTransform),this.matrix&&w.transform(...this.matrix),k(w,this._bbox),w.fillStyle=this._createGradient(w),w.fill(),f=M.createPattern(I.canvas,"no-repeat");const V=new DOMMatrix(P);f.setTransform(V)}else k(M,this._bbox),f=this._createGradient(M);return f}}function _(y,M,F,P,h,f,N,v){const o=M.coords,I=M.colors,w=y.data,V=y.width*4;let $;o[F+1]>o[P+1]&&($=F,F=P,P=$,$=f,f=N,N=$),o[P+1]>o[h+1]&&($=P,P=h,h=$,$=N,N=v,v=$),o[F+1]>o[P+1]&&($=F,F=P,P=$,$=f,f=N,N=$);const R=(o[F]+M.offsetX)*M.scaleX,K=(o[F+1]+M.offsetY)*M.scaleY,rt=(o[P]+M.offsetX)*M.scaleX,lt=(o[P+1]+M.offsetY)*M.scaleY,X=(o[h]+M.offsetX)*M.scaleX,ct=(o[h+1]+M.offsetY)*M.scaleY;if(K>=ct)return;const pt=I[f],Et=I[f+1],yt=I[f+2],C=I[N],s=I[N+1],a=I[N+2],r=I[v],c=I[v+1],d=I[v+2],m=Math.round(K),D=Math.round(ct);let W,tt,et,ot,dt,vt,ut,Mt;for(let Bt=m;Bt<=D;Bt++){if(Bt<lt){const it=Bt<K?0:(K-Bt)/(K-lt);W=R-(R-rt)*it,tt=pt-(pt-C)*it,et=Et-(Et-s)*it,ot=yt-(yt-a)*it}else{let it;Bt>ct?it=1:lt===ct?it=0:it=(lt-Bt)/(lt-ct),W=rt-(rt-X)*it,tt=C-(C-r)*it,et=s-(s-c)*it,ot=a-(a-d)*it}let wt;Bt<K?wt=0:Bt>ct?wt=1:wt=(K-Bt)/(K-ct),dt=R-(R-X)*wt,vt=pt-(pt-r)*wt,ut=Et-(Et-c)*wt,Mt=yt-(yt-d)*wt;const Dt=Math.round(Math.min(W,dt)),gt=Math.round(Math.max(W,dt));let nt=V*Bt+Dt*4;for(let it=Dt;it<=gt;it++)wt=(W-it)/(W-dt),wt<0?wt=0:wt>1&&(wt=1),w[nt++]=tt-(tt-vt)*wt|0,w[nt++]=et-(et-ut)*wt|0,w[nt++]=ot-(ot-Mt)*wt|0,w[nt++]=255}}function g(y,M,F){const P=M.coords,h=M.colors;let f,N;switch(M.type){case"lattice":const v=M.verticesPerRow,o=Math.floor(P.length/v)-1,I=v-1;for(f=0;f<o;f++){let w=f*v;for(let V=0;V<I;V++,w++)_(y,F,P[w],P[w+1],P[w+v],h[w],h[w+1],h[w+v]),_(y,F,P[w+v+1],P[w+1],P[w+v],h[w+v+1],h[w+1],h[w+v])}break;case"triangles":for(f=0,N=P.length;f<N;f+=3)_(y,F,P[f],P[f+1],P[f+2],h[f],h[f+1],h[f+2]);break;default:throw new Error("illegal figure")}}class L extends G{constructor(M){super(),this._coords=M[2],this._colors=M[3],this._figures=M[4],this._bounds=M[5],this._bbox=M[7],this._background=M[8],this.matrix=null}_createMeshCanvas(M,F,P){const v=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),I=Math.ceil(this._bounds[2])-v,w=Math.ceil(this._bounds[3])-o,V=Math.min(Math.ceil(Math.abs(I*M[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(w*M[1]*1.1)),3e3),R=I/V,K=w/$,rt={coords:this._coords,colors:this._colors,offsetX:-v,offsetY:-o,scaleX:1/R,scaleY:1/K},lt=V+2*2,X=$+2*2,ct=P.getCanvas("mesh",lt,X,!1),pt=ct.context,Et=pt.createImageData(V,$);if(F){const C=Et.data;for(let s=0,a=C.length;s<a;s+=4)C[s]=F[0],C[s+1]=F[1],C[s+2]=F[2],C[s+3]=255}for(const C of this._figures)g(Et,C,rt);return pt.putImageData(Et,2,2),{canvas:ct.canvas,offsetX:v-2*R,offsetY:o-2*K,scaleX:R,scaleY:K}}getPattern(M,F,P,h){k(M,this._bbox);let f;if(h===T.SHADING)f=n.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(M));else if(f=n.Util.singularValueDecompose2dScale(F.baseTransform),this.matrix){const v=n.Util.singularValueDecompose2dScale(this.matrix);f=[f[0]*v[0],f[1]*v[1]]}const N=this._createMeshCanvas(f,h===T.SHADING?null:this._background,F.cachedCanvases);return h!==T.SHADING&&(M.setTransform(...F.baseTransform),this.matrix&&M.transform(...this.matrix)),M.translate(N.offsetX,N.offsetY),M.scale(N.scaleX,N.scaleY),M.createPattern(N.canvas,"no-repeat")}}class j extends G{getPattern(){return"hotpink"}}function x(y){switch(y[0]){case"RadialAxial":return new b(y);case"Mesh":return new L(y);case"Dummy":return new j}throw new Error(`Unknown IR type: ${y[0]}`)}const E={COLORED:1,UNCOLORED:2},p=class{constructor(M,F,P,h,f){this.operatorList=M[2],this.matrix=M[3]||[1,0,0,1,0,0],this.bbox=M[4],this.xstep=M[5],this.ystep=M[6],this.paintType=M[7],this.tilingType=M[8],this.color=F,this.ctx=P,this.canvasGraphicsFactory=h,this.baseTransform=f}createPatternCanvas(M){const F=this.operatorList,P=this.bbox,h=this.xstep,f=this.ystep,N=this.paintType,v=this.tilingType,o=this.color,I=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+v);const w=P[0],V=P[1],$=P[2],R=P[3],K=n.Util.singularValueDecompose2dScale(this.matrix),rt=n.Util.singularValueDecompose2dScale(this.baseTransform),lt=[K[0]*rt[0],K[1]*rt[1]],X=this.getSizeAndScale(h,this.ctx.canvas.width,lt[0]),ct=this.getSizeAndScale(f,this.ctx.canvas.height,lt[1]),pt=M.cachedCanvases.getCanvas("pattern",X.size,ct.size,!0),Et=pt.context,yt=I.createCanvasGraphics(Et);yt.groupLevel=M.groupLevel,this.setFillAndStrokeStyleToContext(yt,N,o);let C=w,s=V,a=$,r=R;return w<0&&(C=0,a+=Math.abs(w)),V<0&&(s=0,r+=Math.abs(V)),Et.translate(-(X.scale*C),-(ct.scale*s)),yt.transform(X.scale,0,0,ct.scale,0,0),Et.save(),this.clipBbox(yt,C,s,a,r),yt.baseTransform=(0,u.getCurrentTransform)(yt.ctx),yt.executeOperatorList(F),yt.endDrawing(),{canvas:pt.canvas,scaleX:X.scale,scaleY:ct.scale,offsetX:C,offsetY:s}}getSizeAndScale(M,F,P){M=Math.abs(M);const h=Math.max(p.MAX_PATTERN_SIZE,F);let f=Math.ceil(M*P);return f>=h?f=h:P=f/M,{scale:P,size:f}}clipBbox(M,F,P,h,f){const N=h-F,v=f-P;M.ctx.rect(F,P,N,v),M.current.updateRectMinMax((0,u.getCurrentTransform)(M.ctx),[F,P,h,f]),M.clip(),M.endPath()}setFillAndStrokeStyleToContext(M,F,P){const h=M.ctx,f=M.current;switch(F){case E.COLORED:const N=this.ctx;h.fillStyle=N.fillStyle,h.strokeStyle=N.strokeStyle,f.fillColor=N.fillStyle,f.strokeColor=N.strokeStyle;break;case E.UNCOLORED:const v=n.Util.makeHexColor(P[0],P[1],P[2]);h.fillStyle=v,h.strokeStyle=v,f.fillColor=v,f.strokeColor=v;break;default:throw new n.FormatError(`Unsupported paint type: ${F}`)}}getPattern(M,F,P,h){let f=P;h!==T.SHADING&&(f=n.Util.transform(f,F.baseTransform),this.matrix&&(f=n.Util.transform(f,this.matrix)));const N=this.createPatternCanvas(F);let v=new DOMMatrix(f);v=v.translate(N.offsetX,N.offsetY),v=v.scale(1/N.scaleX,1/N.scaleY);const o=M.createPattern(N.canvas,"repeat");return o.setTransform(v),o}};let A=p;ee(A,"MAX_PATTERN_SIZE",3e3),t.TilingPattern=A},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=T,t.convertToRGBA=u,t.grayToRGBA=G;var n=l(1);function u(b){switch(b.kind){case n.ImageKind.GRAYSCALE_1BPP:return T(b);case n.ImageKind.RGB_24BPP:return k(b)}return null}function T({src:b,srcPos:_=0,dest:g,width:L,height:j,nonBlackColor:x=4294967295,inverseDecode:E=!1}){const A=n.FeatureTest.isLittleEndian?4278190080:255,[p,y]=E?[x,A]:[A,x],M=L>>3,F=L&7,P=b.length;g=new Uint32Array(g.buffer);let h=0;for(let f=0;f<j;f++){for(const v=_+M;_<v;_++){const o=_<P?b[_]:255;g[h++]=o&128?y:p,g[h++]=o&64?y:p,g[h++]=o&32?y:p,g[h++]=o&16?y:p,g[h++]=o&8?y:p,g[h++]=o&4?y:p,g[h++]=o&2?y:p,g[h++]=o&1?y:p}if(F===0)continue;const N=_<P?b[_++]:255;for(let v=0;v<F;v++)g[h++]=N&1<<7-v?y:p}return{srcPos:_,destPos:h}}function k({src:b,srcPos:_=0,dest:g,destPos:L=0,width:j,height:x}){let E=0;const A=b.length>>2,p=new Uint32Array(b.buffer,_,A);if(n.FeatureTest.isLittleEndian){for(;E<A-2;E+=3,L+=4){const y=p[E],M=p[E+1],F=p[E+2];g[L]=y|4278190080,g[L+1]=y>>>24|M<<8|4278190080,g[L+2]=M>>>16|F<<16|4278190080,g[L+3]=F>>>8|4278190080}for(let y=E*4,M=b.length;y<M;y+=3)g[L++]=b[y]|b[y+1]<<8|b[y+2]<<16|4278190080}else{for(;E<A-2;E+=3,L+=4){const y=p[E],M=p[E+1],F=p[E+2];g[L]=y|255,g[L+1]=y<<24|M>>>8|255,g[L+2]=M<<16|F>>>16|255,g[L+3]=F<<8|255}for(let y=E*4,M=b.length;y<M;y+=3)g[L++]=b[y]<<24|b[y+1]<<16|b[y+2]<<8|255}return{srcPos:_,destPos:L}}function G(b,_){if(n.FeatureTest.isLittleEndian)for(let g=0,L=b.length;g<L;g++)_[g]=b[g]*65793|4278190080;else for(let g=0,L=b.length;g<L;g++)_[g]=b[g]*16843008|255}},(O,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const l=Object.create(null);t.GlobalWorkerOptions=l,l.workerPort=null,l.workerSrc=""},(O,t,l)=>{var b,xn,g,Mn,j,Pe;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=l(1);const u={UNKNOWN:0,DATA:1,ERROR:2},T={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function k(E){switch(E instanceof Error||typeof E=="object"&&E!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new n.AbortException(E.message);case"MissingPDFException":return new n.MissingPDFException(E.message);case"PasswordException":return new n.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new n.UnknownErrorException(E.message,E.details);default:return new n.UnknownErrorException(E.message,E.toString())}}class G{constructor(A,p,y){z(this,b);z(this,g);z(this,j);this.sourceName=A,this.targetName=p,this.comObj=y,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=M=>{const F=M.data;if(F.targetName!==this.sourceName)return;if(F.stream){Y(this,g,Mn).call(this,F);return}if(F.callback){const h=F.callbackId,f=this.callbackCapabilities[h];if(!f)throw new Error(`Cannot resolve callback ${h}`);if(delete this.callbackCapabilities[h],F.callback===u.DATA)f.resolve(F.data);else if(F.callback===u.ERROR)f.reject(k(F.reason));else throw new Error("Unexpected callback case");return}const P=this.actionHandler[F.action];if(!P)throw new Error(`Unknown action from worker: ${F.action}`);if(F.callbackId){const h=this.sourceName,f=F.sourceName;new Promise(function(N){N(P(F.data))}).then(function(N){y.postMessage({sourceName:h,targetName:f,callback:u.DATA,callbackId:F.callbackId,data:N})},function(N){y.postMessage({sourceName:h,targetName:f,callback:u.ERROR,callbackId:F.callbackId,reason:k(N)})});return}if(F.streamId){Y(this,b,xn).call(this,F);return}P(F.data)},y.addEventListener("message",this._onComObjOnMessage)}on(A,p){const y=this.actionHandler;if(y[A])throw new Error(`There is already an actionName called "${A}"`);y[A]=p}send(A,p,y){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,data:p},y)}sendWithPromise(A,p,y){const M=this.callbackId++,F=new n.PromiseCapability;this.callbackCapabilities[M]=F;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,callbackId:M,data:p},y)}catch(P){F.reject(P)}return F.promise}sendWithStream(A,p,y,M){const F=this.streamId++,P=this.sourceName,h=this.targetName,f=this.comObj;return new ReadableStream({start:N=>{const v=new n.PromiseCapability;return this.streamControllers[F]={controller:N,startCall:v,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:P,targetName:h,action:A,streamId:F,data:p,desiredSize:N.desiredSize},M),v.promise},pull:N=>{const v=new n.PromiseCapability;return this.streamControllers[F].pullCall=v,f.postMessage({sourceName:P,targetName:h,stream:T.PULL,streamId:F,desiredSize:N.desiredSize}),v.promise},cancel:N=>{(0,n.assert)(N instanceof Error,"cancel must have a valid reason");const v=new n.PromiseCapability;return this.streamControllers[F].cancelCall=v,this.streamControllers[F].isClosed=!0,f.postMessage({sourceName:P,targetName:h,stream:T.CANCEL,streamId:F,reason:k(N)}),v.promise}},y)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}b=new WeakSet,xn=function(A){const p=A.streamId,y=this.sourceName,M=A.sourceName,F=this.comObj,P=this,h=this.actionHandler[A.action],f={enqueue(N,v=1,o){if(this.isCancelled)return;const I=this.desiredSize;this.desiredSize-=v,I>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),F.postMessage({sourceName:y,targetName:M,stream:T.ENQUEUE,streamId:p,chunk:N},o)},close(){this.isCancelled||(this.isCancelled=!0,F.postMessage({sourceName:y,targetName:M,stream:T.CLOSE,streamId:p}),delete P.streamSinks[p])},error(N){(0,n.assert)(N instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,F.postMessage({sourceName:y,targetName:M,stream:T.ERROR,streamId:p,reason:k(N)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:A.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[p]=f,new Promise(function(N){N(h(A.data,f))}).then(function(){F.postMessage({sourceName:y,targetName:M,stream:T.START_COMPLETE,streamId:p,success:!0})},function(N){F.postMessage({sourceName:y,targetName:M,stream:T.START_COMPLETE,streamId:p,reason:k(N)})})},g=new WeakSet,Mn=function(A){const p=A.streamId,y=this.sourceName,M=A.sourceName,F=this.comObj,P=this.streamControllers[p],h=this.streamSinks[p];switch(A.stream){case T.START_COMPLETE:A.success?P.startCall.resolve():P.startCall.reject(k(A.reason));break;case T.PULL_COMPLETE:A.success?P.pullCall.resolve():P.pullCall.reject(k(A.reason));break;case T.PULL:if(!h){F.postMessage({sourceName:y,targetName:M,stream:T.PULL_COMPLETE,streamId:p,success:!0});break}h.desiredSize<=0&&A.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=A.desiredSize,new Promise(function(f){var N;f((N=h.onPull)==null?void 0:N.call(h))}).then(function(){F.postMessage({sourceName:y,targetName:M,stream:T.PULL_COMPLETE,streamId:p,success:!0})},function(f){F.postMessage({sourceName:y,targetName:M,stream:T.PULL_COMPLETE,streamId:p,reason:k(f)})});break;case T.ENQUEUE:if((0,n.assert)(P,"enqueue should have stream controller"),P.isClosed)break;P.controller.enqueue(A.chunk);break;case T.CLOSE:if((0,n.assert)(P,"close should have stream controller"),P.isClosed)break;P.isClosed=!0,P.controller.close(),Y(this,j,Pe).call(this,P,p);break;case T.ERROR:(0,n.assert)(P,"error should have stream controller"),P.controller.error(k(A.reason)),Y(this,j,Pe).call(this,P,p);break;case T.CANCEL_COMPLETE:A.success?P.cancelCall.resolve():P.cancelCall.reject(k(A.reason)),Y(this,j,Pe).call(this,P,p);break;case T.CANCEL:if(!h)break;new Promise(function(f){var N;f((N=h.onCancel)==null?void 0:N.call(h,k(A.reason)))}).then(function(){F.postMessage({sourceName:y,targetName:M,stream:T.CANCEL_COMPLETE,streamId:p,success:!0})},function(f){F.postMessage({sourceName:y,targetName:M,stream:T.CANCEL_COMPLETE,streamId:p,reason:k(f)})}),h.sinkCapability.reject(k(A.reason)),h.isCancelled=!0,delete this.streamSinks[p];break;default:throw new Error("Unexpected stream case")}},j=new WeakSet,Pe=async function(A,p){var y,M,F;await Promise.allSettled([(y=A.startCall)==null?void 0:y.promise,(M=A.pullCall)==null?void 0:M.promise,(F=A.cancelCall)==null?void 0:F.promise]),delete this.streamControllers[p]},t.MessageHandler=G},(O,t,l)=>{var T,k;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=l(1);class u{constructor({parsedData:b,rawData:_}){z(this,T,void 0);z(this,k,void 0);st(this,T,b),st(this,k,_)}getRaw(){return e(this,k)}get(b){return e(this,T).get(b)??null}getAll(){return(0,n.objectFromMap)(e(this,T))}has(b){return e(this,T).has(b)}}T=new WeakMap,k=new WeakMap,t.Metadata=u},(O,t,l)=>{var b,_,g,L,j,x,tn;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=l(1),u=l(8);const T=Symbol("INTERNAL");class k{constructor(p,y){z(this,b,!0);this.name=p,this.intent=y}get visible(){return e(this,b)}_setVisible(p,y){p!==T&&(0,n.unreachable)("Internal method `_setVisible` called."),st(this,b,y)}}b=new WeakMap;class G{constructor(p){z(this,x);z(this,_,null);z(this,g,new Map);z(this,L,null);z(this,j,null);if(this.name=null,this.creator=null,p!==null){this.name=p.name,this.creator=p.creator,st(this,j,p.order);for(const y of p.groups)e(this,g).set(y.id,new k(y.name,y.intent));if(p.baseState==="OFF")for(const y of e(this,g).values())y._setVisible(T,!1);for(const y of p.on)e(this,g).get(y)._setVisible(T,!0);for(const y of p.off)e(this,g).get(y)._setVisible(T,!1);st(this,L,this.getHash())}}isVisible(p){if(e(this,g).size===0)return!0;if(!p)return(0,n.warn)("Optional content group not defined."),!0;if(p.type==="OCG")return e(this,g).has(p.id)?e(this,g).get(p.id).visible:((0,n.warn)(`Optional content group not found: ${p.id}`),!0);if(p.type==="OCMD"){if(p.expression)return Y(this,x,tn).call(this,p.expression);if(!p.policy||p.policy==="AnyOn"){for(const y of p.ids){if(!e(this,g).has(y))return(0,n.warn)(`Optional content group not found: ${y}`),!0;if(e(this,g).get(y).visible)return!0}return!1}else if(p.policy==="AllOn"){for(const y of p.ids){if(!e(this,g).has(y))return(0,n.warn)(`Optional content group not found: ${y}`),!0;if(!e(this,g).get(y).visible)return!1}return!0}else if(p.policy==="AnyOff"){for(const y of p.ids){if(!e(this,g).has(y))return(0,n.warn)(`Optional content group not found: ${y}`),!0;if(!e(this,g).get(y).visible)return!0}return!1}else if(p.policy==="AllOff"){for(const y of p.ids){if(!e(this,g).has(y))return(0,n.warn)(`Optional content group not found: ${y}`),!0;if(e(this,g).get(y).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${p.policy}.`),!0}return(0,n.warn)(`Unknown group type ${p.type}.`),!0}setVisibility(p,y=!0){if(!e(this,g).has(p)){(0,n.warn)(`Optional content group not found: ${p}`);return}e(this,g).get(p)._setVisible(T,!!y),st(this,_,null)}get hasInitialVisibility(){return e(this,L)===null||this.getHash()===e(this,L)}getOrder(){return e(this,g).size?e(this,j)?e(this,j).slice():[...e(this,g).keys()]:null}getGroups(){return e(this,g).size>0?(0,n.objectFromMap)(e(this,g)):null}getGroup(p){return e(this,g).get(p)||null}getHash(){if(e(this,_)!==null)return e(this,_);const p=new u.MurmurHash3_64;for(const[y,M]of e(this,g))p.update(`${y}:${M.visible}`);return st(this,_,p.hexdigest())}}_=new WeakMap,g=new WeakMap,L=new WeakMap,j=new WeakMap,x=new WeakSet,tn=function(p){const y=p.length;if(y<2)return!0;const M=p[0];for(let F=1;F<y;F++){const P=p[F];let h;if(Array.isArray(P))h=Y(this,x,tn).call(this,P);else if(e(this,g).has(P))h=e(this,g).get(P).visible;else return(0,n.warn)(`Optional content group not found: ${P}`),!0;switch(M){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return M==="And"},t.OptionalContentConfig=G},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=l(1),u=l(6);class T{constructor({length:_,initialData:g,progressiveDone:L=!1,contentDispositionFilename:j=null,disableRange:x=!1,disableStream:E=!1},A){if((0,n.assert)(A,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=L,this._contentDispositionFilename=j,(g==null?void 0:g.length)>0){const p=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=A,this._isStreamingSupported=!E,this._isRangeSupported=!x,this._contentLength=_,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((p,y)=>{this._onReceiveData({begin:p,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((p,y)=>{this._onProgress({loaded:p,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:_,chunk:g}){const L=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;if(_===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(L):this._queuedChunks.push(L);else{const j=this._rangeReaders.some(function(x){return x._begin!==_?!1:(x._enqueue(L),!0)});(0,n.assert)(j,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var _;return((_=this._fullRequestReader)==null?void 0:_._loaded)??0}_onProgress(_){var g,L,j,x;_.total===void 0?(L=(g=this._rangeReaders[0])==null?void 0:g.onProgress)==null||L.call(g,{loaded:_.loaded}):(x=(j=this._fullRequestReader)==null?void 0:j.onProgress)==null||x.call(j,{loaded:_.loaded,total:_.total})}_onProgressiveDone(){var _;(_=this._fullRequestReader)==null||_.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(_){const g=this._rangeReaders.indexOf(_);g>=0&&this._rangeReaders.splice(g,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const _=this._queuedChunks;return this._queuedChunks=null,new k(this,_,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(_,g){if(g<=this._progressiveDataLength)return null;const L=new G(this,_,g);return this._pdfDataRangeTransport.requestDataRange(_,g),this._rangeReaders.push(L),L}cancelAllRequests(_){var g;(g=this._fullRequestReader)==null||g.cancel(_);for(const L of this._rangeReaders.slice(0))L.cancel(_);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=T;class k{constructor(_,g,L=!1,j=null){this._stream=_,this._done=L||!1,this._filename=(0,u.isPdfFile)(j)?j:null,this._queuedChunks=g||[],this._loaded=0;for(const x of this._queuedChunks)this._loaded+=x.byteLength;this._requests=[],this._headersReady=Promise.resolve(),_._fullRequestReader=this,this.onProgress=null}_enqueue(_){this._done||(this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunks.push(_),this._loaded+=_.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new n.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class G{constructor(_,g,L){this._stream=_,this._begin=g,this._end=L,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(_){if(!this._done){if(this._requests.length===0)this._queuedChunk=_;else{this._requests.shift().resolve({value:_,done:!1});for(const L of this._requests)L.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new n.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=l(1),u=l(20);function T(L,j,x){return{method:"GET",headers:L,signal:x.signal,mode:"cors",credentials:j?"include":"same-origin",redirect:"follow"}}function k(L){const j=new Headers;for(const x in L){const E=L[x];E!==void 0&&j.append(x,E)}return j}function G(L){return L instanceof Uint8Array?L.buffer:L instanceof ArrayBuffer?L:((0,n.warn)(`getArrayBuffer - unexpected data format: ${L}`),new Uint8Array(L).buffer)}class b{constructor(j){this.source=j,this.isHttp=/^https?:/i.test(j.url),this.httpHeaders=this.isHttp&&j.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var j;return((j=this._fullRequestReader)==null?void 0:j._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _(this),this._fullRequestReader}getRangeReader(j,x){if(x<=this._progressiveDataLength)return null;const E=new g(this,j,x);return this._rangeRequestReaders.push(E),E}cancelAllRequests(j){var x;(x=this._fullRequestReader)==null||x.cancel(j);for(const E of this._rangeRequestReaders.slice(0))E.cancel(j)}}t.PDFFetchStream=b;class _{constructor(j){this._stream=j,this._reader=null,this._loaded=0,this._filename=null;const x=j.source;this._withCredentials=x.withCredentials||!1,this._contentLength=x.length,this._headersCapability=new n.PromiseCapability,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._headers=k(this._stream.httpHeaders);const E=x.url;fetch(E,T(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,u.validateResponseStatus)(A.status))throw(0,u.createResponseStatusError)(A.status,E);this._reader=A.body.getReader(),this._headersCapability.resolve();const p=F=>A.headers.get(F),{allowRangeRequests:y,suggestedLength:M}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=M||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;await this._headersCapability.promise;const{value:j,done:x}=await this._reader.read();return x?{value:j,done:x}:(this._loaded+=j.byteLength,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded,total:this._contentLength}),{value:G(j),done:!1})}cancel(j){var x;(x=this._reader)==null||x.cancel(j),this._abortController.abort()}}class g{constructor(j,x,E){this._stream=j,this._reader=null,this._loaded=0;const A=j.source;this._withCredentials=A.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!A.disableStream,this._abortController=new AbortController,this._headers=k(this._stream.httpHeaders),this._headers.append("Range",`bytes=${x}-${E-1}`);const p=A.url;fetch(p,T(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,u.validateResponseStatus)(y.status))throw(0,u.createResponseStatusError)(y.status,p);this._readCapability.resolve(),this._reader=y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;await this._readCapability.promise;const{value:j,done:x}=await this._reader.read();return x?{value:j,done:x}:(this._loaded+=j.byteLength,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded}),{value:G(j),done:!1})}cancel(j){var x;(x=this._reader)==null||x.cancel(j),this._abortController.abort()}}},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=b,t.extractFilenameFromHeader=G,t.validateRangeRequestCapabilities=k,t.validateResponseStatus=_;var n=l(1),u=l(21),T=l(6);function k({getResponseHeader:g,isHttp:L,rangeChunkSize:j,disableRange:x}){const E={allowRangeRequests:!1,suggestedLength:void 0},A=parseInt(g("Content-Length"),10);return!Number.isInteger(A)||(E.suggestedLength=A,A<=2*j)||x||!L||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(E.allowRangeRequests=!0),E}function G(g){const L=g("Content-Disposition");if(L){let j=(0,u.getFilenameFromContentDispositionHeader)(L);if(j.includes("%"))try{j=decodeURIComponent(j)}catch{}if((0,T.isPdfFile)(j))return j}return null}function b(g,L){return g===404||g===0&&L.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+L+'".'):new n.UnexpectedResponseException(`Unexpected server response (${g}) while retrieving PDF "${L}".`,g)}function _(g){return g===200||g===206}},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=u;var n=l(1);function u(T){let k=!0,G=b("filename\\*","i").exec(T);if(G){G=G[1];let A=j(G);return A=unescape(A),A=x(A),A=E(A),g(A)}if(G=L(T),G){const A=E(G);return g(A)}if(G=b("filename","i").exec(T),G){G=G[1];let A=j(G);return A=E(A),g(A)}function b(A,p){return new RegExp("(?:^|;)\\s*"+A+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function _(A,p){if(A){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const y=new TextDecoder(A,{fatal:!0}),M=(0,n.stringToBytes)(p);p=y.decode(M),k=!1}catch{}}return p}function g(A){return k&&/[\x80-\xff]/.test(A)&&(A=_("utf-8",A),k&&(A=_("iso-8859-1",A))),A}function L(A){const p=[];let y;const M=b("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=M.exec(A))!==null;){let[,P,h,f]=y;if(P=parseInt(P,10),P in p){if(P===0)break;continue}p[P]=[h,f]}const F=[];for(let P=0;P<p.length&&P in p;++P){let[h,f]=p[P];f=j(f),h&&(f=unescape(f),P===0&&(f=x(f))),F.push(f)}return F.join("")}function j(A){if(A.startsWith('"')){const p=A.slice(1).split('\\"');for(let y=0;y<p.length;++y){const M=p[y].indexOf('"');M!==-1&&(p[y]=p[y].slice(0,M),p.length=y+1),p[y]=p[y].replaceAll(/\\(.)/g,"$1")}A=p.join('"')}return A}function x(A){const p=A.indexOf("'");if(p===-1)return A;const y=A.slice(0,p),F=A.slice(p+1).replace(/^[^']*'/,"");return _(y,F)}function E(A){return!A.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(A)?A:A.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,y,M,F){if(M==="q"||M==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(P,h){return String.fromCharCode(parseInt(h,16))}),_(y,F);try{F=atob(F)}catch{}return _(y,F)})}return""}},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=l(1),u=l(20);const T=200,k=206;function G(j){const x=j.response;return typeof x!="string"?x:(0,n.stringToBytes)(x).buffer}class b{constructor(x,E={}){this.url=x,this.isHttp=/^https?:/i.test(x),this.httpHeaders=this.isHttp&&E.httpHeaders||Object.create(null),this.withCredentials=E.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(x,E,A){const p={begin:x,end:E};for(const y in A)p[y]=A[y];return this.request(p)}requestFull(x){return this.request(x)}request(x){const E=new XMLHttpRequest,A=this.currXhrId++,p=this.pendingRequests[A]={xhr:E};E.open("GET",this.url),E.withCredentials=this.withCredentials;for(const y in this.httpHeaders){const M=this.httpHeaders[y];M!==void 0&&E.setRequestHeader(y,M)}return this.isHttp&&"begin"in x&&"end"in x?(E.setRequestHeader("Range",`bytes=${x.begin}-${x.end-1}`),p.expectedStatus=k):p.expectedStatus=T,E.responseType="arraybuffer",x.onError&&(E.onerror=function(y){x.onError(E.status)}),E.onreadystatechange=this.onStateChange.bind(this,A),E.onprogress=this.onProgress.bind(this,A),p.onHeadersReceived=x.onHeadersReceived,p.onDone=x.onDone,p.onError=x.onError,p.onProgress=x.onProgress,E.send(null),A}onProgress(x,E){var p;const A=this.pendingRequests[x];A&&((p=A.onProgress)==null||p.call(A,E))}onStateChange(x,E){var P,h,f;const A=this.pendingRequests[x];if(!A)return;const p=A.xhr;if(p.readyState>=2&&A.onHeadersReceived&&(A.onHeadersReceived(),delete A.onHeadersReceived),p.readyState!==4||!(x in this.pendingRequests))return;if(delete this.pendingRequests[x],p.status===0&&this.isHttp){(P=A.onError)==null||P.call(A,p.status);return}const y=p.status||T;if(!(y===T&&A.expectedStatus===k)&&y!==A.expectedStatus){(h=A.onError)==null||h.call(A,p.status);return}const F=G(p);if(y===k){const N=p.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(N);A.onDone({begin:parseInt(v[1],10),chunk:F})}else F?A.onDone({begin:0,chunk:F}):(f=A.onError)==null||f.call(A,p.status)}getRequestXhr(x){return this.pendingRequests[x].xhr}isPendingRequest(x){return x in this.pendingRequests}abortRequest(x){const E=this.pendingRequests[x].xhr;delete this.pendingRequests[x],E.abort()}}class _{constructor(x){this._source=x,this._manager=new b(x.url,{httpHeaders:x.httpHeaders,withCredentials:x.withCredentials}),this._rangeChunkSize=x.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(x){const E=this._rangeRequestReaders.indexOf(x);E>=0&&this._rangeRequestReaders.splice(E,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}getRangeReader(x,E){const A=new L(this._manager,x,E);return A.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(A),A}cancelAllRequests(x){var E;(E=this._fullRequestReader)==null||E.cancel(x);for(const A of this._rangeRequestReaders.slice(0))A.cancel(x)}}t.PDFNetworkStream=_;class g{constructor(x,E){this._manager=x;const A={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._fullRequestId=x.requestFull(A),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=E.disableRange||!1,this._contentLength=E.length,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const x=this._fullRequestId,E=this._manager.getRequestXhr(x),A=M=>E.getResponseHeader(M),{allowRangeRequests:p,suggestedLength:y}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});p&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(A),this._isRangeSupported&&this._manager.abortRequest(x),this._headersReceivedCapability.resolve()}_onDone(x){if(x&&(this._requests.length>0?this._requests.shift().resolve({value:x.chunk,done:!1}):this._cachedChunks.push(x.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(x){this._storedError=(0,u.createResponseStatusError)(x,this._url),this._headersReceivedCapability.reject(this._storedError);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(x){var E;(E=this.onProgress)==null||E.call(this,{loaded:x.loaded,total:x.lengthComputable?x.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=new n.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._headersReceivedCapability.reject(x);for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L{constructor(x,E,A){this._manager=x;const p={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._requestId=x.requestRange(E,A,p),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var x;(x=this.onClosed)==null||x.call(this,this)}_onDone(x){const E=x.chunk;this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunk=E,this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(x){this._storedError=(0,u.createResponseStatusError)(x,this._url);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(x){var E;this.isStreamingSupported||(E=this.onProgress)==null||E.call(this,{loaded:x.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const E=this._queuedChunk;return this._queuedChunk=null,{value:E,done:!1}}if(this._done)return{value:void 0,done:!0};const x=new n.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=l(1),u=l(20);const T=/^file:\/\/\/[a-zA-Z]:\//;function k(A){const p=require$$5,y=p.parse(A);return y.protocol==="file:"||y.host?y:/^[a-z]:[/\\]/i.test(A)?p.parse(`file:///${A}`):(y.host||(y.protocol="file:"),y)}class G{constructor(p){this.source=p,this.url=k(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new x(this):new L(this),this._fullRequestReader}getRangeReader(p,y){if(y<=this._progressiveDataLength)return null;const M=this.isFsUrl?new E(this,p,y):new j(this,p,y);return this._rangeRequestReaders.push(M),M}cancelAllRequests(p){var y;(y=this._fullRequestReader)==null||y.cancel(p);for(const M of this._rangeRequestReaders.slice(0))M.cancel(p)}}t.PDFNodeStream=G;class b{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const y=p.source;this._contentLength=y.length,this._loaded=0,this._filename=null,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var M;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=p.length,(M=this.onProgress)==null||M.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",y=>{this._error(y)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const y=p.source;this._isStreamingSupported=!y.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var M;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=p.length,(M=this.onProgress)==null||M.call(this,{loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",y=>{this._error(y)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(A,p){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:p}}class L extends b{constructor(p){super(p);const y=M=>{if(M.statusCode===404){const f=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f,this._headersCapability.reject(f);return}this._headersCapability.resolve(),this._setReadableStream(M);const F=f=>this._readableStream.headers[f.toLowerCase()],{allowRangeRequests:P,suggestedLength:h}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:F,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=h||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(F)};if(this._request=null,this._url.protocol==="http:"){const M=require$$5;this._request=M.request(g(this._url,p.httpHeaders),y)}else{const M=require$$5;this._request=M.request(g(this._url,p.httpHeaders),y)}this._request.on("error",M=>{this._storedError=M,this._headersCapability.reject(M)}),this._request.end()}}class j extends _{constructor(p,y,M){super(p),this._httpHeaders={};for(const P in p.httpHeaders){const h=p.httpHeaders[P];h!==void 0&&(this._httpHeaders[P]=h)}this._httpHeaders.Range=`bytes=${y}-${M-1}`;const F=P=>{if(P.statusCode===404){const h=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=h;return}this._setReadableStream(P)};if(this._request=null,this._url.protocol==="http:"){const P=require$$5;this._request=P.request(g(this._url,this._httpHeaders),F)}else{const P=require$$5;this._request=P.request(g(this._url,this._httpHeaders),F)}this._request.on("error",P=>{this._storedError=P}),this._request.end()}}class x extends b{constructor(p){super(p);let y=decodeURIComponent(this._url.path);T.test(this._url.href)&&(y=y.replace(/^\//,""));const M=require$$5;M.lstat(y,(F,P)=>{if(F){F.code==="ENOENT"&&(F=new n.MissingPDFException(`Missing PDF "${y}".`)),this._storedError=F,this._headersCapability.reject(F);return}this._contentLength=P.size,this._setReadableStream(M.createReadStream(y)),this._headersCapability.resolve()})}}class E extends _{constructor(p,y,M){super(p);let F=decodeURIComponent(this._url.path);T.test(this._url.href)&&(F=F.replace(/^\//,""));const P=require$$5;this._setReadableStream(P.createReadStream(F,{start:y,end:M-1}))}}},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=l(6),u=l(1);const T={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},k="http://www.w3.org/XML/1998/namespace",G="http://www.w3.org/1999/xlink",b=["butt","round","square"],_=["miter","round","bevel"],g=function(P,h="",f=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!f)return URL.createObjectURL(new Blob([P],{type:h}));const N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let v=`data:${h};base64,`;for(let o=0,I=P.length;o<I;o+=3){const w=P[o]&255,V=P[o+1]&255,$=P[o+2]&255,R=w>>2,K=(w&3)<<4|V>>4,rt=o+1<I?(V&15)<<2|$>>6:64,lt=o+2<I?$&63:64;v+=N[R]+N[K]+N[rt]+N[lt]}return v},L=function(){const P=new Uint8Array([137,80,78,71,13,10,26,10]),h=12,f=new Int32Array(256);for(let $=0;$<256;$++){let R=$;for(let K=0;K<8;K++)R=R&1?3988292384^R>>1&2147483647:R>>1&2147483647;f[$]=R}function N($,R,K){let rt=-1;for(let lt=R;lt<K;lt++){const X=(rt^$[lt])&255,ct=f[X];rt=rt>>>8^ct}return rt^-1}function v($,R,K,rt){let lt=rt;const X=R.length;K[lt]=X>>24&255,K[lt+1]=X>>16&255,K[lt+2]=X>>8&255,K[lt+3]=X&255,lt+=4,K[lt]=$.charCodeAt(0)&255,K[lt+1]=$.charCodeAt(1)&255,K[lt+2]=$.charCodeAt(2)&255,K[lt+3]=$.charCodeAt(3)&255,lt+=4,K.set(R,lt),lt+=R.length;const ct=N(K,rt+4,lt);K[lt]=ct>>24&255,K[lt+1]=ct>>16&255,K[lt+2]=ct>>8&255,K[lt+3]=ct&255}function o($,R,K){let rt=1,lt=0;for(let X=R;X<K;++X)rt=(rt+($[X]&255))%65521,lt=(lt+rt)%65521;return lt<<16|rt}function I($){if(!u.isNodeJS)return w($);try{const R=parseInt(process.versions.node)>=8?$:Buffer.from($),K=require$$5.deflateSync(R,{level:9});return K instanceof Uint8Array?K:new Uint8Array(K)}catch(R){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+R)}return w($)}function w($){let R=$.length;const K=65535,rt=Math.ceil(R/K),lt=new Uint8Array(2+R+rt*5+4);let X=0;lt[X++]=120,lt[X++]=156;let ct=0;for(;R>K;)lt[X++]=0,lt[X++]=255,lt[X++]=255,lt[X++]=0,lt[X++]=0,lt.set($.subarray(ct,ct+K),X),X+=K,ct+=K,R-=K;lt[X++]=1,lt[X++]=R&255,lt[X++]=R>>8&255,lt[X++]=~R&65535&255,lt[X++]=(~R&65535)>>8&255,lt.set($.subarray(ct),X),X+=$.length-ct;const pt=o($,0,$.length);return lt[X++]=pt>>24&255,lt[X++]=pt>>16&255,lt[X++]=pt>>8&255,lt[X++]=pt&255,lt}function V($,R,K,rt){const lt=$.width,X=$.height;let ct,pt,Et;const yt=$.data;switch(R){case u.ImageKind.GRAYSCALE_1BPP:pt=0,ct=1,Et=lt+7>>3;break;case u.ImageKind.RGB_24BPP:pt=2,ct=8,Et=lt*3;break;case u.ImageKind.RGBA_32BPP:pt=6,ct=8,Et=lt*4;break;default:throw new Error("invalid format")}const C=new Uint8Array((1+Et)*X);let s=0,a=0;for(let W=0;W<X;++W)C[s++]=0,C.set(yt.subarray(a,a+Et),s),a+=Et,s+=Et;if(R===u.ImageKind.GRAYSCALE_1BPP&&rt){s=0;for(let W=0;W<X;W++){s++;for(let tt=0;tt<Et;tt++)C[s++]^=255}}const r=new Uint8Array([lt>>24&255,lt>>16&255,lt>>8&255,lt&255,X>>24&255,X>>16&255,X>>8&255,X&255,ct,pt,0,0,0]),c=I(C),d=P.length+h*3+r.length+c.length,m=new Uint8Array(d);let D=0;return m.set(P,D),D+=P.length,v("IHDR",r,m,D),D+=h+r.length,v("IDATA",c,m,D),D+=h+c.length,v("IEND",new Uint8Array(0),m,D),g(m,"image/png",K)}return function(R,K,rt){const lt=R.kind===void 0?u.ImageKind.GRAYSCALE_1BPP:R.kind;return V(R,lt,K,rt)}}();class j{constructor(){this.fontSizeScale=1,this.fontWeight=T.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=T.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(h,f){this.x=h,this.y=f}}function x(P){let h=[];const f=[];for(const N of P){if(N.fn==="save"){h.push({fnId:92,fn:"group",items:[]}),f.push(h),h=h.at(-1).items;continue}N.fn==="restore"?h=f.pop():h.push(N)}return h}function E(P){if(Number.isInteger(P))return P.toString();const h=P.toFixed(10);let f=h.length-1;if(h[f]!=="0")return h;do f--;while(h[f]==="0");return h.substring(0,h[f]==="."?f:f+1)}function A(P){if(P[4]===0&&P[5]===0){if(P[1]===0&&P[2]===0)return P[0]===1&&P[3]===1?"":`scale(${E(P[0])} ${E(P[3])})`;if(P[0]===P[3]&&P[1]===-P[2]){const h=Math.acos(P[0])*180/Math.PI;return`rotate(${E(h)})`}}else if(P[0]===1&&P[1]===0&&P[2]===0&&P[3]===1)return`translate(${E(P[4])} ${E(P[5])})`;return`matrix(${E(P[0])} ${E(P[1])} ${E(P[2])} ${E(P[3])} ${E(P[4])} ${E(P[5])})`}let p=0,y=0,M=0;class F{constructor(h,f,N=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new j,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=h,this.objs=f,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!N,this._operatorIdMapping=[];for(const v in u.OPS)this._operatorIdMapping[u.OPS[v]]=v}getObject(h,f=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):f}save(){this.transformStack.push(this.transformMatrix);const h=this.current;this.extraStack.push(h),this.current=h.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(h){this.save(),this.executeOpTree(h),this.restore()}loadDependencies(h){const f=h.fnArray,N=h.argsArray;for(let v=0,o=f.length;v<o;v++)if(f[v]===u.OPS.dependency)for(const I of N[v]){const w=I.startsWith("g_")?this.commonObjs:this.objs,V=new Promise($=>{w.get(I,$)});this.current.dependencies.push(V)}return Promise.all(this.current.dependencies)}transform(h,f,N,v,o,I){const w=[h,f,N,v,o,I];this.transformMatrix=u.Util.transform(this.transformMatrix,w),this.tgrp=null}getSVG(h,f){this.viewport=f;const N=this._initialize(f);return this.loadDependencies(h).then(()=>(this.transformMatrix=u.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(h)),N))}convertOpList(h){const f=this._operatorIdMapping,N=h.argsArray,v=h.fnArray,o=[];for(let I=0,w=v.length;I<w;I++){const V=v[I];o.push({fnId:V,fn:f[V],args:N[I]})}return x(o)}executeOpTree(h){for(const f of h){const N=f.fn,v=f.fnId,o=f.args;switch(v|0){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(o);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(o[0],o[1]);break;case u.OPS.setFont:this.setFont(o);break;case u.OPS.showText:this.showText(o[0]);break;case u.OPS.showSpacedText:this.showText(o[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(o[0],o[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(o[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(o[0]);break;case u.OPS.setHScale:this.setHScale(o[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(o[0],o[1],o[2],o[3],o[4],o[5]);break;case u.OPS.setTextRise:this.setTextRise(o[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(o[0]);break;case u.OPS.setLineWidth:this.setLineWidth(o[0]);break;case u.OPS.setLineJoin:this.setLineJoin(o[0]);break;case u.OPS.setLineCap:this.setLineCap(o[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(o[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(o[0],o[1],o[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(o[0],o[1],o[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(o);break;case u.OPS.setFillColorN:this.setFillColorN(o);break;case u.OPS.shadingFill:this.shadingFill(o[0]);break;case u.OPS.setDash:this.setDash(o[0],o[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(o[0]);break;case u.OPS.setFlatness:this.setFlatness(o[0]);break;case u.OPS.setGState:this.setGState(o[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(o[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(o[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(o[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(o[0],o[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(o[0],o[1],o[2],o[3],o[4],o[5]);break;case u.OPS.constructPath:this.constructPath(o[0],o[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group(f.items);break;default:(0,u.warn)(`Unimplemented operator ${N}`);break}}}setWordSpacing(h){this.current.wordSpacing=h}setCharSpacing(h){this.current.charSpacing=h}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(h,f,N,v,o,I){const w=this.current;w.textMatrix=w.lineMatrix=[h,f,N,v,o,I],w.textMatrixScale=Math.hypot(h,f),w.x=w.lineX=0,w.y=w.lineY=0,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${E(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",E(-w.y)),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtElement.append(w.tspan)}beginText(){const h=this.current;h.x=h.lineX=0,h.y=h.lineY=0,h.textMatrix=u.IDENTITY_MATRIX,h.lineMatrix=u.IDENTITY_MATRIX,h.textMatrixScale=1,h.tspan=this.svgFactory.createElement("svg:tspan"),h.txtElement=this.svgFactory.createElement("svg:text"),h.txtgrp=this.svgFactory.createElement("svg:g"),h.xcoords=[],h.ycoords=[]}moveText(h,f){const N=this.current;N.x=N.lineX+=h,N.y=N.lineY+=f,N.xcoords=[],N.ycoords=[],N.tspan=this.svgFactory.createElement("svg:tspan"),N.tspan.setAttributeNS(null,"font-family",N.fontFamily),N.tspan.setAttributeNS(null,"font-size",`${E(N.fontSize)}px`),N.tspan.setAttributeNS(null,"y",E(-N.y))}showText(h){const f=this.current,N=f.font,v=f.fontSize;if(v===0)return;const o=f.fontSizeScale,I=f.charSpacing,w=f.wordSpacing,V=f.fontDirection,$=f.textHScale*V,R=N.vertical,K=R?1:-1,rt=N.defaultVMetrics,lt=v*f.fontMatrix[0];let X=0;for(const Et of h){if(Et===null){X+=V*w;continue}else if(typeof Et=="number"){X+=K*Et*v/1e3;continue}const yt=(Et.isSpace?w:0)+I,C=Et.fontChar;let s,a,r=Et.width;if(R){let d;const m=Et.vmetric||rt;d=Et.vmetric?m[1]:r*.5,d=-d*lt;const D=m[2]*lt;r=m?-m[0]:r,s=d/o,a=(X+D)/o}else s=X/o,a=0;(Et.isInFont||N.missingFile)&&(f.xcoords.push(f.x+s),R&&f.ycoords.push(-f.y+a),f.tspan.textContent+=C);const c=R?r*lt-yt*V:r*lt+yt*V;X+=c}f.tspan.setAttributeNS(null,"x",f.xcoords.map(E).join(" ")),R?f.tspan.setAttributeNS(null,"y",f.ycoords.map(E).join(" ")):f.tspan.setAttributeNS(null,"y",E(-f.y)),R?f.y-=X:f.x+=X*$,f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${E(f.fontSize)}px`),f.fontStyle!==T.fontStyle&&f.tspan.setAttributeNS(null,"font-style",f.fontStyle),f.fontWeight!==T.fontWeight&&f.tspan.setAttributeNS(null,"font-weight",f.fontWeight);const ct=f.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(ct===u.TextRenderingMode.FILL||ct===u.TextRenderingMode.FILL_STROKE?(f.fillColor!==T.fillColor&&f.tspan.setAttributeNS(null,"fill",f.fillColor),f.fillAlpha<1&&f.tspan.setAttributeNS(null,"fill-opacity",f.fillAlpha)):f.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?f.tspan.setAttributeNS(null,"fill","transparent"):f.tspan.setAttributeNS(null,"fill","none"),ct===u.TextRenderingMode.STROKE||ct===u.TextRenderingMode.FILL_STROKE){const Et=1/(f.textMatrixScale||1);this._setStrokeAttributes(f.tspan,Et)}let pt=f.textMatrix;f.textRise!==0&&(pt=pt.slice(),pt[5]+=f.textRise),f.txtElement.setAttributeNS(null,"transform",`${A(pt)} scale(${E($)}, -1)`),f.txtElement.setAttributeNS(k,"xml:space","preserve"),f.txtElement.append(f.tspan),f.txtgrp.append(f.txtElement),this._ensureTransformGroup().append(f.txtElement)}setLeadingMoveText(h,f){this.setLeading(-f),this.moveText(h,f)}addFontStyle(h){if(!h.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const f=g(h.data,h.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${h.loadedName}"; src: url(${f}); }
`}setFont(h){const f=this.current,N=this.commonObjs.get(h[0]);let v=h[1];f.font=N,this.embedFonts&&!N.missingFile&&!this.embeddedFonts[N.loadedName]&&(this.addFontStyle(N),this.embeddedFonts[N.loadedName]=N),f.fontMatrix=N.fontMatrix||u.FONT_IDENTITY_MATRIX;let o="normal";N.black?o="900":N.bold&&(o="bold");const I=N.italic?"italic":"normal";v<0?(v=-v,f.fontDirection=-1):f.fontDirection=1,f.fontSize=v,f.fontFamily=N.loadedName,f.fontWeight=o,f.fontStyle=I,f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"y",E(-f.y)),f.xcoords=[],f.ycoords=[]}endText(){var f;const h=this.current;h.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&((f=h.txtElement)!=null&&f.hasChildNodes())&&(h.element=h.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(h){h>0&&(this.current.lineWidth=h)}setLineCap(h){this.current.lineCap=b[h]}setLineJoin(h){this.current.lineJoin=_[h]}setMiterLimit(h){this.current.miterLimit=h}setStrokeAlpha(h){this.current.strokeAlpha=h}setStrokeRGBColor(h,f,N){this.current.strokeColor=u.Util.makeHexColor(h,f,N)}setFillAlpha(h){this.current.fillAlpha=h}setFillRGBColor(h,f,N){this.current.fillColor=u.Util.makeHexColor(h,f,N),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(h){this.current.strokeColor=this._makeColorN_Pattern(h)}setFillColorN(h){this.current.fillColor=this._makeColorN_Pattern(h)}shadingFill(h){const{width:f,height:N}=this.viewport,v=u.Util.inverseTransform(this.transformMatrix),[o,I,w,V]=u.Util.getAxialAlignedBoundingBox([0,0,f,N],v),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",o),$.setAttributeNS(null,"y",I),$.setAttributeNS(null,"width",w-o),$.setAttributeNS(null,"height",V-I),$.setAttributeNS(null,"fill",this._makeShadingPattern(h)),this.current.fillAlpha<1&&$.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($)}_makeColorN_Pattern(h){return h[0]==="TilingPattern"?this._makeTilingPattern(h):this._makeShadingPattern(h)}_makeTilingPattern(h){const f=h[1],N=h[2],v=h[3]||u.IDENTITY_MATRIX,[o,I,w,V]=h[4],$=h[5],R=h[6],K=h[7],rt=`shading${M++}`,[lt,X,ct,pt]=u.Util.normalizeRect([...u.Util.applyTransform([o,I],v),...u.Util.applyTransform([w,V],v)]),[Et,yt]=u.Util.singularValueDecompose2dScale(v),C=$*Et,s=R*yt,a=this.svgFactory.createElement("svg:pattern");a.setAttributeNS(null,"id",rt),a.setAttributeNS(null,"patternUnits","userSpaceOnUse"),a.setAttributeNS(null,"width",C),a.setAttributeNS(null,"height",s),a.setAttributeNS(null,"x",`${lt}`),a.setAttributeNS(null,"y",`${X}`);const r=this.svg,c=this.transformMatrix,d=this.current.fillColor,m=this.current.strokeColor,D=this.svgFactory.create(ct-lt,pt-X);if(this.svg=D,this.transformMatrix=v,K===2){const W=u.Util.makeHexColor(...f);this.current.fillColor=W,this.current.strokeColor=W}return this.executeOpTree(this.convertOpList(N)),this.svg=r,this.transformMatrix=c,this.current.fillColor=d,this.current.strokeColor=m,a.append(D.childNodes[0]),this.defs.append(a),`url(#${rt})`}_makeShadingPattern(h){switch(typeof h=="string"&&(h=this.objs.get(h)),h[0]){case"RadialAxial":const f=`shading${M++}`,N=h[3];let v;switch(h[1]){case"axial":const o=h[4],I=h[5];v=this.svgFactory.createElement("svg:linearGradient"),v.setAttributeNS(null,"id",f),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"x1",o[0]),v.setAttributeNS(null,"y1",o[1]),v.setAttributeNS(null,"x2",I[0]),v.setAttributeNS(null,"y2",I[1]);break;case"radial":const w=h[4],V=h[5],$=h[6],R=h[7];v=this.svgFactory.createElement("svg:radialGradient"),v.setAttributeNS(null,"id",f),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"cx",V[0]),v.setAttributeNS(null,"cy",V[1]),v.setAttributeNS(null,"r",R),v.setAttributeNS(null,"fx",w[0]),v.setAttributeNS(null,"fy",w[1]),v.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${h[1]}`)}for(const o of N){const I=this.svgFactory.createElement("svg:stop");I.setAttributeNS(null,"offset",o[0]),I.setAttributeNS(null,"stop-color",o[1]),v.append(I)}return this.defs.append(v),`url(#${f})`;case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${h[0]}`)}}setDash(h,f){this.current.dashArray=h,this.current.dashPhase=f}constructPath(h,f){const N=this.current;let v=N.x,o=N.y,I=[],w=0;for(const V of h)switch(V|0){case u.OPS.rectangle:v=f[w++],o=f[w++];const $=f[w++],R=f[w++],K=v+$,rt=o+R;I.push("M",E(v),E(o),"L",E(K),E(o),"L",E(K),E(rt),"L",E(v),E(rt),"Z");break;case u.OPS.moveTo:v=f[w++],o=f[w++],I.push("M",E(v),E(o));break;case u.OPS.lineTo:v=f[w++],o=f[w++],I.push("L",E(v),E(o));break;case u.OPS.curveTo:v=f[w+4],o=f[w+5],I.push("C",E(f[w]),E(f[w+1]),E(f[w+2]),E(f[w+3]),E(v),E(o)),w+=6;break;case u.OPS.curveTo2:I.push("C",E(v),E(o),E(f[w]),E(f[w+1]),E(f[w+2]),E(f[w+3])),v=f[w+2],o=f[w+3],w+=4;break;case u.OPS.curveTo3:v=f[w+2],o=f[w+3],I.push("C",E(f[w]),E(f[w+1]),E(v),E(o),E(v),E(o)),w+=4;break;case u.OPS.closePath:I.push("Z");break}I=I.join(" "),N.path&&h.length>0&&h[0]!==u.OPS.rectangle&&h[0]!==u.OPS.moveTo?I=N.path.getAttributeNS(null,"d")+I:(N.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(N.path)),N.path.setAttributeNS(null,"d",I),N.path.setAttributeNS(null,"fill","none"),N.element=N.path,N.setCurrentPoint(v,o)}endPath(){const h=this.current;if(h.path=null,!this.pendingClip)return;if(!h.element){this.pendingClip=null;return}const f=`clippath${p++}`,N=this.svgFactory.createElement("svg:clipPath");N.setAttributeNS(null,"id",f),N.setAttributeNS(null,"transform",A(this.transformMatrix));const v=h.element.cloneNode(!0);if(this.pendingClip==="evenodd"?v.setAttributeNS(null,"clip-rule","evenodd"):v.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,N.append(v),this.defs.append(N),h.activeClipUrl){h.clipGroup=null;for(const o of this.extraStack)o.clipGroup=null;N.setAttributeNS(null,"clip-path",h.activeClipUrl)}h.activeClipUrl=`url(#${f})`,this.tgrp=null}clip(h){this.pendingClip=h}closePath(){const h=this.current;if(h.path){const f=`${h.path.getAttributeNS(null,"d")}Z`;h.path.setAttributeNS(null,"d",f)}}setLeading(h){this.current.leading=-h}setTextRise(h){this.current.textRise=h}setTextRenderingMode(h){this.current.textRenderingMode=h}setHScale(h){this.current.textHScale=h/100}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[f,N]of h)switch(f){case"LW":this.setLineWidth(N);break;case"LC":this.setLineCap(N);break;case"LJ":this.setLineJoin(N);break;case"ML":this.setMiterLimit(N);break;case"D":this.setDash(N[0],N[1]);break;case"RI":this.setRenderingIntent(N);break;case"FL":this.setFlatness(N);break;case"Font":this.setFont(N);break;case"CA":this.setStrokeAlpha(N);break;case"ca":this.setFillAlpha(N);break;default:(0,u.warn)(`Unimplemented graphic state operator ${f}`);break}}fill(){const h=this.current;h.element&&(h.element.setAttributeNS(null,"fill",h.fillColor),h.element.setAttributeNS(null,"fill-opacity",h.fillAlpha),this.endPath())}stroke(){const h=this.current;h.element&&(this._setStrokeAttributes(h.element),h.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(h,f=1){const N=this.current;let v=N.dashArray;f!==1&&v.length>0&&(v=v.map(function(o){return f*o})),h.setAttributeNS(null,"stroke",N.strokeColor),h.setAttributeNS(null,"stroke-opacity",N.strokeAlpha),h.setAttributeNS(null,"stroke-miterlimit",E(N.miterLimit)),h.setAttributeNS(null,"stroke-linecap",N.lineCap),h.setAttributeNS(null,"stroke-linejoin",N.lineJoin),h.setAttributeNS(null,"stroke-width",E(f*N.lineWidth)+"px"),h.setAttributeNS(null,"stroke-dasharray",v.map(E).join(" ")),h.setAttributeNS(null,"stroke-dashoffset",E(f*N.dashPhase)+"px")}eoFill(){var h;(h=this.current.element)==null||h.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var h;(h=this.current.element)==null||h.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y","0"),h.setAttributeNS(null,"width","1px"),h.setAttributeNS(null,"height","1px"),h.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(h)}paintImageXObject(h){const f=this.getObject(h);if(!f){(0,u.warn)(`Dependent image with object ID ${h} is not ready yet`);return}this.paintInlineImageXObject(f)}paintInlineImageXObject(h,f){const N=h.width,v=h.height,o=L(h,this.forceDataSchema,!!f),I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y","0"),I.setAttributeNS(null,"width",E(N)),I.setAttributeNS(null,"height",E(v)),this.current.element=I,this.clip("nonzero");const w=this.svgFactory.createElement("svg:image");w.setAttributeNS(G,"xlink:href",o),w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y",E(-v)),w.setAttributeNS(null,"width",E(N)+"px"),w.setAttributeNS(null,"height",E(v)+"px"),w.setAttributeNS(null,"transform",`scale(${E(1/N)} ${E(-1/v)})`),f?f.append(w):this._ensureTransformGroup().append(w)}paintImageMaskXObject(h){const f=this.getObject(h.data,h);if(f.bitmap){(0,u.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const N=this.current,v=f.width,o=f.height,I=N.fillColor;N.maskId=`mask${y++}`;const w=this.svgFactory.createElement("svg:mask");w.setAttributeNS(null,"id",N.maskId);const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width",E(v)),V.setAttributeNS(null,"height",E(o)),V.setAttributeNS(null,"fill",I),V.setAttributeNS(null,"mask",`url(#${N.maskId})`),this.defs.append(w),this._ensureTransformGroup().append(V),this.paintInlineImageXObject(f,w)}paintFormXObjectBegin(h,f){if(Array.isArray(h)&&h.length===6&&this.transform(h[0],h[1],h[2],h[3],h[4],h[5]),f){const N=f[2]-f[0],v=f[3]-f[1],o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x",f[0]),o.setAttributeNS(null,"y",f[1]),o.setAttributeNS(null,"width",E(N)),o.setAttributeNS(null,"height",E(v)),this.current.element=o,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(h){const f=this.svgFactory.create(h.width,h.height),N=this.svgFactory.createElement("svg:defs");f.append(N),this.defs=N;const v=this.svgFactory.createElement("svg:g");return v.setAttributeNS(null,"transform",A(h.transform)),f.append(v),this.svg=v,f}_ensureClipGroup(){if(!this.current.clipGroup){const h=this.svgFactory.createElement("svg:g");h.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(h),this.current.clipGroup=h}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",A(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=F},(O,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class l{static textContent(u){const T=[],k={items:T,styles:Object.create(null)};function G(b){var L;if(!b)return;let _=null;const g=b.name;if(g==="#text")_=b.value;else if(l.shouldBuildText(g))(L=b==null?void 0:b.attributes)!=null&&L.textContent?_=b.attributes.textContent:b.value&&(_=b.value);else return;if(_!==null&&T.push({str:_}),!!b.children)for(const j of b.children)G(j)}return G(u),k}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}t.XfaText=l},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=A,t.updateTextLayer=p;var n=l(1),u=l(6);const T=1e5,k=30,G=.8,b=new Map;function _(y,M){let F;if(M&&n.FeatureTest.isOffscreenCanvasSupported)F=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=y,F=P.getContext("2d",{alpha:!1})}return F}function g(y,M){const F=b.get(y);if(F)return F;const P=_(k,M);P.font=`${k}px ${y}`;const h=P.measureText("");let f=h.fontBoundingBoxAscent,N=Math.abs(h.fontBoundingBoxDescent);if(f){const o=f/(f+N);return b.set(y,o),P.canvas.width=P.canvas.height=0,o}P.strokeStyle="red",P.clearRect(0,0,k,k),P.strokeText("g",0,0);let v=P.getImageData(0,0,k,k).data;N=0;for(let o=v.length-1-3;o>=0;o-=4)if(v[o]>0){N=Math.ceil(o/4/k);break}P.clearRect(0,0,k,k),P.strokeText("A",0,k),v=P.getImageData(0,0,k,k).data,f=0;for(let o=0,I=v.length;o<I;o+=4)if(v[o]>0){f=k-Math.floor(o/4/k);break}if(P.canvas.width=P.canvas.height=0,f){const o=f/(f+N);return b.set(y,o),o}return b.set(y,G),G}function L(y,M,F){const P=document.createElement("span"),h={angle:0,canvasWidth:0,hasText:M.str!=="",hasEOL:M.hasEOL,fontSize:0};y._textDivs.push(P);const f=n.Util.transform(y._transform,M.transform);let N=Math.atan2(f[1],f[0]);const v=F[M.fontName];v.vertical&&(N+=Math.PI/2);const o=Math.hypot(f[2],f[3]),I=o*g(v.fontFamily,y._isOffscreenCanvasSupported);let w,V;N===0?(w=f[4],V=f[5]-I):(w=f[4]+I*Math.sin(N),V=f[5]-I*Math.cos(N));const $="calc(var(--scale-factor)*",R=P.style;y._container===y._rootContainer?(R.left=`${(100*w/y._pageWidth).toFixed(2)}%`,R.top=`${(100*V/y._pageHeight).toFixed(2)}%`):(R.left=`${$}${w.toFixed(2)}px)`,R.top=`${$}${V.toFixed(2)}px)`),R.fontSize=`${$}${o.toFixed(2)}px)`,R.fontFamily=v.fontFamily,h.fontSize=o,P.setAttribute("role","presentation"),P.textContent=M.str,P.dir=M.dir,y._fontInspectorEnabled&&(P.dataset.fontName=M.fontName),N!==0&&(h.angle=N*(180/Math.PI));let K=!1;if(M.str.length>1)K=!0;else if(M.str!==" "&&M.transform[0]!==M.transform[3]){const rt=Math.abs(M.transform[0]),lt=Math.abs(M.transform[3]);rt!==lt&&Math.max(rt,lt)/Math.min(rt,lt)>1.5&&(K=!0)}K&&(h.canvasWidth=v.vertical?M.height:M.width),y._textDivProperties.set(P,h),y._isReadableStream&&y._layoutText(P)}function j(y){const{div:M,scale:F,properties:P,ctx:h,prevFontSize:f,prevFontFamily:N}=y,{style:v}=M;let o="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:I}=v,{canvasWidth:w,fontSize:V}=P;(f!==V||N!==I)&&(h.font=`${V*F}px ${I}`,y.prevFontSize=V,y.prevFontFamily=I);const{width:$}=h.measureText(M.textContent);$>0&&(o=`scaleX(${w*F/$})`)}P.angle!==0&&(o=`rotate(${P.angle}deg) ${o}`),o.length>0&&(v.transform=o)}function x(y){if(y._canceled)return;const M=y._textDivs,F=y._capability;if(M.length>T){F.resolve();return}if(!y._isReadableStream)for(const h of M)y._layoutText(h);F.resolve()}class E{constructor({textContentSource:M,container:F,viewport:P,textDivs:h,textDivProperties:f,textContentItemsStr:N,isOffscreenCanvasSupported:v}){var $;this._textContentSource=M,this._isReadableStream=M instanceof ReadableStream,this._container=this._rootContainer=F,this._textDivs=h||[],this._textContentItemsStr=N||[],this._isOffscreenCanvasSupported=v,this._fontInspectorEnabled=!!(($=globalThis.FontInspector)!=null&&$.enabled),this._reader=null,this._textDivProperties=f||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:_(0,v)};const{pageWidth:o,pageHeight:I,pageX:w,pageY:V}=P.rawDims;this._transform=[1,0,0,-1,-w,V+I],this._pageWidth=o,this._pageHeight=I,(0,u.setLayerDimensions)(F,P),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(M,F){for(const P of M){if(P.str===void 0){if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const h=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),h.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P.str),L(this,P,F)}}_layoutText(M){const F=this._layoutTextParams.properties=this._textDivProperties.get(M);if(this._layoutTextParams.div=M,j(this._layoutTextParams),F.hasText&&this._container.append(M),F.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const M=new n.PromiseCapability;let F=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(({value:h,done:f})=>{if(f){M.resolve();return}Object.assign(F,h.styles),this._processItems(h.items,F),P()},M.reject)};this._reader=this._textContentSource.getReader(),P()}else if(this._textContentSource){const{items:P,styles:h}=this._textContentSource;this._processItems(P,h),M.resolve()}else throw new Error('No "textContentSource" parameter specified.');M.promise.then(()=>{F=null,x(this)},this._capability.reject)}}t.TextLayerRenderTask=E;function A(y){!y.textContentSource&&(y.textContent||y.textContentStream)&&((0,u.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);const{container:M,viewport:F}=y,P=getComputedStyle(M),h=P.getPropertyValue("visibility"),f=parseFloat(P.getPropertyValue("--scale-factor"));h==="visible"&&(!f||Math.abs(f-F.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const N=new E(y);return N._render(),N}function p({container:y,viewport:M,textDivs:F,textDivProperties:P,isOffscreenCanvasSupported:h,mustRotate:f=!0,mustRescale:N=!0}){if(f&&(0,u.setLayerDimensions)(y,{rotation:M.rotation}),N){const v=_(0,h),I={prevFontSize:null,prevFontFamily:null,div:null,scale:M.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v};for(const w of F)I.properties=P.get(w),I.div=w,j(I)}}},(O,t,l)=>{var g,L,j,x,E,A,p,y,M,F,P,en,f,xe,v,nn,I,sn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=l(1),u=l(4),T=l(28),k=l(33),G=l(6),b=l(34);const V=class{constructor({uiManager:R,pageIndex:K,div:rt,accessibilityManager:lt,annotationLayer:X,viewport:ct,l10n:pt}){z(this,P);z(this,f);z(this,v);z(this,I);z(this,g,void 0);z(this,L,!1);z(this,j,null);z(this,x,this.pointerup.bind(this));z(this,E,this.pointerdown.bind(this));z(this,A,new Map);z(this,p,!1);z(this,y,!1);z(this,M,!1);z(this,F,void 0);const Et=[T.FreeTextEditor,k.InkEditor,b.StampEditor];if(!V._initialized){V._initialized=!0;for(const yt of Et)yt.initialize(pt)}R.registerEditorTypes(Et),st(this,F,R),this.pageIndex=K,this.div=rt,st(this,g,lt),st(this,j,X),this.viewport=ct,e(this,F).addLayer(this)}get isEmpty(){return e(this,A).size===0}updateToolbar(R){e(this,F).updateToolbar(R)}updateMode(R=e(this,F).getMode()){Y(this,I,sn).call(this),R===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),R!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",R===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",R===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",R===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(R){if(!R&&e(this,F).getMode()!==n.AnnotationEditorType.INK)return;if(!R){for(const rt of e(this,A).values())if(rt.isEmpty()){rt.setInBackground();return}}Y(this,f,xe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(R){e(this,F).setEditingState(R)}addCommands(R){e(this,F).addCommands(R)}enable(){this.div.style.pointerEvents="auto";const R=new Set;for(const rt of e(this,A).values())rt.enableEditing(),rt.annotationElementId&&R.add(rt.annotationElementId);if(!e(this,j))return;const K=e(this,j).getEditableAnnotations();for(const rt of K){if(rt.hide(),e(this,F).isDeletedAnnotationElement(rt.data.id)||R.has(rt.data.id))continue;const lt=this.deserialize(rt);lt&&(this.addOrRebuild(lt),lt.enableEditing())}}disable(){var K;st(this,M,!0),this.div.style.pointerEvents="none";const R=new Set;for(const rt of e(this,A).values()){if(rt.disableEditing(),!rt.annotationElementId||rt.serialize()!==null){R.add(rt.annotationElementId);continue}(K=this.getEditableAnnotation(rt.annotationElementId))==null||K.show(),rt.remove()}if(e(this,j)){const rt=e(this,j).getEditableAnnotations();for(const lt of rt){const{id:X}=lt.data;R.has(X)||e(this,F).isDeletedAnnotationElement(X)||lt.show()}}Y(this,I,sn).call(this),this.isEmpty&&(this.div.hidden=!0),st(this,M,!1)}getEditableAnnotation(R){var K;return((K=e(this,j))==null?void 0:K.getEditableAnnotation(R))||null}setActiveEditor(R){e(this,F).getActive()!==R&&e(this,F).setActiveEditor(R)}enableClick(){this.div.addEventListener("pointerdown",e(this,E)),this.div.addEventListener("pointerup",e(this,x))}disableClick(){this.div.removeEventListener("pointerdown",e(this,E)),this.div.removeEventListener("pointerup",e(this,x))}attach(R){e(this,A).set(R.id,R);const{annotationElementId:K}=R;K&&e(this,F).isDeletedAnnotationElement(K)&&e(this,F).removeDeletedAnnotationElement(R)}detach(R){var K;e(this,A).delete(R.id),(K=e(this,g))==null||K.removePointerInTextLayer(R.contentDiv),!e(this,M)&&R.annotationElementId&&e(this,F).addDeletedAnnotationElement(R)}remove(R){this.detach(R),e(this,F).removeEditor(R),R.div.contains(document.activeElement)&&setTimeout(()=>{e(this,F).focusMainContainer()},0),R.div.remove(),R.isAttachedToDOM=!1,e(this,y)||this.addInkEditorIfNeeded(!1)}changeParent(R){var K;R.parent!==this&&(R.annotationElementId&&(e(this,F).addDeletedAnnotationElement(R.annotationElementId),u.AnnotationEditor.deleteAnnotationElement(R),R.annotationElementId=null),this.attach(R),(K=R.parent)==null||K.detach(R),R.setParent(this),R.div&&R.isAttachedToDOM&&(R.div.remove(),this.div.append(R.div)))}add(R){if(this.changeParent(R),e(this,F).addEditor(R),this.attach(R),!R.isAttachedToDOM){const K=R.render();this.div.append(K),R.isAttachedToDOM=!0}R.fixAndSetPosition(),R.onceAdded(),e(this,F).addToAnnotationStorage(R)}moveEditorInDOM(R){var rt;if(!R.isAttachedToDOM)return;const{activeElement:K}=document;R.div.contains(K)&&(R._focusEventsAllowed=!1,setTimeout(()=>{R.div.contains(document.activeElement)?R._focusEventsAllowed=!0:(R.div.addEventListener("focusin",()=>{R._focusEventsAllowed=!0},{once:!0}),K.focus())},0)),R._structTreeParentId=(rt=e(this,g))==null?void 0:rt.moveElementInDOM(this.div,R.div,R.contentDiv,!0)}addOrRebuild(R){R.needsToBeRebuilt()?R.rebuild():this.add(R)}addUndoableEditor(R){const K=()=>R._uiManager.rebuild(R),rt=()=>{R.remove()};this.addCommands({cmd:K,undo:rt,mustExec:!1})}getNextId(){return e(this,F).getId()}pasteEditor(R,K){e(this,F).updateToolbar(R),e(this,F).updateMode(R);const{offsetX:rt,offsetY:lt}=Y(this,v,nn).call(this),X=this.getNextId(),ct=Y(this,P,en).call(this,{parent:this,id:X,x:rt,y:lt,uiManager:e(this,F),isCentered:!0,...K});ct&&this.add(ct)}deserialize(R){switch(R.annotationType??R.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return T.FreeTextEditor.deserialize(R,this,e(this,F));case n.AnnotationEditorType.INK:return k.InkEditor.deserialize(R,this,e(this,F));case n.AnnotationEditorType.STAMP:return b.StampEditor.deserialize(R,this,e(this,F))}return null}addNewEditor(){Y(this,f,xe).call(this,Y(this,v,nn).call(this),!0)}setSelected(R){e(this,F).setSelected(R)}toggleSelected(R){e(this,F).toggleSelected(R)}isSelected(R){return e(this,F).isSelected(R)}unselect(R){e(this,F).unselect(R)}pointerup(R){const{isMac:K}=n.FeatureTest.platform;if(!(R.button!==0||R.ctrlKey&&K)&&R.target===this.div&&e(this,p)){if(st(this,p,!1),!e(this,L)){st(this,L,!0);return}if(e(this,F).getMode()===n.AnnotationEditorType.STAMP){e(this,F).unselectAll();return}Y(this,f,xe).call(this,R,!1)}}pointerdown(R){if(e(this,p)){st(this,p,!1);return}const{isMac:K}=n.FeatureTest.platform;if(R.button!==0||R.ctrlKey&&K||R.target!==this.div)return;st(this,p,!0);const rt=e(this,F).getActive();st(this,L,!rt||rt.isEmpty())}findNewParent(R,K,rt){const lt=e(this,F).findParent(K,rt);return lt===null||lt===this?!1:(lt.changeParent(R),!0)}destroy(){var R,K;((R=e(this,F).getActive())==null?void 0:R.parent)===this&&(e(this,F).commitOrRemove(),e(this,F).setActiveEditor(null));for(const rt of e(this,A).values())(K=e(this,g))==null||K.removePointerInTextLayer(rt.contentDiv),rt.setParent(null),rt.isAttachedToDOM=!1,rt.div.remove();this.div=null,e(this,A).clear(),e(this,F).removeLayer(this)}render({viewport:R}){this.viewport=R,(0,G.setLayerDimensions)(this.div,R);for(const K of e(this,F).getEditors(this.pageIndex))this.add(K);this.updateMode()}update({viewport:R}){e(this,F).commitOrRemove(),this.viewport=R,(0,G.setLayerDimensions)(this.div,{rotation:R.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:R,pageHeight:K}=this.viewport.rawDims;return[R,K]}};let _=V;g=new WeakMap,L=new WeakMap,j=new WeakMap,x=new WeakMap,E=new WeakMap,A=new WeakMap,p=new WeakMap,y=new WeakMap,M=new WeakMap,F=new WeakMap,P=new WeakSet,en=function(R){switch(e(this,F).getMode()){case n.AnnotationEditorType.FREETEXT:return new T.FreeTextEditor(R);case n.AnnotationEditorType.INK:return new k.InkEditor(R);case n.AnnotationEditorType.STAMP:return new b.StampEditor(R)}return null},f=new WeakSet,xe=function(R,K){const rt=this.getNextId(),lt=Y(this,P,en).call(this,{parent:this,id:rt,x:R.offsetX,y:R.offsetY,uiManager:e(this,F),isCentered:K});return lt&&this.add(lt),lt},v=new WeakSet,nn=function(){const{x:R,y:K,width:rt,height:lt}=this.div.getBoundingClientRect(),X=Math.max(0,R),ct=Math.max(0,K),pt=Math.min(window.innerWidth,R+rt),Et=Math.min(window.innerHeight,K+lt),yt=(X+pt)/2-R,C=(ct+Et)/2-K,[s,a]=this.viewport.rotation%180===0?[yt,C]:[C,yt];return{offsetX:s,offsetY:a}},I=new WeakSet,sn=function(){st(this,y,!0);for(const R of e(this,A).values())R.isEmpty()&&R.remove();st(this,y,!1)},ee(_,"_initialized",!1),t.AnnotationEditorLayer=_},(O,t,l)=>{var b,_,g,L,j,x,E,A,p,y,Fn,F,Rn,h,Dn,N,ve,o,rn,w,In,$,an;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=l(1),u=l(5),T=l(4),k=l(29);const K=class extends T.AnnotationEditor{constructor(X){super({...X,name:"freeTextEditor"});z(this,y);z(this,F);z(this,h);z(this,N);z(this,o);z(this,w);z(this,$);z(this,b,this.editorDivBlur.bind(this));z(this,_,this.editorDivFocus.bind(this));z(this,g,this.editorDivInput.bind(this));z(this,L,this.editorDivKeydown.bind(this));z(this,j,void 0);z(this,x,"");z(this,E,`${this.id}-editor`);z(this,A,void 0);z(this,p,null);st(this,j,X.color||K._defaultColor||T.AnnotationEditor._defaultLineColor),st(this,A,X.fontSize||K._defaultFontSize)}static get _keyboardManager(){const X=K.prototype,ct=yt=>yt.isEmpty(),pt=u.AnnotationEditorUIManager.TRANSLATE_SMALL,Et=u.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],X.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],X.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],X._translateEmpty,{args:[-pt,0],checker:ct}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],X._translateEmpty,{args:[-Et,0],checker:ct}],[["ArrowRight","mac+ArrowRight"],X._translateEmpty,{args:[pt,0],checker:ct}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],X._translateEmpty,{args:[Et,0],checker:ct}],[["ArrowUp","mac+ArrowUp"],X._translateEmpty,{args:[0,-pt],checker:ct}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],X._translateEmpty,{args:[0,-Et],checker:ct}],[["ArrowDown","mac+ArrowDown"],X._translateEmpty,{args:[0,pt],checker:ct}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],X._translateEmpty,{args:[0,Et],checker:ct}]]))}static initialize(X){T.AnnotationEditor.initialize(X,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams(X,ct){switch(X){case n.AnnotationEditorParamsType.FREETEXT_SIZE:K._defaultFontSize=ct;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:K._defaultColor=ct;break}}updateParams(X,ct){switch(X){case n.AnnotationEditorParamsType.FREETEXT_SIZE:Y(this,y,Fn).call(this,ct);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:Y(this,F,Rn).call(this,ct);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,K._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,K._defaultColor||T.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,e(this,A)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,e(this,j)]]}_translateEmpty(X,ct){this._uiManager.translateSelectedEditors(X,ct,!0)}getInitialTranslation(){const X=this.parentScale;return[-K._internalPadding*X,-(K._internalPadding+e(this,A))*X]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",e(this,L)),this.editorDiv.addEventListener("focus",e(this,_)),this.editorDiv.addEventListener("blur",e(this,b)),this.editorDiv.addEventListener("input",e(this,g)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",e(this,E)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",e(this,L)),this.editorDiv.removeEventListener("focus",e(this,_)),this.editorDiv.removeEventListener("blur",e(this,b)),this.editorDiv.removeEventListener("input",e(this,g)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(X){this._focusEventsAllowed&&(super.focusin(X),X.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var X;if(this.width){Y(this,$,an).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(X=this._initialOptions)!=null&&X.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const X=e(this,x),ct=st(this,x,Y(this,h,Dn).call(this).trimEnd());if(X===ct)return;const pt=Et=>{if(st(this,x,Et),!Et){this.remove();return}Y(this,o,rn).call(this),this._uiManager.rebuild(this),Y(this,N,ve).call(this)};this.addCommands({cmd:()=>{pt(ct)},undo:()=>{pt(X)},mustExec:!1}),Y(this,N,ve).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(X){this.enterInEditMode()}keydown(X){X.target===this.div&&X.key==="Enter"&&(this.enterInEditMode(),X.preventDefault())}editorDivKeydown(X){K._keyboardManager.exec(this,X)}editorDivFocus(X){this.isEditing=!0}editorDivBlur(X){this.isEditing=!1}editorDivInput(X){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let X,ct;this.width&&(X=this.x,ct=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",e(this,E)),this.enableEditing(),T.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Et=>{var yt;return(yt=this.editorDiv)==null?void 0:yt.setAttribute("aria-label",Et)}),T.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Et=>{var yt;return(yt=this.editorDiv)==null?void 0:yt.setAttribute("default-content",Et)}),this.editorDiv.contentEditable=!0;const{style:pt}=this.editorDiv;if(pt.fontSize=`calc(${e(this,A)}px * var(--scale-factor))`,pt.color=e(this,j),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Et,yt]=this.parentDimensions;if(this.annotationElementId){const{position:C}=e(this,p);let[s,a]=this.getInitialTranslation();[s,a]=this.pageTranslationToScreen(s,a);const[r,c]=this.pageDimensions,[d,m]=this.pageTranslation;let D,W;switch(this.rotation){case 0:D=X+(C[0]-d)/r,W=ct+this.height-(C[1]-m)/c;break;case 90:D=X+(C[0]-d)/r,W=ct-(C[1]-m)/c,[s,a]=[a,-s];break;case 180:D=X-this.width+(C[0]-d)/r,W=ct-(C[1]-m)/c,[s,a]=[-s,-a];break;case 270:D=X+(C[0]-d-this.height*c)/r,W=ct+(C[1]-m-this.width*r)/c,[s,a]=[-a,s];break}this.setAt(D*Et,W*yt,s,a)}else this.setAt(X*Et,ct*yt,this.width*Et,this.height*yt);Y(this,o,rn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(X,ct,pt){let Et=null;if(X instanceof k.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:C,fontColor:s},rect:a,rotation:r,id:c},textContent:d,textPosition:m,parent:{page:{pageNumber:D}}}=X;if(!d||d.length===0)return null;Et=X={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(s),fontSize:C,value:d.join(`
`),position:m,pageIndex:D-1,rect:a,rotation:r,id:c,deleted:!1}}const yt=super.deserialize(X,ct,pt);return st(yt,A,X.fontSize),st(yt,j,n.Util.makeHexColor(...X.color)),st(yt,x,X.value),yt.annotationElementId=X.id||null,st(yt,p,Et),yt}serialize(X=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ct=K._internalPadding*this.parentScale,pt=this.getRect(ct,ct),Et=T.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:e(this,j)),yt={annotationType:n.AnnotationEditorType.FREETEXT,color:Et,fontSize:e(this,A),value:e(this,x),pageIndex:this.pageIndex,rect:pt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return X?yt:this.annotationElementId&&!Y(this,w,In).call(this,yt)?null:(yt.id=this.annotationElementId,yt)}};let G=K;b=new WeakMap,_=new WeakMap,g=new WeakMap,L=new WeakMap,j=new WeakMap,x=new WeakMap,E=new WeakMap,A=new WeakMap,p=new WeakMap,y=new WeakSet,Fn=function(X){const ct=Et=>{this.editorDiv.style.fontSize=`calc(${Et}px * var(--scale-factor))`,this.translate(0,-(Et-e(this,A))*this.parentScale),st(this,A,Et),Y(this,N,ve).call(this)},pt=e(this,A);this.addCommands({cmd:()=>{ct(X)},undo:()=>{ct(pt)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},F=new WeakSet,Rn=function(X){const ct=e(this,j);this.addCommands({cmd:()=>{st(this,j,this.editorDiv.style.color=X)},undo:()=>{st(this,j,this.editorDiv.style.color=ct)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,Dn=function(){const X=this.editorDiv.getElementsByTagName("div");if(X.length===0)return this.editorDiv.innerText;const ct=[];for(const pt of X)ct.push(pt.innerText.replace(/\r\n?|\n/,""));return ct.join(`
`)},N=new WeakSet,ve=function(){const[X,ct]=this.parentDimensions;let pt;if(this.isAttachedToDOM)pt=this.div.getBoundingClientRect();else{const{currentLayer:Et,div:yt}=this,C=yt.style.display;yt.style.display="hidden",Et.div.append(this.div),pt=yt.getBoundingClientRect(),yt.remove(),yt.style.display=C}this.rotation%180===this.parentRotation%180?(this.width=pt.width/X,this.height=pt.height/ct):(this.width=pt.height/X,this.height=pt.width/ct),this.fixAndSetPosition()},o=new WeakSet,rn=function(){if(this.editorDiv.replaceChildren(),!!e(this,x))for(const X of e(this,x).split(`
`)){const ct=document.createElement("div");ct.append(X?document.createTextNode(X):document.createElement("br")),this.editorDiv.append(ct)}},w=new WeakSet,In=function(X){const{value:ct,fontSize:pt,color:Et,rect:yt,pageIndex:C}=e(this,p);return X.value!==ct||X.fontSize!==pt||X.rect.some((s,a)=>Math.abs(s-yt[a])>=1)||X.color.some((s,a)=>s!==Et[a])||X.pageIndex!==C},$=new WeakSet,an=function(X=!1){if(!this.annotationElementId)return;if(Y(this,N,ve).call(this),!X&&(this.width===0||this.height===0)){setTimeout(()=>Y(this,$,an).call(this,!0),0);return}const ct=K._internalPadding*this.parentScale;e(this,p).rect=this.getRect(ct,ct)},ee(G,"_freeTextDefaultContent",""),ee(G,"_internalPadding",0),ee(G,"_defaultColor",null),ee(G,"_defaultFontSize",10),ee(G,"_type","freetext"),t.FreeTextEditor=G},(O,t,l)=>{var a,c,ce,m,Ln,W,tt,et,ot,dt,vt,ut,Mt,Bt,wt,Dt,gt,nt,it,ft,Tt,Ct,Ut,On,Ht,Me,Xt,on,qt,ln,Z,B,mt,bt,te,Zt,Q,cn,It,kt,Lt,Nt,Nn,At,hn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var n=l(1),u=l(6),T=l(3),k=l(30),G=l(31),b=l(32);const _=1e3,g=9,L=new WeakSet;function j(Ot){return{width:Ot[2]-Ot[0],height:Ot[3]-Ot[1]}}class x{static create(U){switch(U.data.annotationType){case n.AnnotationType.LINK:return new A(U);case n.AnnotationType.TEXT:return new p(U);case n.AnnotationType.WIDGET:switch(U.data.fieldType){case"Tx":return new M(U);case"Btn":return U.data.radioButton?new h(U):U.data.checkBox?new P(U):new f(U);case"Ch":return new N(U);case"Sig":return new F(U)}return new y(U);case n.AnnotationType.POPUP:return new v(U);case n.AnnotationType.FREETEXT:return new I(U);case n.AnnotationType.LINE:return new w(U);case n.AnnotationType.SQUARE:return new V(U);case n.AnnotationType.CIRCLE:return new $(U);case n.AnnotationType.POLYLINE:return new R(U);case n.AnnotationType.CARET:return new rt(U);case n.AnnotationType.INK:return new lt(U);case n.AnnotationType.POLYGON:return new K(U);case n.AnnotationType.HIGHLIGHT:return new X(U);case n.AnnotationType.UNDERLINE:return new ct(U);case n.AnnotationType.SQUIGGLY:return new pt(U);case n.AnnotationType.STRIKEOUT:return new Et(U);case n.AnnotationType.STAMP:return new yt(U);case n.AnnotationType.FILEATTACHMENT:return new C(U);default:return new E(U)}}}const r=class{constructor(U,{isRenderable:i=!1,ignoreBorder:S=!1,createQuadrilaterals:H=!1}={}){z(this,a,!1);this.isRenderable=i,this.data=U.data,this.layer=U.layer,this.linkService=U.linkService,this.downloadManager=U.downloadManager,this.imageResourcesPath=U.imageResourcesPath,this.renderForms=U.renderForms,this.svgFactory=U.svgFactory,this.annotationStorage=U.annotationStorage,this.enableScripting=U.enableScripting,this.hasJSActions=U.hasJSActions,this._fieldObjects=U.fieldObjects,this.parent=U.parent,i&&(this.container=this._createContainer(S)),H&&this._createQuadrilaterals()}static _hasPopupData({titleObj:U,contentsObj:i,richText:S}){return!!(U!=null&&U.str||i!=null&&i.str||S!=null&&S.str)}get hasPopupData(){return r._hasPopupData(this.data)}_createContainer(U){const{data:i,parent:{page:S,viewport:H}}=this,q=document.createElement("section");q.setAttribute("data-annotation-id",i.id),this instanceof y||(q.tabIndex=_),q.style.zIndex=this.parent.zIndex++,this.data.popupRef&&q.setAttribute("aria-haspopup","dialog"),i.noRotate&&q.classList.add("norotate");const{pageWidth:J,pageHeight:at,pageX:_t,pageY:xt}=H.rawDims;if(!i.rect||this instanceof v){const{rotation:jt}=i;return!i.hasOwnCanvas&&jt!==0&&this.setRotation(jt,q),q}const{width:Pt,height:Gt}=j(i.rect),Ft=n.Util.normalizeRect([i.rect[0],S.view[3]-i.rect[1]+S.view[1],i.rect[2],S.view[3]-i.rect[3]+S.view[1]]);if(!U&&i.borderStyle.width>0){q.style.borderWidth=`${i.borderStyle.width}px`;const jt=i.borderStyle.horizontalCornerRadius,$t=i.borderStyle.verticalCornerRadius;if(jt>0||$t>0){const Qt=`calc(${jt}px * var(--scale-factor)) / calc(${$t}px * var(--scale-factor))`;q.style.borderRadius=Qt}else if(this instanceof h){const Qt=`calc(${Pt}px * var(--scale-factor)) / calc(${Gt}px * var(--scale-factor))`;q.style.borderRadius=Qt}switch(i.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:q.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:q.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:q.style.borderBottomStyle="solid";break}const Kt=i.borderColor||null;Kt?(st(this,a,!0),q.style.borderColor=n.Util.makeHexColor(Kt[0]|0,Kt[1]|0,Kt[2]|0)):q.style.borderWidth=0}q.style.left=`${100*(Ft[0]-_t)/J}%`,q.style.top=`${100*(Ft[1]-xt)/at}%`;const{rotation:Rt}=i;return i.hasOwnCanvas||Rt===0?(q.style.width=`${100*Pt/J}%`,q.style.height=`${100*Gt/at}%`):this.setRotation(Rt,q),q}setRotation(U,i=this.container){if(!this.data.rect)return;const{pageWidth:S,pageHeight:H}=this.parent.viewport.rawDims,{width:q,height:J}=j(this.data.rect);let at,_t;U%180===0?(at=100*q/S,_t=100*J/H):(at=100*J/S,_t=100*q/H),i.style.width=`${at}%`,i.style.height=`${_t}%`,i.setAttribute("data-main-rotation",(360-U)%360)}get _commonActions(){const U=(i,S,H)=>{const q=H.detail[i],J=q[0],at=q.slice(1);H.target.style[S]=k.ColorConverters[`${J}_HTML`](at),this.annotationStorage.setValue(this.data.id,{[S]:k.ColorConverters[`${J}_rgb`](at)})};return(0,n.shadow)(this,"_commonActions",{display:i=>{const{display:S}=i.detail,H=S%2===1;this.container.style.visibility=H?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:H,noPrint:S===1||S===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:S}=i.detail;this.container.style.visibility=S?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:S,noView:S})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{U("bgColor","backgroundColor",i)},fillColor:i=>{U("fillColor","backgroundColor",i)},fgColor:i=>{U("fgColor","color",i)},textColor:i=>{U("textColor","color",i)},borderColor:i=>{U("borderColor","borderColor",i)},strokeColor:i=>{U("strokeColor","borderColor",i)},rotation:i=>{const S=i.detail.rotation;this.setRotation(S),this.annotationStorage.setValue(this.data.id,{rotation:S})}})}_dispatchEventFromSandbox(U,i){const S=this._commonActions;for(const H of Object.keys(i.detail)){const q=U[H]||S[H];q==null||q(i)}}_setDefaultPropertiesFromJS(U){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const S=this._commonActions;for(const[H,q]of Object.entries(i)){const J=S[H];if(J){const at={detail:{[H]:q},target:U};J(at),delete i[H]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:U}=this.data;if(!U)return;const[i,S,H,q]=this.data.rect;if(U.length===1){const[,{x:$t,y:Kt},{x:Qt,y:ie}]=U[0];if(H===$t&&q===Kt&&i===Qt&&S===ie)return}const{style:J}=this.container;let at;if(e(this,a)){const{borderColor:$t,borderWidth:Kt}=J;J.borderWidth=0,at=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${$t}" stroke-width="${Kt}">`],this.container.classList.add("hasBorder")}const _t=H-i,xt=q-S,{svgFactory:Pt}=this,Gt=Pt.createElement("svg");Gt.classList.add("quadrilateralsContainer"),Gt.setAttribute("width",0),Gt.setAttribute("height",0);const Ft=Pt.createElement("defs");Gt.append(Ft);const Rt=Pt.createElement("clipPath"),jt=`clippath_${this.data.id}`;Rt.setAttribute("id",jt),Rt.setAttribute("clipPathUnits","objectBoundingBox"),Ft.append(Rt);for(const[,{x:$t,y:Kt},{x:Qt,y:ie}]of U){const ne=Pt.createElement("rect"),se=(Qt-i)/_t,oe=(q-Kt)/xt,le=($t-Qt)/_t,An=(Kt-ie)/xt;ne.setAttribute("x",se),ne.setAttribute("y",oe),ne.setAttribute("width",le),ne.setAttribute("height",An),Rt.append(ne),at==null||at.push(`<rect vector-effect="non-scaling-stroke" x="${se}" y="${oe}" width="${le}" height="${An}"/>`)}e(this,a)&&(at.push("</g></svg>')"),J.backgroundImage=at.join("")),this.container.append(Gt),this.container.style.clipPath=`url(#${jt})`}_createPopup(){const{container:U,data:i}=this;U.setAttribute("aria-haspopup","dialog");const S=new v({data:{color:i.color,titleObj:i.titleObj,modificationDate:i.modificationDate,contentsObj:i.contentsObj,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation},parent:this.parent,elements:[this]});this.parent.div.append(S.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(U,i=null){const S=[];if(this._fieldObjects){const H=this._fieldObjects[U];if(H)for(const{page:q,id:J,exportValues:at}of H){if(q===-1||J===i)continue;const _t=typeof at=="string"?at:null,xt=document.querySelector(`[data-element-id="${J}"]`);if(xt&&!L.has(xt)){(0,n.warn)(`_getElementsByName - element not allowed: ${J}`);continue}S.push({id:J,exportValue:_t,domElement:xt})}return S}for(const H of document.getElementsByName(U)){const{exportValue:q}=H,J=H.getAttribute("data-element-id");J!==i&&L.has(H)&&S.push({id:J,exportValue:q,domElement:H})}return S}show(){var U;this.container&&(this.container.hidden=!1),(U=this.popup)==null||U.maybeShow()}hide(){var U;this.container&&(this.container.hidden=!0),(U=this.popup)==null||U.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const U=this.getElementsToTriggerPopup();if(Array.isArray(U))for(const i of U)i.classList.add("highlightArea");else U.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:U,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{var S;(S=this.linkService.eventBus)==null||S.dispatch("switchannotationeditormode",{source:this,mode:U,editId:i})})}};let E=r;a=new WeakMap;class A extends E{constructor(i,S=null){super(i,{isRenderable:!0,ignoreBorder:!!(S!=null&&S.ignoreBorder),createQuadrilaterals:!0});z(this,c);z(this,m);this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:S}=this,H=document.createElement("a");H.setAttribute("data-element-id",i.id);let q=!1;return i.url?(S.addLinkAttributes(H,i.url,i.newWindow),q=!0):i.action?(this._bindNamedAction(H,i.action),q=!0):i.attachment?(this._bindAttachment(H,i.attachment),q=!0):i.setOCGState?(Y(this,m,Ln).call(this,H,i.setOCGState),q=!0):i.dest?(this._bindLink(H,i.dest),q=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(H,i),q=!0),i.resetForm?(this._bindResetFormAction(H,i.resetForm),q=!0):this.isTooltipOnly&&!q&&(this._bindLink(H,""),q=!0)),this.container.classList.add("linkAnnotation"),q&&this.container.append(H),this.container}_bindLink(i,S){i.href=this.linkService.getDestinationHash(S),i.onclick=()=>(S&&this.linkService.goToDestination(S),!1),(S||S==="")&&Y(this,c,ce).call(this)}_bindNamedAction(i,S){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(S),!1),Y(this,c,ce).call(this)}_bindAttachment(i,S){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>{var H;return(H=this.downloadManager)==null||H.openOrDownloadData(this.container,S.content,S.filename),!1},Y(this,c,ce).call(this)}_bindJSAction(i,S){i.href=this.linkService.getAnchorUrl("");const H=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const q of Object.keys(S.actions)){const J=H.get(q);J&&(i[J]=()=>{var at;return(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S.id,name:q}}),!1})}i.onclick||(i.onclick=()=>!1),Y(this,c,ce).call(this)}_bindResetFormAction(i,S){const H=i.onclick;if(H||(i.href=this.linkService.getAnchorUrl("")),Y(this,c,ce).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),H||(i.onclick=()=>!1);return}i.onclick=()=>{var Gt;H==null||H();const{fields:q,refs:J,include:at}=S,_t=[];if(q.length!==0||J.length!==0){const Ft=new Set(J);for(const Rt of q){const jt=this._fieldObjects[Rt]||[];for(const{id:$t}of jt)Ft.add($t)}for(const Rt of Object.values(this._fieldObjects))for(const jt of Rt)Ft.has(jt.id)===at&&_t.push(jt)}else for(const Ft of Object.values(this._fieldObjects))_t.push(...Ft);const xt=this.annotationStorage,Pt=[];for(const Ft of _t){const{id:Rt}=Ft;switch(Pt.push(Rt),Ft.type){case"text":{const $t=Ft.defaultValue||"";xt.setValue(Rt,{value:$t});break}case"checkbox":case"radiobutton":{const $t=Ft.defaultValue===Ft.exportValues;xt.setValue(Rt,{value:$t});break}case"combobox":case"listbox":{const $t=Ft.defaultValue||"";xt.setValue(Rt,{value:$t});break}default:continue}const jt=document.querySelector(`[data-element-id="${Rt}"]`);if(jt){if(!L.has(jt)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Rt}`);continue}}else continue;jt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Pt,name:"ResetForm"}})),!1}}}c=new WeakSet,ce=function(){this.container.setAttribute("data-internal-link","")},m=new WeakSet,Ln=function(i,S){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeSetOCGState(S),!1),Y(this,c,ce).call(this)};class p extends E{constructor(U){super(U,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const U=document.createElement("img");return U.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",U.alt="[{{type}} Annotation]",U.dataset.l10nId="text_annotation_type",U.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(U),this.container}}class y extends E{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(U){var i;this.data.hasOwnCanvas&&(((i=U.previousSibling)==null?void 0:i.nodeName)==="CANVAS"&&(U.previousSibling.hidden=!0),U.hidden=!1)}_getKeyModifier(U){const{isWin:i,isMac:S}=n.FeatureTest.platform;return i&&U.ctrlKey||S&&U.metaKey}_setEventListener(U,i,S,H,q){S.includes("mouse")?U.addEventListener(S,J=>{var at;(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:H,value:q(J),shift:J.shiftKey,modifier:this._getKeyModifier(J)}})}):U.addEventListener(S,J=>{var at;if(S==="blur"){if(!i.focused||!J.relatedTarget)return;i.focused=!1}else if(S==="focus"){if(i.focused)return;i.focused=!0}q&&((at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:H,value:q(J)}}))})}_setEventListeners(U,i,S,H){var q,J,at;for(const[_t,xt]of S)(xt==="Action"||(q=this.data.actions)!=null&&q[xt])&&((xt==="Focus"||xt==="Blur")&&(i||(i={focused:!1})),this._setEventListener(U,i,_t,xt,H),xt==="Focus"&&!((J=this.data.actions)!=null&&J.Blur)?this._setEventListener(U,i,"blur","Blur",null):xt==="Blur"&&!((at=this.data.actions)!=null&&at.Focus)&&this._setEventListener(U,i,"focus","Focus",null))}_setBackgroundColor(U){const i=this.data.backgroundColor||null;U.style.backgroundColor=i===null?"transparent":n.Util.makeHexColor(i[0],i[1],i[2])}_setTextStyle(U){const i=["left","center","right"],{fontColor:S}=this.data.defaultAppearanceData,H=this.data.defaultAppearanceData.fontSize||g,q=U.style;let J;const at=2,_t=xt=>Math.round(10*xt)/10;if(this.data.multiLine){const xt=Math.abs(this.data.rect[3]-this.data.rect[1]-at),Pt=Math.round(xt/(n.LINE_FACTOR*H))||1,Gt=xt/Pt;J=Math.min(H,_t(Gt/n.LINE_FACTOR))}else{const xt=Math.abs(this.data.rect[3]-this.data.rect[1]-at);J=Math.min(H,_t(xt/n.LINE_FACTOR))}q.fontSize=`calc(${J}px * var(--scale-factor))`,q.color=n.Util.makeHexColor(S[0],S[1],S[2]),this.data.textAlignment!==null&&(q.textAlign=i[this.data.textAlignment])}_setRequired(U,i){i?U.setAttribute("required",!0):U.removeAttribute("required"),U.setAttribute("aria-required",i)}}class M extends y{constructor(U){const i=U.renderForms||!U.data.hasAppearance&&!!U.data.fieldValue;super(U,{isRenderable:i})}setPropertyOnSiblings(U,i,S,H){const q=this.annotationStorage;for(const J of this._getElementsByName(U.name,U.id))J.domElement&&(J.domElement[i]=S),q.setValue(J.id,{[H]:S})}render(){var H,q;const U=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let S=null;if(this.renderForms){const J=U.getValue(i,{value:this.data.fieldValue});let at=J.value||"";const _t=U.getValue(i,{charLimit:this.data.maxLen}).charLimit;_t&&at.length>_t&&(at=at.slice(0,_t));let xt=J.formattedValue||((H=this.data.textContent)==null?void 0:H.join(`
`))||null;xt&&this.data.comb&&(xt=xt.replaceAll(/\s+/g,""));const Pt={userValue:at,formattedValue:xt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(S=document.createElement("textarea"),S.textContent=xt??at,this.data.doNotScroll&&(S.style.overflowY="hidden")):(S=document.createElement("input"),S.type="text",S.setAttribute("value",xt??at),this.data.doNotScroll&&(S.style.overflowX="hidden")),this.data.hasOwnCanvas&&(S.hidden=!0),L.add(S),S.setAttribute("data-element-id",i),S.disabled=this.data.readOnly,S.name=this.data.fieldName,S.tabIndex=_,this._setRequired(S,this.data.required),_t&&(S.maxLength=_t),S.addEventListener("input",Ft=>{U.setValue(i,{value:Ft.target.value}),this.setPropertyOnSiblings(S,"value",Ft.target.value,"value"),Pt.formattedValue=null}),S.addEventListener("resetform",Ft=>{const Rt=this.data.defaultFieldValue??"";S.value=Pt.userValue=Rt,Pt.formattedValue=null});let Gt=Ft=>{const{formattedValue:Rt}=Pt;Rt!=null&&(Ft.target.value=Rt),Ft.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){S.addEventListener("focus",Rt=>{if(Pt.focused)return;const{target:jt}=Rt;Pt.userValue&&(jt.value=Pt.userValue),Pt.lastCommittedValue=jt.value,Pt.commitKey=1,Pt.focused=!0}),S.addEventListener("updatefromsandbox",Rt=>{this.showElementAndHideCanvas(Rt.target);const jt={value($t){Pt.userValue=$t.detail.value??"",U.setValue(i,{value:Pt.userValue.toString()}),$t.target.value=Pt.userValue},formattedValue($t){const{formattedValue:Kt}=$t.detail;Pt.formattedValue=Kt,Kt!=null&&$t.target!==document.activeElement&&($t.target.value=Kt),U.setValue(i,{formattedValue:Kt})},selRange($t){$t.target.setSelectionRange(...$t.detail.selRange)},charLimit:$t=>{var ne;const{charLimit:Kt}=$t.detail,{target:Qt}=$t;if(Kt===0){Qt.removeAttribute("maxLength");return}Qt.setAttribute("maxLength",Kt);let ie=Pt.userValue;!ie||ie.length<=Kt||(ie=ie.slice(0,Kt),Qt.value=Pt.userValue=ie,U.setValue(i,{value:ie}),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:ie,willCommit:!0,commitKey:1,selStart:Qt.selectionStart,selEnd:Qt.selectionEnd}}))}};this._dispatchEventFromSandbox(jt,Rt)}),S.addEventListener("keydown",Rt=>{var Kt;Pt.commitKey=1;let jt=-1;if(Rt.key==="Escape"?jt=0:Rt.key==="Enter"&&!this.data.multiLine?jt=2:Rt.key==="Tab"&&(Pt.commitKey=3),jt===-1)return;const{value:$t}=Rt.target;Pt.lastCommittedValue!==$t&&(Pt.lastCommittedValue=$t,Pt.userValue=$t,(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:$t,willCommit:!0,commitKey:jt,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}}))});const Ft=Gt;Gt=null,S.addEventListener("blur",Rt=>{var $t;if(!Pt.focused||!Rt.relatedTarget)return;Pt.focused=!1;const{value:jt}=Rt.target;Pt.userValue=jt,Pt.lastCommittedValue!==jt&&(($t=this.linkService.eventBus)==null||$t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:jt,willCommit:!0,commitKey:Pt.commitKey,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}})),Ft(Rt)}),(q=this.data.actions)!=null&&q.Keystroke&&S.addEventListener("beforeinput",Rt=>{var oe;Pt.lastCommittedValue=null;const{data:jt,target:$t}=Rt,{value:Kt,selectionStart:Qt,selectionEnd:ie}=$t;let ne=Qt,se=ie;switch(Rt.inputType){case"deleteWordBackward":{const le=Kt.substring(0,Qt).match(/\w*[^\w]*$/);le&&(ne-=le[0].length);break}case"deleteWordForward":{const le=Kt.substring(Qt).match(/^[^\w]*\w*/);le&&(se+=le[0].length);break}case"deleteContentBackward":Qt===ie&&(ne-=1);break;case"deleteContentForward":Qt===ie&&(se+=1);break}Rt.preventDefault(),(oe=this.linkService.eventBus)==null||oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:Kt,change:jt||"",willCommit:!1,selStart:ne,selEnd:se}})}),this._setEventListeners(S,Pt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Rt=>Rt.target.value)}if(Gt&&S.addEventListener("blur",Gt),this.data.comb){const Rt=(this.data.rect[2]-this.data.rect[0])/_t;S.classList.add("comb"),S.style.letterSpacing=`calc(${Rt}px * var(--scale-factor) - 1ch)`}}else S=document.createElement("div"),S.textContent=this.data.fieldValue,S.style.verticalAlign="middle",S.style.display="table-cell";return this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}class F extends y{constructor(U){super(U,{isRenderable:!!U.data.hasOwnCanvas})}}class P extends y{constructor(U){super(U,{isRenderable:U.renderForms})}render(){const U=this.annotationStorage,i=this.data,S=i.id;let H=U.getValue(S,{value:i.exportValue===i.fieldValue}).value;typeof H=="string"&&(H=H!=="Off",U.setValue(S,{value:H})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const q=document.createElement("input");return L.add(q),q.setAttribute("data-element-id",S),q.disabled=i.readOnly,this._setRequired(q,this.data.required),q.type="checkbox",q.name=i.fieldName,H&&q.setAttribute("checked",!0),q.setAttribute("exportValue",i.exportValue),q.tabIndex=_,q.addEventListener("change",J=>{const{name:at,checked:_t}=J.target;for(const xt of this._getElementsByName(at,S)){const Pt=_t&&xt.exportValue===i.exportValue;xt.domElement&&(xt.domElement.checked=Pt),U.setValue(xt.id,{value:Pt})}U.setValue(S,{value:_t})}),q.addEventListener("resetform",J=>{const at=i.defaultFieldValue||"Off";J.target.checked=at===i.exportValue}),this.enableScripting&&this.hasJSActions&&(q.addEventListener("updatefromsandbox",J=>{const at={value(_t){_t.target.checked=_t.detail.value!=="Off",U.setValue(S,{value:_t.target.checked})}};this._dispatchEventFromSandbox(at,J)}),this._setEventListeners(q,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.checked)),this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.append(q),this.container}}class h extends y{constructor(U){super(U,{isRenderable:U.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const U=this.annotationStorage,i=this.data,S=i.id;let H=U.getValue(S,{value:i.fieldValue===i.buttonValue}).value;typeof H=="string"&&(H=H!==i.buttonValue,U.setValue(S,{value:H}));const q=document.createElement("input");if(L.add(q),q.setAttribute("data-element-id",S),q.disabled=i.readOnly,this._setRequired(q,this.data.required),q.type="radio",q.name=i.fieldName,H&&q.setAttribute("checked",!0),q.tabIndex=_,q.addEventListener("change",J=>{const{name:at,checked:_t}=J.target;for(const xt of this._getElementsByName(at,S))U.setValue(xt.id,{value:!1});U.setValue(S,{value:_t})}),q.addEventListener("resetform",J=>{const at=i.defaultFieldValue;J.target.checked=at!=null&&at===i.buttonValue}),this.enableScripting&&this.hasJSActions){const J=i.buttonValue;q.addEventListener("updatefromsandbox",at=>{const _t={value:xt=>{const Pt=J===xt.detail.value;for(const Gt of this._getElementsByName(xt.target.name)){const Ft=Pt&&Gt.id===S;Gt.domElement&&(Gt.domElement.checked=Ft),U.setValue(Gt.id,{value:Ft})}}};this._dispatchEventFromSandbox(_t,at)}),this._setEventListeners(q,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.checked)}return this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.append(q),this.container}}class f extends A{constructor(U){super(U,{ignoreBorder:U.data.hasAppearance})}render(){const U=super.render();U.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(U.title=this.data.alternativeText);const i=U.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",S=>{this._dispatchEventFromSandbox({},S)})),U}}class N extends y{constructor(U){super(U,{isRenderable:U.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const U=this.annotationStorage,i=this.data.id,S=U.getValue(i,{value:this.data.fieldValue}),H=document.createElement("select");L.add(H),H.setAttribute("data-element-id",i),H.disabled=this.data.readOnly,this._setRequired(H,this.data.required),H.name=this.data.fieldName,H.tabIndex=_;let q=this.data.combo&&this.data.options.length>0;this.data.combo||(H.size=this.data.options.length,this.data.multiSelect&&(H.multiple=!0)),H.addEventListener("resetform",Pt=>{const Gt=this.data.defaultFieldValue;for(const Ft of H.options)Ft.selected=Ft.value===Gt});for(const Pt of this.data.options){const Gt=document.createElement("option");Gt.textContent=Pt.displayValue,Gt.value=Pt.exportValue,S.value.includes(Pt.exportValue)&&(Gt.setAttribute("selected",!0),q=!1),H.append(Gt)}let J=null;if(q){const Pt=document.createElement("option");Pt.value=" ",Pt.setAttribute("hidden",!0),Pt.setAttribute("selected",!0),H.prepend(Pt),J=()=>{Pt.remove(),H.removeEventListener("input",J),J=null},H.addEventListener("input",J)}const at=Pt=>{const Gt=Pt?"value":"textContent",{options:Ft,multiple:Rt}=H;return Rt?Array.prototype.filter.call(Ft,jt=>jt.selected).map(jt=>jt[Gt]):Ft.selectedIndex===-1?null:Ft[Ft.selectedIndex][Gt]};let _t=at(!1);const xt=Pt=>{const Gt=Pt.target.options;return Array.prototype.map.call(Gt,Ft=>({displayValue:Ft.textContent,exportValue:Ft.value}))};return this.enableScripting&&this.hasJSActions?(H.addEventListener("updatefromsandbox",Pt=>{const Gt={value(Ft){J==null||J();const Rt=Ft.detail.value,jt=new Set(Array.isArray(Rt)?Rt:[Rt]);for(const $t of H.options)$t.selected=jt.has($t.value);U.setValue(i,{value:at(!0)}),_t=at(!1)},multipleSelection(Ft){H.multiple=!0},remove(Ft){const Rt=H.options,jt=Ft.detail.remove;Rt[jt].selected=!1,H.remove(jt),Rt.length>0&&Array.prototype.findIndex.call(Rt,Kt=>Kt.selected)===-1&&(Rt[0].selected=!0),U.setValue(i,{value:at(!0),items:xt(Ft)}),_t=at(!1)},clear(Ft){for(;H.length!==0;)H.remove(0);U.setValue(i,{value:null,items:[]}),_t=at(!1)},insert(Ft){const{index:Rt,displayValue:jt,exportValue:$t}=Ft.detail.insert,Kt=H.children[Rt],Qt=document.createElement("option");Qt.textContent=jt,Qt.value=$t,Kt?Kt.before(Qt):H.append(Qt),U.setValue(i,{value:at(!0),items:xt(Ft)}),_t=at(!1)},items(Ft){const{items:Rt}=Ft.detail;for(;H.length!==0;)H.remove(0);for(const jt of Rt){const{displayValue:$t,exportValue:Kt}=jt,Qt=document.createElement("option");Qt.textContent=$t,Qt.value=Kt,H.append(Qt)}H.options.length>0&&(H.options[0].selected=!0),U.setValue(i,{value:at(!0),items:xt(Ft)}),_t=at(!1)},indices(Ft){const Rt=new Set(Ft.detail.indices);for(const jt of Ft.target.options)jt.selected=Rt.has(jt.index);U.setValue(i,{value:at(!0)}),_t=at(!1)},editable(Ft){Ft.target.disabled=!Ft.detail.editable}};this._dispatchEventFromSandbox(Gt,Pt)}),H.addEventListener("input",Pt=>{var Ft;const Gt=at(!0);U.setValue(i,{value:Gt}),Pt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:_t,changeEx:Gt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(H,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Pt=>Pt.target.value)):H.addEventListener("input",function(Pt){U.setValue(i,{value:at(!0)})}),this.data.combo&&this._setTextStyle(H),this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class v extends E{constructor(U){const{data:i,elements:S}=U;super(U,{isRenderable:E._hasPopupData(i)}),this.elements=S}render(){this.container.classList.add("popupAnnotation");const U=new o({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const S of this.elements)S.popup=U,i.push(S.data.id),S.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(S=>`${n.AnnotationPrefix}${S}`).join(",")),this.container}}class o{constructor({container:U,color:i,elements:S,titleObj:H,modificationDate:q,contentsObj:J,richText:at,parent:_t,rect:xt,parentRect:Pt,open:Gt}){z(this,Ut);z(this,Ht);z(this,Xt);z(this,qt);z(this,W,null);z(this,tt,Y(this,Ut,On).bind(this));z(this,et,Y(this,qt,ln).bind(this));z(this,ot,Y(this,Xt,on).bind(this));z(this,dt,Y(this,Ht,Me).bind(this));z(this,vt,null);z(this,ut,null);z(this,Mt,null);z(this,Bt,null);z(this,wt,null);z(this,Dt,null);z(this,gt,!1);z(this,nt,null);z(this,it,null);z(this,ft,null);z(this,Tt,null);z(this,Ct,!1);var Rt;st(this,ut,U),st(this,Tt,H),st(this,Mt,J),st(this,ft,at),st(this,wt,_t),st(this,vt,i),st(this,it,xt),st(this,Dt,Pt),st(this,Bt,S);const Ft=u.PDFDateString.toDateObject(q);Ft&&st(this,W,_t.l10n.get("annotation_date_string",{date:Ft.toLocaleDateString(),time:Ft.toLocaleTimeString()})),this.trigger=S.flatMap(jt=>jt.getElementsToTriggerPopup());for(const jt of this.trigger)jt.addEventListener("click",e(this,dt)),jt.addEventListener("mouseenter",e(this,ot)),jt.addEventListener("mouseleave",e(this,et)),jt.classList.add("popupTriggerArea");for(const jt of S)(Rt=jt.container)==null||Rt.addEventListener("keydown",e(this,tt));e(this,ut).hidden=!0,Gt&&Y(this,Ht,Me).call(this)}render(){if(e(this,nt))return;const{page:{view:U},viewport:{rawDims:{pageWidth:i,pageHeight:S,pageX:H,pageY:q}}}=e(this,wt),J=st(this,nt,document.createElement("div"));if(J.className="popup",e(this,vt)){const ne=J.style.outlineColor=n.Util.makeHexColor(...e(this,vt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?J.style.backgroundColor=`color-mix(in srgb, ${ne} 30%, white)`:J.style.backgroundColor=n.Util.makeHexColor(...e(this,vt).map(oe=>Math.floor(.7*(255-oe)+oe)))}const at=document.createElement("span");at.className="header";const _t=document.createElement("h1");if(at.append(_t),{dir:_t.dir,str:_t.textContent}=e(this,Tt),J.append(at),e(this,W)){const ne=document.createElement("span");ne.classList.add("popupDate"),e(this,W).then(se=>{ne.textContent=se}),at.append(ne)}const xt=e(this,Mt),Pt=e(this,ft);if(Pt!=null&&Pt.str&&(!(xt!=null&&xt.str)||xt.str===Pt.str))b.XfaLayer.render({xfaHtml:Pt.html,intent:"richText",div:J}),J.lastChild.classList.add("richText","popupContent");else{const ne=this._formatContents(xt);J.append(ne)}let Gt=!!e(this,Dt),Ft=Gt?e(this,Dt):e(this,it);for(const ne of e(this,Bt))if(!Ft||n.Util.intersect(ne.data.rect,Ft)!==null){Ft=ne.data.rect,Gt=!0;break}const Rt=n.Util.normalizeRect([Ft[0],U[3]-Ft[1]+U[1],Ft[2],U[3]-Ft[3]+U[1]]),jt=5,$t=Gt?Ft[2]-Ft[0]+jt:0,Kt=Rt[0]+$t,Qt=Rt[1],{style:ie}=e(this,ut);ie.left=`${100*(Kt-H)/i}%`,ie.top=`${100*(Qt-q)/S}%`,e(this,ut).append(J)}_formatContents({str:U,dir:i}){const S=document.createElement("p");S.classList.add("popupContent"),S.dir=i;const H=U.split(/(?:\r\n?|\n)/);for(let q=0,J=H.length;q<J;++q){const at=H[q];S.append(document.createTextNode(at)),q<J-1&&S.append(document.createElement("br"))}return S}forceHide(){st(this,Ct,this.isVisible),e(this,Ct)&&(e(this,ut).hidden=!0)}maybeShow(){e(this,Ct)&&(st(this,Ct,!1),e(this,ut).hidden=!1)}get isVisible(){return e(this,ut).hidden===!1}}W=new WeakMap,tt=new WeakMap,et=new WeakMap,ot=new WeakMap,dt=new WeakMap,vt=new WeakMap,ut=new WeakMap,Mt=new WeakMap,Bt=new WeakMap,wt=new WeakMap,Dt=new WeakMap,gt=new WeakMap,nt=new WeakMap,it=new WeakMap,ft=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,Ut=new WeakSet,On=function(U){U.altKey||U.shiftKey||U.ctrlKey||U.metaKey||(U.key==="Enter"||U.key==="Escape"&&e(this,gt))&&Y(this,Ht,Me).call(this)},Ht=new WeakSet,Me=function(){st(this,gt,!e(this,gt)),e(this,gt)?(Y(this,Xt,on).call(this),e(this,ut).addEventListener("click",e(this,dt)),e(this,ut).addEventListener("keydown",e(this,tt))):(Y(this,qt,ln).call(this),e(this,ut).removeEventListener("click",e(this,dt)),e(this,ut).removeEventListener("keydown",e(this,tt)))},Xt=new WeakSet,on=function(){e(this,nt)||this.render(),this.isVisible?e(this,gt)&&e(this,ut).classList.add("focused"):(e(this,ut).hidden=!1,e(this,ut).style.zIndex=parseInt(e(this,ut).style.zIndex)+1e3)},qt=new WeakSet,ln=function(){e(this,ut).classList.remove("focused"),!(e(this,gt)||!this.isVisible)&&(e(this,ut).hidden=!0,e(this,ut).style.zIndex=parseInt(e(this,ut).style.zIndex)-1e3)};class I extends E{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0}),this.textContent=U.data.textContent,this.textPosition=U.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const U=document.createElement("div");U.classList.add("annotationTextContent"),U.setAttribute("role","comment");for(const i of this.textContent){const S=document.createElement("span");S.textContent=i,U.append(S)}this.container.append(U)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=I;class w extends E{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});z(this,Z,null)}render(){this.container.classList.add("lineAnnotation");const i=this.data,{width:S,height:H}=j(i.rect),q=this.svgFactory.create(S,H,!0),J=st(this,Z,this.svgFactory.createElement("svg:line"));return J.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),J.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),J.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),J.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),J.setAttribute("stroke-width",i.borderStyle.width||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),q.append(J),this.container.append(q),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Z)}addHighlightArea(){this.container.classList.add("highlightArea")}}Z=new WeakMap;class V extends E{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});z(this,B,null)}render(){this.container.classList.add("squareAnnotation");const i=this.data,{width:S,height:H}=j(i.rect),q=this.svgFactory.create(S,H,!0),J=i.borderStyle.width,at=st(this,B,this.svgFactory.createElement("svg:rect"));return at.setAttribute("x",J/2),at.setAttribute("y",J/2),at.setAttribute("width",S-J),at.setAttribute("height",H-J),at.setAttribute("stroke-width",J||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),q.append(at),this.container.append(q),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,B)}addHighlightArea(){this.container.classList.add("highlightArea")}}B=new WeakMap;class $ extends E{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});z(this,mt,null)}render(){this.container.classList.add("circleAnnotation");const i=this.data,{width:S,height:H}=j(i.rect),q=this.svgFactory.create(S,H,!0),J=i.borderStyle.width,at=st(this,mt,this.svgFactory.createElement("svg:ellipse"));return at.setAttribute("cx",S/2),at.setAttribute("cy",H/2),at.setAttribute("rx",S/2-J/2),at.setAttribute("ry",H/2-J/2),at.setAttribute("stroke-width",J||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),q.append(at),this.container.append(q),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,mt)}addHighlightArea(){this.container.classList.add("highlightArea")}}mt=new WeakMap;class R extends E{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});z(this,bt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const i=this.data,{width:S,height:H}=j(i.rect),q=this.svgFactory.create(S,H,!0);let J=[];for(const _t of i.vertices){const xt=_t.x-i.rect[0],Pt=i.rect[3]-_t.y;J.push(xt+","+Pt)}J=J.join(" ");const at=st(this,bt,this.svgFactory.createElement(this.svgElementName));return at.setAttribute("points",J),at.setAttribute("stroke-width",i.borderStyle.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),q.append(at),this.container.append(q),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,bt)}addHighlightArea(){this.container.classList.add("highlightArea")}}bt=new WeakMap;class K extends R{constructor(U){super(U),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rt extends E{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class lt extends E{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});z(this,te,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const i=this.data,{width:S,height:H}=j(i.rect),q=this.svgFactory.create(S,H,!0);for(const J of i.inkLists){let at=[];for(const xt of J){const Pt=xt.x-i.rect[0],Gt=i.rect[3]-xt.y;at.push(`${Pt},${Gt}`)}at=at.join(" ");const _t=this.svgFactory.createElement(this.svgElementName);e(this,te).push(_t),_t.setAttribute("points",at),_t.setAttribute("stroke-width",i.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),!i.popupRef&&this.hasPopupData&&this._createPopup(),q.append(_t)}return this.container.append(q),this.container}getElementsToTriggerPopup(){return e(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,t.InkAnnotationElement=lt;class X extends E{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ct extends E{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class pt extends E{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Et extends E{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class yt extends E{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=yt;class C extends E{constructor(i){var q;super(i,{isRenderable:!0});z(this,Q);z(this,Zt,null);const{filename:S,content:H}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(S,!0),this.content=H,(q=this.linkService.eventBus)==null||q.dispatch("fileattachmentannotation",{source:this,filename:S,content:H})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:i,data:S}=this;let H;S.hasAppearance||S.fillAlpha===0?H=document.createElement("div"):(H=document.createElement("img"),H.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(S.name)?"paperclip":"pushpin"}.svg`,S.fillAlpha&&S.fillAlpha<1&&(H.style=`filter: opacity(${Math.round(S.fillAlpha*100)}%);`)),H.addEventListener("dblclick",Y(this,Q,cn).bind(this)),st(this,Zt,H);const{isMac:q}=n.FeatureTest.platform;return i.addEventListener("keydown",J=>{J.key==="Enter"&&(q?J.metaKey:J.ctrlKey)&&Y(this,Q,cn).call(this)}),!S.popupRef&&this.hasPopupData?this._createPopup():H.classList.add("popupTriggerArea"),i.append(H),i}getElementsToTriggerPopup(){return e(this,Zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zt=new WeakMap,Q=new WeakSet,cn=function(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.container,this.content,this.filename)};class s{constructor({div:U,accessibilityManager:i,annotationCanvasMap:S,l10n:H,page:q,viewport:J}){z(this,Nt);z(this,At);z(this,It,null);z(this,kt,null);z(this,Lt,new Map);this.div=U,st(this,It,i),st(this,kt,S),this.l10n=H,this.page=q,this.viewport=J,this.zIndex=0,this.l10n||(this.l10n=G.NullL10n)}async render(U){const{annotations:i}=U,S=this.div;(0,u.setLayerDimensions)(S,this.viewport);const H=new Map,q={data:null,layer:S,linkService:U.linkService,downloadManager:U.downloadManager,imageResourcesPath:U.imageResourcesPath||"",renderForms:U.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:U.annotationStorage||new T.AnnotationStorage,enableScripting:U.enableScripting===!0,hasJSActions:U.hasJSActions,fieldObjects:U.fieldObjects,parent:this,elements:null};for(const J of i){if(J.noHTML)continue;const at=J.annotationType===n.AnnotationType.POPUP;if(at){const Pt=H.get(J.id);if(!Pt)continue;q.elements=Pt}else{const{width:Pt,height:Gt}=j(J.rect);if(Pt<=0||Gt<=0)continue}q.data=J;const _t=x.create(q);if(!_t.isRenderable)continue;if(!at&&J.popupRef){const Pt=H.get(J.popupRef);Pt?Pt.push(_t):H.set(J.popupRef,[_t])}_t.annotationEditorType>0&&e(this,Lt).set(_t.data.id,_t);const xt=_t.render();J.hidden&&(xt.style.visibility="hidden"),Y(this,Nt,Nn).call(this,xt,J.id)}Y(this,At,hn).call(this),await this.l10n.translate(S)}update({viewport:U}){const i=this.div;this.viewport=U,(0,u.setLayerDimensions)(i,{rotation:U.rotation}),Y(this,At,hn).call(this),i.hidden=!1}getEditableAnnotations(){return Array.from(e(this,Lt).values())}getEditableAnnotation(U){return e(this,Lt).get(U)}}It=new WeakMap,kt=new WeakMap,Lt=new WeakMap,Nt=new WeakSet,Nn=function(U,i){var H;const S=U.firstChild||U;S.id=`${n.AnnotationPrefix}${i}`,this.div.append(U),(H=e(this,It))==null||H.moveElementInDOM(this.div,U,S,!1)},At=new WeakSet,hn=function(){if(!e(this,kt))return;const U=this.div;for(const[i,S]of e(this,kt)){const H=U.querySelector(`[data-annotation-id="${i}"]`);if(!H)continue;const{firstChild:q}=H;q?q.nodeName==="CANVAS"?q.replaceWith(S):q.before(S):H.append(S)}e(this,kt).clear()},t.AnnotationLayer=s},(O,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function l(T){return Math.floor(Math.max(0,Math.min(1,T))*255).toString(16).padStart(2,"0")}function n(T){return Math.max(0,Math.min(255,255*T))}class u{static CMYK_G([k,G,b,_]){return["G",1-Math.min(1,.3*k+.59*b+.11*G+_)]}static G_CMYK([k]){return["CMYK",0,0,0,1-k]}static G_RGB([k]){return["RGB",k,k,k]}static G_rgb([k]){return k=n(k),[k,k,k]}static G_HTML([k]){const G=l(k);return`#${G}${G}${G}`}static RGB_G([k,G,b]){return["G",.3*k+.59*G+.11*b]}static RGB_rgb(k){return k.map(n)}static RGB_HTML(k){return`#${k.map(l).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([k,G,b,_]){return["RGB",1-Math.min(1,k+_),1-Math.min(1,b+_),1-Math.min(1,G+_)]}static CMYK_rgb([k,G,b,_]){return[n(1-Math.min(1,k+_)),n(1-Math.min(1,b+_)),n(1-Math.min(1,G+_))]}static CMYK_HTML(k){const G=this.CMYK_RGB(k).slice(1);return this.RGB_HTML(G)}static RGB_CMYK([k,G,b]){const _=1-k,g=1-G,L=1-b,j=Math.min(_,g,L);return["CMYK",_,g,L,j]}}t.ColorConverters=u},(O,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=n;const l={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};l.print_progress_percent="{{progress}}%";function n(k,G){switch(k){case"find_match_count":k=`find_match_count[${G.total===1?"one":"other"}]`;break;case"find_match_count_limit":k=`find_match_count_limit[${G.limit===1?"one":"other"}]`;break}return l[k]||""}function u(k,G){return G?k.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(b,_)=>_ in G?G[_]:"{{"+_+"}}"):k}const T={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(k,G=null,b=n(k,G)){return u(b,G)},async translate(k){}};t.NullL10n=T},(O,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=l(25);class u{static setupStorage(k,G,b,_,g){const L=_.getValue(G,{value:null});switch(b.name){case"textarea":if(L.value!==null&&(k.textContent=L.value),g==="print")break;k.addEventListener("input",j=>{_.setValue(G,{value:j.target.value})});break;case"input":if(b.attributes.type==="radio"||b.attributes.type==="checkbox"){if(L.value===b.attributes.xfaOn?k.setAttribute("checked",!0):L.value===b.attributes.xfaOff&&k.removeAttribute("checked"),g==="print")break;k.addEventListener("change",j=>{_.setValue(G,{value:j.target.checked?j.target.getAttribute("xfaOn"):j.target.getAttribute("xfaOff")})})}else{if(L.value!==null&&k.setAttribute("value",L.value),g==="print")break;k.addEventListener("input",j=>{_.setValue(G,{value:j.target.value})})}break;case"select":if(L.value!==null){k.setAttribute("value",L.value);for(const j of b.children)j.attributes.value===L.value?j.attributes.selected=!0:j.attributes.hasOwnProperty("selected")&&delete j.attributes.selected}k.addEventListener("input",j=>{const x=j.target.options,E=x.selectedIndex===-1?"":x[x.selectedIndex].value;_.setValue(G,{value:E})});break}}static setAttributes({html:k,element:G,storage:b=null,intent:_,linkService:g}){const{attributes:L}=G,j=k instanceof HTMLAnchorElement;L.type==="radio"&&(L.name=`${L.name}-${_}`);for(const[x,E]of Object.entries(L))if(E!=null)switch(x){case"class":E.length&&k.setAttribute(x,E.join(" "));break;case"dataId":break;case"id":k.setAttribute("data-element-id",E);break;case"style":Object.assign(k.style,E);break;case"textContent":k.textContent=E;break;default:(!j||x!=="href"&&x!=="newWindow")&&k.setAttribute(x,E)}j&&g.addLinkAttributes(k,L.href,L.newWindow),b&&L.dataId&&this.setupStorage(k,L.dataId,G,b)}static render(k){var A;const G=k.annotationStorage,b=k.linkService,_=k.xfaHtml,g=k.intent||"display",L=document.createElement(_.name);_.attributes&&this.setAttributes({html:L,element:_,intent:g,linkService:b});const j=[[_,-1,L]],x=k.div;if(x.append(L),k.viewport){const p=`matrix(${k.viewport.transform.join(",")})`;x.style.transform=p}g!=="richText"&&x.setAttribute("class","xfaLayer xfaFont");const E=[];for(;j.length>0;){const[p,y,M]=j.at(-1);if(y+1===p.children.length){j.pop();continue}const F=p.children[++j.at(-1)[1]];if(F===null)continue;const{name:P}=F;if(P==="#text"){const f=document.createTextNode(F.value);E.push(f),M.append(f);continue}const h=(A=F==null?void 0:F.attributes)!=null&&A.xmlns?document.createElementNS(F.attributes.xmlns,P):document.createElement(P);if(M.append(h),F.attributes&&this.setAttributes({html:h,element:F,storage:G,intent:g,linkService:b}),F.children&&F.children.length>0)j.push([F,-1,h]);else if(F.value){const f=document.createTextNode(F.value);n.XfaText.shouldBuildText(P)&&E.push(f),h.append(f)}}for(const p of x.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:E}}static update(k){const G=`matrix(${k.viewport.transform.join(",")})`;k.div.style.transform=G,k.div.hidden=!1}}t.XfaLayer=u},(O,t,l)=>{var _,g,L,j,x,E,A,p,y,M,F,P,h,f,N,Bn,o,Un,w,Hn,$,jn,K,dn,lt,Wn,ct,un,Et,zn,C,Vn,a,Gn,c,Xn,m,qn,W,ae,et,fn,dt,Fe,ut,Re,Bt,fe,Dt,pn,nt,De,ft,$n,Ct,gn,zt,Yn,Vt,Kn,Wt,mn,ht,Ie,B,pe;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var n=l(1),u=l(4),T=l(29),k=l(6),G=l(5);const bt=class extends u.AnnotationEditor{constructor(Q){super({...Q,name:"inkEditor"});z(this,N);z(this,o);z(this,w);z(this,$);z(this,K);z(this,lt);z(this,ct);z(this,Et);z(this,C);z(this,a);z(this,c);z(this,m);z(this,W);z(this,et);z(this,dt);z(this,ut);z(this,Bt);z(this,Dt);z(this,nt);z(this,Vt);z(this,Wt);z(this,ht);z(this,B);z(this,_,0);z(this,g,0);z(this,L,this.canvasPointermove.bind(this));z(this,j,this.canvasPointerleave.bind(this));z(this,x,this.canvasPointerup.bind(this));z(this,E,this.canvasPointerdown.bind(this));z(this,A,new Path2D);z(this,p,!1);z(this,y,!1);z(this,M,!1);z(this,F,null);z(this,P,0);z(this,h,0);z(this,f,null);this.color=Q.color||null,this.thickness=Q.thickness||null,this.opacity=Q.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Q){u.AnnotationEditor.initialize(Q,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Q,St){switch(Q){case n.AnnotationEditorParamsType.INK_THICKNESS:bt._defaultThickness=St;break;case n.AnnotationEditorParamsType.INK_COLOR:bt._defaultColor=St;break;case n.AnnotationEditorParamsType.INK_OPACITY:bt._defaultOpacity=St/100;break}}updateParams(Q,St){switch(Q){case n.AnnotationEditorParamsType.INK_THICKNESS:Y(this,N,Bn).call(this,St);break;case n.AnnotationEditorParamsType.INK_COLOR:Y(this,o,Un).call(this,St);break;case n.AnnotationEditorParamsType.INK_OPACITY:Y(this,w,Hn).call(this,St);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,bt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,bt._defaultColor||u.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(bt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||bt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||bt._defaultColor||u.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??bt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Y(this,dt,Fe).call(this),Y(this,ut,Re).call(this)),this.isAttachedToDOM||(this.parent.add(this),Y(this,Bt,fe).call(this)),Y(this,B,pe).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,e(this,F).disconnect(),st(this,F,null),super.remove())}setParent(Q){!this.parent&&Q?this._uiManager.removeShouldRescale(this):this.parent&&Q===null&&this._uiManager.addShouldRescale(this),super.setParent(Q)}onScaleChanging(){const[Q,St]=this.parentDimensions,It=this.width*Q,kt=this.height*St;this.setDimensions(It,kt)}enableEditMode(){e(this,p)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",e(this,E)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",e(this,E)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){e(this,p)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),st(this,p,!0),this.div.classList.add("disabled"),Y(this,B,pe).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Q){this._focusEventsAllowed&&(super.focusin(Q),this.enableEditMode())}canvasPointerdown(Q){Q.button!==0||!this.isInEditMode()||e(this,p)||(this.setInForeground(),Q.preventDefault(),Q.type!=="mouse"&&this.div.focus(),Y(this,lt,Wn).call(this,Q.offsetX,Q.offsetY))}canvasPointermove(Q){Q.preventDefault(),Y(this,ct,un).call(this,Q.offsetX,Q.offsetY)}canvasPointerup(Q){Q.preventDefault(),Y(this,et,fn).call(this,Q)}canvasPointerleave(Q){Y(this,et,fn).call(this,Q)}get isResizable(){return!this.isEmpty()&&e(this,p)}render(){if(this.div)return this.div;let Q,St;this.width&&(Q=this.x,St=this.y),super.render(),u.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Jt=>{var At;return(At=this.div)==null?void 0:At.setAttribute("aria-label",Jt)});const[It,kt,Lt,Nt]=Y(this,$,jn).call(this);if(this.setAt(It,kt,0,0),this.setDims(Lt,Nt),Y(this,dt,Fe).call(this),this.width){const[Jt,At]=this.parentDimensions;this.setAspectRatio(this.width*Jt,this.height*At),this.setAt(Q*Jt,St*At,this.width*Jt,this.height*At),st(this,M,!0),Y(this,Bt,fe).call(this),this.setDims(this.width*Jt,this.height*At),Y(this,W,ae).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Y(this,ut,Re).call(this),this.div}setDimensions(Q,St){const It=Math.round(Q),kt=Math.round(St);if(e(this,P)===It&&e(this,h)===kt)return;st(this,P,It),st(this,h,kt),this.canvas.style.visibility="hidden";const[Lt,Nt]=this.parentDimensions;this.width=Q/Lt,this.height=St/Nt,this.fixAndSetPosition(),e(this,p)&&Y(this,Dt,pn).call(this,Q,St),Y(this,Bt,fe).call(this),Y(this,W,ae).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Q,St,It){var q,J,at;if(Q instanceof T.InkAnnotationElement)return null;const kt=super.deserialize(Q,St,It);kt.thickness=Q.thickness,kt.color=n.Util.makeHexColor(...Q.color),kt.opacity=Q.opacity;const[Lt,Nt]=kt.pageDimensions,Jt=kt.width*Lt,At=kt.height*Nt,Yt=kt.parentScale,Ot=Q.thickness/2;st(kt,p,!0),st(kt,P,Math.round(Jt)),st(kt,h,Math.round(At));const{paths:U,rect:i,rotation:S}=Q;for(let{bezier:_t}of U){_t=Y(q=bt,zt,Yn).call(q,_t,i,S);const xt=[];kt.paths.push(xt);let Pt=Yt*(_t[0]-Ot),Gt=Yt*(_t[1]-Ot);for(let Rt=2,jt=_t.length;Rt<jt;Rt+=6){const $t=Yt*(_t[Rt]-Ot),Kt=Yt*(_t[Rt+1]-Ot),Qt=Yt*(_t[Rt+2]-Ot),ie=Yt*(_t[Rt+3]-Ot),ne=Yt*(_t[Rt+4]-Ot),se=Yt*(_t[Rt+5]-Ot);xt.push([[Pt,Gt],[$t,Kt],[Qt,ie],[ne,se]]),Pt=ne,Gt=se}const Ft=Y(this,ft,$n).call(this,xt);kt.bezierPath2D.push(Ft)}const H=Y(J=kt,Wt,mn).call(J);return st(kt,g,Math.max(u.AnnotationEditor.MIN_SIZE,H[2]-H[0])),st(kt,_,Math.max(u.AnnotationEditor.MIN_SIZE,H[3]-H[1])),Y(at=kt,Dt,pn).call(at,Jt,At),kt}serialize(){if(this.isEmpty())return null;const Q=this.getRect(0,0),St=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:St,thickness:this.thickness,opacity:this.opacity,paths:Y(this,Vt,Kn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Q),pageIndex:this.pageIndex,rect:Q,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};let b=bt;_=new WeakMap,g=new WeakMap,L=new WeakMap,j=new WeakMap,x=new WeakMap,E=new WeakMap,A=new WeakMap,p=new WeakMap,y=new WeakMap,M=new WeakMap,F=new WeakMap,P=new WeakMap,h=new WeakMap,f=new WeakMap,N=new WeakSet,Bn=function(Q){const St=this.thickness;this.addCommands({cmd:()=>{this.thickness=Q,Y(this,B,pe).call(this)},undo:()=>{this.thickness=St,Y(this,B,pe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Un=function(Q){const St=this.color;this.addCommands({cmd:()=>{this.color=Q,Y(this,W,ae).call(this)},undo:()=>{this.color=St,Y(this,W,ae).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,Hn=function(Q){Q/=100;const St=this.opacity;this.addCommands({cmd:()=>{this.opacity=Q,Y(this,W,ae).call(this)},undo:()=>{this.opacity=St,Y(this,W,ae).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$=new WeakSet,jn=function(){const{parentRotation:Q,parentDimensions:[St,It]}=this;switch(Q){case 90:return[0,It,It,St];case 180:return[St,It,St,It];case 270:return[St,0,It,St];default:return[0,0,St,It]}},K=new WeakSet,dn=function(){const{ctx:Q,color:St,opacity:It,thickness:kt,parentScale:Lt,scaleFactor:Nt}=this;Q.lineWidth=kt*Lt/Nt,Q.lineCap="round",Q.lineJoin="round",Q.miterLimit=10,Q.strokeStyle=`${St}${(0,G.opacityToHex)(It)}`},lt=new WeakSet,Wn=function(Q,St){this.canvas.addEventListener("contextmenu",k.noContextMenu),this.canvas.addEventListener("pointerleave",e(this,j)),this.canvas.addEventListener("pointermove",e(this,L)),this.canvas.addEventListener("pointerup",e(this,x)),this.canvas.removeEventListener("pointerdown",e(this,E)),this.isEditing=!0,e(this,M)||(st(this,M,!0),Y(this,Bt,fe).call(this),this.thickness||(this.thickness=bt._defaultThickness),this.color||(this.color=bt._defaultColor||u.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=bt._defaultOpacity)),this.currentPath.push([Q,St]),st(this,y,!1),Y(this,K,dn).call(this),st(this,f,()=>{Y(this,a,Gn).call(this),e(this,f)&&window.requestAnimationFrame(e(this,f))}),window.requestAnimationFrame(e(this,f))},ct=new WeakSet,un=function(Q,St){const[It,kt]=this.currentPath.at(-1);if(this.currentPath.length>1&&Q===It&&St===kt)return;const Lt=this.currentPath;let Nt=e(this,A);if(Lt.push([Q,St]),st(this,y,!0),Lt.length<=2){Nt.moveTo(...Lt[0]),Nt.lineTo(Q,St);return}Lt.length===3&&(st(this,A,Nt=new Path2D),Nt.moveTo(...Lt[0])),Y(this,c,Xn).call(this,Nt,...Lt.at(-3),...Lt.at(-2),Q,St)},Et=new WeakSet,zn=function(){if(this.currentPath.length===0)return;const Q=this.currentPath.at(-1);e(this,A).lineTo(...Q)},C=new WeakSet,Vn=function(Q,St){st(this,f,null),Q=Math.min(Math.max(Q,0),this.canvas.width),St=Math.min(Math.max(St,0),this.canvas.height),Y(this,ct,un).call(this,Q,St),Y(this,Et,zn).call(this);let It;if(this.currentPath.length!==1)It=Y(this,m,qn).call(this);else{const At=[Q,St];It=[[At,At.slice(),At.slice(),At]]}const kt=e(this,A),Lt=this.currentPath;this.currentPath=[],st(this,A,new Path2D);const Nt=()=>{this.allRawPaths.push(Lt),this.paths.push(It),this.bezierPath2D.push(kt),this.rebuild()},Jt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Y(this,dt,Fe).call(this),Y(this,ut,Re).call(this)),Y(this,B,pe).call(this))};this.addCommands({cmd:Nt,undo:Jt,mustExec:!0})},a=new WeakSet,Gn=function(){if(!e(this,y))return;st(this,y,!1);const Q=Math.ceil(this.thickness*this.parentScale),St=this.currentPath.slice(-3),It=St.map(Nt=>Nt[0]),kt=St.map(Nt=>Nt[1]);Math.min(...It)-Q,Math.max(...It)+Q,Math.min(...kt)-Q,Math.max(...kt)+Q;const{ctx:Lt}=this;Lt.save(),Lt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Nt of this.bezierPath2D)Lt.stroke(Nt);Lt.stroke(e(this,A)),Lt.restore()},c=new WeakSet,Xn=function(Q,St,It,kt,Lt,Nt,Jt){const At=(St+kt)/2,Yt=(It+Lt)/2,Ot=(kt+Nt)/2,U=(Lt+Jt)/2;Q.bezierCurveTo(At+2*(kt-At)/3,Yt+2*(Lt-Yt)/3,Ot+2*(kt-Ot)/3,U+2*(Lt-U)/3,Ot,U)},m=new WeakSet,qn=function(){const Q=this.currentPath;if(Q.length<=2)return[[Q[0],Q[0],Q.at(-1),Q.at(-1)]];const St=[];let It,[kt,Lt]=Q[0];for(It=1;It<Q.length-2;It++){const[i,S]=Q[It],[H,q]=Q[It+1],J=(i+H)/2,at=(S+q)/2,_t=[kt+2*(i-kt)/3,Lt+2*(S-Lt)/3],xt=[J+2*(i-J)/3,at+2*(S-at)/3];St.push([[kt,Lt],_t,xt,[J,at]]),[kt,Lt]=[J,at]}const[Nt,Jt]=Q[It],[At,Yt]=Q[It+1],Ot=[kt+2*(Nt-kt)/3,Lt+2*(Jt-Lt)/3],U=[At+2*(Nt-At)/3,Yt+2*(Jt-Yt)/3];return St.push([[kt,Lt],Ot,U,[At,Yt]]),St},W=new WeakSet,ae=function(){if(this.isEmpty()){Y(this,nt,De).call(this);return}Y(this,K,dn).call(this);const{canvas:Q,ctx:St}=this;St.setTransform(1,0,0,1,0,0),St.clearRect(0,0,Q.width,Q.height),Y(this,nt,De).call(this);for(const It of this.bezierPath2D)St.stroke(It)},et=new WeakSet,fn=function(Q){this.canvas.removeEventListener("pointerleave",e(this,j)),this.canvas.removeEventListener("pointermove",e(this,L)),this.canvas.removeEventListener("pointerup",e(this,x)),this.canvas.addEventListener("pointerdown",e(this,E)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",k.noContextMenu)},10),Y(this,C,Vn).call(this,Q.offsetX,Q.offsetY),this.addToAnnotationStorage(),this.setInBackground()},dt=new WeakSet,Fe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",u.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Q=>{var St;return(St=this.canvas)==null?void 0:St.setAttribute("aria-label",Q)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ut=new WeakSet,Re=function(){st(this,F,new ResizeObserver(Q=>{const St=Q[0].contentRect;St.width&&St.height&&this.setDimensions(St.width,St.height)})),e(this,F).observe(this.div)},Bt=new WeakSet,fe=function(){if(!e(this,M))return;const[Q,St]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Q),this.canvas.height=Math.ceil(this.height*St),Y(this,nt,De).call(this)},Dt=new WeakSet,pn=function(Q,St){const It=Y(this,ht,Ie).call(this),kt=(Q-It)/e(this,g),Lt=(St-It)/e(this,_);this.scaleFactor=Math.min(kt,Lt)},nt=new WeakSet,De=function(){const Q=Y(this,ht,Ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Q,this.translationY*this.scaleFactor+Q)},ft=new WeakSet,$n=function(Q){const St=new Path2D;for(let It=0,kt=Q.length;It<kt;It++){const[Lt,Nt,Jt,At]=Q[It];It===0&&St.moveTo(...Lt),St.bezierCurveTo(Nt[0],Nt[1],Jt[0],Jt[1],At[0],At[1])}return St},Ct=new WeakSet,gn=function(Q,St,It){const[kt,Lt,Nt,Jt]=St;switch(It){case 0:for(let At=0,Yt=Q.length;At<Yt;At+=2)Q[At]+=kt,Q[At+1]=Jt-Q[At+1];break;case 90:for(let At=0,Yt=Q.length;At<Yt;At+=2){const Ot=Q[At];Q[At]=Q[At+1]+kt,Q[At+1]=Ot+Lt}break;case 180:for(let At=0,Yt=Q.length;At<Yt;At+=2)Q[At]=Nt-Q[At],Q[At+1]+=Lt;break;case 270:for(let At=0,Yt=Q.length;At<Yt;At+=2){const Ot=Q[At];Q[At]=Nt-Q[At+1],Q[At+1]=Jt-Ot}break;default:throw new Error("Invalid rotation")}return Q},zt=new WeakSet,Yn=function(Q,St,It){const[kt,Lt,Nt,Jt]=St;switch(It){case 0:for(let At=0,Yt=Q.length;At<Yt;At+=2)Q[At]-=kt,Q[At+1]=Jt-Q[At+1];break;case 90:for(let At=0,Yt=Q.length;At<Yt;At+=2){const Ot=Q[At];Q[At]=Q[At+1]-Lt,Q[At+1]=Ot-kt}break;case 180:for(let At=0,Yt=Q.length;At<Yt;At+=2)Q[At]=Nt-Q[At],Q[At+1]-=Lt;break;case 270:for(let At=0,Yt=Q.length;At<Yt;At+=2){const Ot=Q[At];Q[At]=Jt-Q[At+1],Q[At+1]=Nt-Ot}break;default:throw new Error("Invalid rotation")}return Q},Vt=new WeakSet,Kn=function(Q,St,It,kt){var Yt,Ot;const Lt=[],Nt=this.thickness/2,Jt=Q*St+Nt,At=Q*It+Nt;for(const U of this.paths){const i=[],S=[];for(let H=0,q=U.length;H<q;H++){const[J,at,_t,xt]=U[H],Pt=Q*J[0]+Jt,Gt=Q*J[1]+At,Ft=Q*at[0]+Jt,Rt=Q*at[1]+At,jt=Q*_t[0]+Jt,$t=Q*_t[1]+At,Kt=Q*xt[0]+Jt,Qt=Q*xt[1]+At;H===0&&(i.push(Pt,Gt),S.push(Pt,Gt)),i.push(Ft,Rt,jt,$t,Kt,Qt),S.push(Ft,Rt),H===q-1&&S.push(Kt,Qt)}Lt.push({bezier:Y(Yt=bt,Ct,gn).call(Yt,i,kt,this.rotation),points:Y(Ot=bt,Ct,gn).call(Ot,S,kt,this.rotation)})}return Lt},Wt=new WeakSet,mn=function(){let Q=1/0,St=-1/0,It=1/0,kt=-1/0;for(const Lt of this.paths)for(const[Nt,Jt,At,Yt]of Lt){const Ot=n.Util.bezierBoundingBox(...Nt,...Jt,...At,...Yt);Q=Math.min(Q,Ot[0]),It=Math.min(It,Ot[1]),St=Math.max(St,Ot[2]),kt=Math.max(kt,Ot[3])}return[Q,It,St,kt]},ht=new WeakSet,Ie=function(){return e(this,p)?Math.ceil(this.thickness*this.parentScale):0},B=new WeakSet,pe=function(Q=!1){if(this.isEmpty())return;if(!e(this,p)){Y(this,W,ae).call(this);return}const St=Y(this,Wt,mn).call(this),It=Y(this,ht,Ie).call(this);st(this,g,Math.max(u.AnnotationEditor.MIN_SIZE,St[2]-St[0])),st(this,_,Math.max(u.AnnotationEditor.MIN_SIZE,St[3]-St[1]));const kt=Math.ceil(It+e(this,g)*this.scaleFactor),Lt=Math.ceil(It+e(this,_)*this.scaleFactor),[Nt,Jt]=this.parentDimensions;this.width=kt/Nt,this.height=Lt/Jt,this.setAspectRatio(kt,Lt);const At=this.translationX,Yt=this.translationY;this.translationX=-St[0],this.translationY=-St[1],Y(this,Bt,fe).call(this),Y(this,W,ae).call(this),st(this,P,kt),st(this,h,Lt),this.setDims(kt,Lt);const Ot=Q?It/this.scaleFactor/2:0;this.translate(At-this.translationX-Ot,Yt-this.translationY-Ot)},z(b,ft),z(b,Ct),z(b,zt),ee(b,"_defaultColor",null),ee(b,"_defaultOpacity",1),ee(b,"_defaultThickness",1),ee(b,"_type","ink"),t.InkEditor=b},(O,t,l)=>{var b,_,g,L,j,x,E,A,p,y,M,ye,P,Se,f,Le,v,_n,I,Jn,V,Qn,R,bn,rt,Oe,X,Zn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var n=l(1),u=l(4),T=l(6),k=l(29);const pt=class extends u.AnnotationEditor{constructor(C){super({...C,name:"stampEditor"});z(this,M);z(this,P);z(this,f);z(this,v);z(this,I);z(this,V);z(this,R);z(this,rt);z(this,X);z(this,b,null);z(this,_,null);z(this,g,null);z(this,L,null);z(this,j,null);z(this,x,null);z(this,E,null);z(this,A,null);z(this,p,!1);z(this,y,!1);st(this,L,C.bitmapUrl),st(this,j,C.bitmapFile)}static initialize(C){u.AnnotationEditor.initialize(C)}static get supportedTypes(){const C=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",C.map(s=>`image/${s}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(C){return this.supportedTypes.includes(C)}static paste(C,s){s.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:C.getAsFile()})}remove(){var C,s;e(this,_)&&(st(this,b,null),this._uiManager.imageManager.deleteId(e(this,_)),(C=e(this,x))==null||C.remove(),st(this,x,null),(s=e(this,E))==null||s.disconnect(),st(this,E,null)),super.remove()}rebuild(){if(!this.parent){e(this,_)&&Y(this,f,Le).call(this);return}super.rebuild(),this.div!==null&&(e(this,_)&&Y(this,f,Le).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(e(this,g)||e(this,b)||e(this,L)||e(this,j))}get isResizable(){return!0}render(){if(this.div)return this.div;let C,s;if(this.width&&(C=this.x,s=this.y),super.render(),this.div.hidden=!0,e(this,b)?Y(this,v,_n).call(this):Y(this,f,Le).call(this),this.width){const[a,r]=this.parentDimensions;this.setAt(C*a,s*r,this.width*a,this.height*r)}return this.div}static deserialize(C,s,a){if(C instanceof k.StampAnnotationElement)return null;const r=super.deserialize(C,s,a),{rect:c,bitmapUrl:d,bitmapId:m,isSvg:D,accessibilityData:W}=C;m&&a.imageManager.isValidId(m)?st(r,_,m):st(r,L,d),st(r,p,D);const[tt,et]=r.pageDimensions;return r.width=(c[2]-c[0])/tt,r.height=(c[3]-c[1])/et,W&&(r.altTextData=W),r}serialize(C=!1,s=null){if(this.isEmpty())return null;const a={annotationType:n.AnnotationEditorType.STAMP,bitmapId:e(this,_),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:e(this,p),structTreeParentId:this._structTreeParentId};if(C)return a.bitmapUrl=Y(this,rt,Oe).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:r,altText:c}=this.altTextData;if(!r&&c&&(a.accessibilityData={type:"Figure",alt:c}),s===null)return a;s.stamps||(s.stamps=new Map);const d=e(this,p)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!s.stamps.has(e(this,_)))s.stamps.set(e(this,_),{area:d,serialized:a}),a.bitmap=Y(this,rt,Oe).call(this,!1);else if(e(this,p)){const m=s.stamps.get(e(this,_));d>m.area&&(m.area=d,m.serialized.bitmap.close(),m.serialized.bitmap=Y(this,rt,Oe).call(this,!1))}return a}};let G=pt;b=new WeakMap,_=new WeakMap,g=new WeakMap,L=new WeakMap,j=new WeakMap,x=new WeakMap,E=new WeakMap,A=new WeakMap,p=new WeakMap,y=new WeakMap,M=new WeakSet,ye=function(C,s=!1){if(!C){this.remove();return}st(this,b,C.bitmap),s||(st(this,_,C.id),st(this,p,C.isSvg)),Y(this,v,_n).call(this)},P=new WeakSet,Se=function(){st(this,g,null),this._uiManager.enableWaiting(!1),e(this,x)&&this.div.focus()},f=new WeakSet,Le=function(){if(e(this,_)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(e(this,_)).then(s=>Y(this,M,ye).call(this,s,!0)).finally(()=>Y(this,P,Se).call(this));return}if(e(this,L)){const s=e(this,L);st(this,L,null),this._uiManager.enableWaiting(!0),st(this,g,this._uiManager.imageManager.getFromUrl(s).then(a=>Y(this,M,ye).call(this,a)).finally(()=>Y(this,P,Se).call(this)));return}if(e(this,j)){const s=e(this,j);st(this,j,null),this._uiManager.enableWaiting(!0),st(this,g,this._uiManager.imageManager.getFromFile(s).then(a=>Y(this,M,ye).call(this,a)).finally(()=>Y(this,P,Se).call(this)));return}const C=document.createElement("input");C.type="file",C.accept=pt.supportedTypesStr,st(this,g,new Promise(s=>{C.addEventListener("change",async()=>{if(!C.files||C.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(C.files[0]);Y(this,M,ye).call(this,a)}s()}),C.addEventListener("cancel",()=>{this.remove(),s()})}).finally(()=>Y(this,P,Se).call(this))),C.click()},v=new WeakSet,_n=function(){const{div:C}=this;let{width:s,height:a}=e(this,b);const[r,c]=this.pageDimensions,d=.75;if(this.width)s=this.width*r,a=this.height*c;else if(s>d*r||a>d*c){const tt=Math.min(d*r/s,d*c/a);s*=tt,a*=tt}const[m,D]=this.parentDimensions;this.setDims(s*m/r,a*D/c),this._uiManager.enableWaiting(!1);const W=st(this,x,document.createElement("canvas"));C.append(W),C.hidden=!1,Y(this,R,bn).call(this,s,a),Y(this,X,Zn).call(this),e(this,y)||(this.parent.addUndoableEditor(this),st(this,y,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},I=new WeakSet,Jn=function(C,s){var d;const[a,r]=this.parentDimensions;this.width=C/a,this.height=s/r,this.setDims(C,s),(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,e(this,A)!==null&&clearTimeout(e(this,A)),st(this,A,setTimeout(()=>{st(this,A,null),Y(this,R,bn).call(this,C,s)},200))},V=new WeakSet,Qn=function(C,s){const{width:a,height:r}=e(this,b);let c=a,d=r,m=e(this,b);for(;c>2*C||d>2*s;){const D=c,W=d;c>2*C&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),d>2*s&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const tt=new OffscreenCanvas(c,d);tt.getContext("2d").drawImage(m,0,0,D,W,0,0,c,d),m=tt.transferToImageBitmap()}return m},R=new WeakSet,bn=function(C,s){C=Math.ceil(C),s=Math.ceil(s);const a=e(this,x);if(!a||a.width===C&&a.height===s)return;a.width=C,a.height=s;const r=e(this,p)?e(this,b):Y(this,V,Qn).call(this,C,s),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(r,0,0,r.width,r.height,0,0,C,s)},rt=new WeakSet,Oe=function(C){if(C){if(e(this,p)){const r=this._uiManager.imageManager.getSvgUrl(e(this,_));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=e(this,b),s.getContext("2d").drawImage(e(this,b),0,0),s.toDataURL()}if(e(this,p)){const[s,a]=this.pageDimensions,r=Math.round(this.width*s*T.PixelsPerInch.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*T.PixelsPerInch.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(r,c);return d.getContext("2d").drawImage(e(this,b),0,0,e(this,b).width,e(this,b).height,0,0,r,c),d.transferToImageBitmap()}return structuredClone(e(this,b))},X=new WeakSet,Zn=function(){st(this,E,new ResizeObserver(C=>{const s=C[0].contentRect;s.width&&s.height&&Y(this,I,Jn).call(this,s.width,s.height)})),e(this,E).observe(this.div)},ee(G,"_type","stamp"),t.StampEditor=G}],__webpack_module_cache__={};function __w_pdfjs_require__(O){var t=__webpack_module_cache__[O];if(t!==void 0)return t.exports;var l=__webpack_module_cache__[O]={exports:{}};return __webpack_modules__[O](l,l.exports,__w_pdfjs_require__),l.exports}var __webpack_exports__={};return(()=>{var O=__webpack_exports__;Object.defineProperty(O,"__esModule",{value:!0}),Object.defineProperty(O,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(O,"AnnotationEditorLayer",{enumerable:!0,get:function(){return T.AnnotationEditorLayer}}),Object.defineProperty(O,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(O,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(O,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return k.AnnotationEditorUIManager}}),Object.defineProperty(O,"AnnotationLayer",{enumerable:!0,get:function(){return G.AnnotationLayer}}),Object.defineProperty(O,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(O,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(O,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(O,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(O,"GlobalWorkerOptions",{enumerable:!0,get:function(){return b.GlobalWorkerOptions}}),Object.defineProperty(O,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(O,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(O,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(O,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(O,"PDFDataRangeTransport",{enumerable:!0,get:function(){return l.PDFDataRangeTransport}}),Object.defineProperty(O,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(O,"PDFWorker",{enumerable:!0,get:function(){return l.PDFWorker}}),Object.defineProperty(O,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(O,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(O,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(O,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(O,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(O,"SVGGraphics",{enumerable:!0,get:function(){return l.SVGGraphics}}),Object.defineProperty(O,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(O,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(O,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(O,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(O,"build",{enumerable:!0,get:function(){return l.build}}),Object.defineProperty(O,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(O,"getDocument",{enumerable:!0,get:function(){return l.getDocument}}),Object.defineProperty(O,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(O,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(O,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(O,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(O,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(O,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(O,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(O,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(O,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(O,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(O,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(O,"updateTextLayer",{enumerable:!0,get:function(){return u.updateTextLayer}}),Object.defineProperty(O,"version",{enumerable:!0,get:function(){return l.version}});var t=__w_pdfjs_require__(1),l=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),u=__w_pdfjs_require__(26),T=__w_pdfjs_require__(27),k=__w_pdfjs_require__(5),G=__w_pdfjs_require__(29),b=__w_pdfjs_require__(14),_=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);const onPrint=O=>{let t;t||(t=document.createElement("iframe"),document.body.appendChild(t),t.style.display="none",t.onload=function(){setTimeout(function(){t.focus(),t.contentWindow.print()},1)}),t.src=O},calcRT=O=>{let l=O.split(" ").length;if(l>0)return Math.ceil(l/200)},getPageText=(O,t)=>new Promise(function(l,n){t.getPage(O).then(function(u){u.getTextContent().then(function(T){for(var k=T.items,G="",b=0;b<k.length;b++){var _=k[b];G+=_.str+" "}l(G)})})}),savePDF=async({fileUrl:O,data:t,name:l="download.pdf"})=>{const n=document.createElement("a");n.download=l,n.rel="noopener",O||(O=`data:application/pdf;base64,${btoa(t)}`);let u=await fetch(O).then(k=>k.blob());(!u||!(u instanceof Blob))&&console.log("Invalid blob object passed to URL.createObjectURL()"),typeof URL.createObjectURL>"u"&&console.log("Your browser does not support URL.createObjectURL()");const T=URL.createObjectURL(u);n.href=T,n.click(),URL.revokeObjectURL(n.href)};function cubicOut(O){const t=O-1;return t*t*t+1}function scale(O,{delay:t=0,duration:l=400,easing:n=cubicOut,start:u=0,opacity:T=0}={}){const k=getComputedStyle(O),G=+k.opacity,b=k.transform==="none"?"":k.transform,_=1-u,g=G*(1-T);return{delay:t,duration:l,easing:n,css:(L,j)=>`
			transform: ${b} scale(${1-_*j});
			opacity: ${G-g*j}
		`}}class ClassBuilder{constructor(t,l){this.defaults=typeof t=="function"?t(l):t,this.classes=this.defaults}flush(){return this.classes=this.defaults,this}extend(...t){return this}get(){return this.classes}replace(t,l=!0){return l&&t&&(this.classes=Object.keys(t).reduce((n,u)=>n.replace(new RegExp(u,"g"),t[u]),this.classes)),this}remove(t,l=!0){return l&&t&&(this.classes=t.split(" ").reduce((n,u)=>n.replace(new RegExp(u,"g"),""),this.classes)),this}add(t,l=!0,n){if(!l||!t)return this;switch(typeof t){case"string":default:return this.classes+=` ${t} `,this;case"function":return this.classes+=` ${t(n||this.classes)} `,this}}}const Tooltip_svelte_svelte_type_style_lang="",get_activator_slot_changes=O=>({}),get_activator_slot_context=O=>({});function create_if_block$1(O){let t,l,n,u,T;const k=O[8].default,G=create_slot(k,O,O[7],null);return{c(){t=element("div"),G&&G.c(),this.h()},l(b){t=claim_element(b,"DIV",{class:!0});var _=children(t);G&&G.l(_),_.forEach(detach),this.h()},h(){attr(t,"class",l=null_to_empty(O[1])+" svelte-10lk5cm")},m(b,_){insert_hydration(b,t,_),G&&G.m(t,null),T=!0},p(b,_){G&&G.p&&(!T||_&128)&&update_slot_base(G,k,b,b[7],T?get_slot_changes(k,b[7],_,null):get_all_dirty_from_scope(b[7]),null),(!T||_&2&&l!==(l=null_to_empty(b[1])+" svelte-10lk5cm"))&&attr(t,"class",l)},i(b){T||(transition_in(G,b),b&&add_render_callback(()=>{T&&(u&&u.end(1),n=create_in_transition(t,scale,{duration:150}),n.start())}),T=!0)},o(b){transition_out(G,b),n&&n.invalidate(),b&&(u=create_out_transition(t,scale,{duration:150,delay:100})),T=!1},d(b){b&&detach(t),G&&G.d(b),b&&u&&u.end()}}}function create_fragment$1(O){let t,l,n,u,T,k;const G=O[8].activator,b=create_slot(G,O,O[7],get_activator_slot_context);let _=O[0]&&create_if_block$1(O);return{c(){t=element("div"),l=element("div"),b&&b.c(),n=space(),_&&_.c(),this.h()},l(g){t=claim_element(g,"DIV",{class:!0});var L=children(t);l=claim_element(L,"DIV",{role:!0});var j=children(l);b&&b.l(j),j.forEach(detach),n=claim_space(L),_&&_.l(L),L.forEach(detach),this.h()},h(){attr(l,"role","note"),attr(t,"class","activator svelte-10lk5cm")},m(g,L){insert_hydration(g,t,L),append_hydration(t,l),b&&b.m(l,null),append_hydration(t,n),_&&_.m(t,null),u=!0,T||(k=[listen(l,"mouseenter",debounce(O[2],100)),listen(l,"mouseleave",debounce(O[3],100)),listen(l,"mouseenter",O[9]),listen(l,"mouseleave",O[10]),listen(l,"focus",O[11]),listen(l,"blur",O[12])],T=!0)},p(g,[L]){b&&b.p&&(!u||L&128)&&update_slot_base(b,G,g,g[7],u?get_slot_changes(G,g[7],L,get_activator_slot_changes):get_all_dirty_from_scope(g[7]),get_activator_slot_context),g[0]?_?(_.p(g,L),L&1&&transition_in(_,1)):(_=create_if_block$1(g),_.c(),transition_in(_,1),_.m(t,null)):_&&(group_outros(),transition_out(_,1,1,()=>{_=null}),check_outros())},i(g){u||(transition_in(b,g),transition_in(_),u=!0)},o(g){transition_out(b,g),transition_out(_),u=!1},d(g){g&&detach(t),b&&b.d(g),_&&_.d(),T=!1,run_all(k)}}}const classesDefault="tooltip";function debounce(O,t,l){let n;return function(){let u=this,T=arguments,k=function(){n=null,l||O.apply(u,T)},G=l&&!n;clearTimeout(n),n=setTimeout(k,t),G&&O.apply(u,T)}}function instance$1(O,t,l){let n,{$$slots:u={},$$scope:T}=t,{class:k=""}=t,{classes:G=classesDefault}=t,{show:b=!1}=t,{timeout:_=null}=t;const g=new ClassBuilder(G,classesDefault);function L(){b||(l(0,b=!0),_&&l(4,_=setTimeout(()=>{l(0,b=!1)},_)))}function j(){b&&(l(0,b=!1),clearTimeout(_))}function x(y){bubble.call(this,O,y)}function E(y){bubble.call(this,O,y)}function A(y){bubble.call(this,O,y)}function p(y){bubble.call(this,O,y)}return O.$$set=y=>{"class"in y&&l(5,k=y.class),"classes"in y&&l(6,G=y.classes),"show"in y&&l(0,b=y.show),"timeout"in y&&l(4,_=y.timeout),"$$scope"in y&&l(7,T=y.$$scope)},O.$$.update=()=>{O.$$.dirty&96&&l(1,n=g.flush().add(G,!0,classesDefault).add(k).get())},[b,n,L,j,_,k,G,T,u,x,E,A,p]}class Tooltip extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{class:5,classes:6,show:0,timeout:4})}}const PdfViewer_svelte_svelte_type_style_lang="",{window:window_1}=globals;function create_else_block_1(O){let t,l,n;return{c(){t=element("div"),l=element("canvas"),this.h()},l(u){t=claim_element(u,"DIV",{class:!0});var T=children(t);l=claim_element(T,"CANVAS",{class:!0}),children(l).forEach(detach),T.forEach(detach),this.h()},h(){attr(l,"class","svelte-nycks5"),attr(t,"class",n=null_to_empty(O[6]===!0?"viewer":"null")+" svelte-nycks5")},m(u,T){insert_hydration(u,t,T),append_hydration(t,l),O[55](l)},p(u,T){T[0]&64&&n!==(n=null_to_empty(u[6]===!0?"viewer":"null")+" svelte-nycks5")&&attr(t,"class",n)},i:noop,o:noop,d(u){u&&detach(t),O[55](null)}}}function create_if_block_2(O){let t,l,n=O[5].includes("navigation"),u,T=O[5].includes("zoom"),k,G=O[5].includes("print"),b,_=O[5].includes("rotate"),g,L=O[5].includes("download"),j,x=O[5].includes("autoflip"),E,A,p,y,M,F,P,h,f,N,v,o,I,w,V,$,R,K,rt,lt,X,ct,pt,Et,yt,C=n&&create_if_block_9(O),s=T&&create_if_block_8(O),a=G&&create_if_block_7(O),r=_&&create_if_block_6(O),c=L&&create_if_block_5(O),d=x&&create_if_block_3(O);return{c(){t=element("div"),l=element("div"),C&&C.c(),u=space(),s&&s.c(),k=space(),a&&a.c(),b=space(),r&&r.c(),g=space(),c&&c.c(),j=space(),d&&d.c(),E=space(),A=element("span"),p=svg_element("svg"),y=svg_element("path"),M=space(),F=element("span"),P=text(O[11]),h=text(" min read"),N=space(),v=element("span"),o=svg_element("svg"),I=svg_element("path"),w=space(),V=element("div"),$=text(`Page :\r
              `),R=element("span"),K=text(`\r
              /\r
              `),rt=element("span"),X=space(),ct=element("div"),pt=element("canvas"),this.h()},l(m){t=claim_element(m,"DIV",{class:!0});var D=children(t);l=claim_element(D,"DIV",{class:!0});var W=children(l);C&&C.l(W),u=claim_space(W),s&&s.l(W),k=claim_space(W),a&&a.l(W),b=claim_space(W),r&&r.l(W),g=claim_space(W),c&&c.l(W),j=claim_space(W),d&&d.l(W),E=claim_space(W),A=claim_element(W,"SPAN",{class:!0,style:!0});var tt=children(A);p=claim_svg_element(tt,"svg",{class:!0,xmlns:!0,viewBox:!0});var et=children(p);y=claim_svg_element(et,"path",{d:!0}),children(y).forEach(detach),et.forEach(detach),M=claim_space(tt),F=claim_element(tt,"SPAN",{class:!0});var ot=children(F);P=claim_text(ot,O[11]),h=claim_text(ot," min read"),ot.forEach(detach),tt.forEach(detach),N=claim_space(W),v=claim_element(W,"SPAN",{class:!0,style:!0});var dt=children(v);o=claim_svg_element(dt,"svg",{class:!0,xmlns:!0,viewBox:!0});var vt=children(o);I=claim_svg_element(vt,"path",{d:!0}),children(I).forEach(detach),vt.forEach(detach),w=claim_space(dt),V=claim_element(dt,"DIV",{class:!0});var ut=children(V);$=claim_text(ut,`Page :\r
              `),R=claim_element(ut,"SPAN",{}),children(R).forEach(detach),K=claim_text(ut,`\r
              /\r
              `),rt=claim_element(ut,"SPAN",{}),children(rt).forEach(detach),ut.forEach(detach),dt.forEach(detach),W.forEach(detach),X=claim_space(D),ct=claim_element(D,"DIV",{class:!0});var Mt=children(ct);pt=claim_element(Mt,"CANVAS",{width:!0,height:!0,class:!0}),children(pt).forEach(detach),Mt.forEach(detach),D.forEach(detach),this.h()},h(){attr(y,"d",`M16.32 7.1A8 8 0 1 1 9 4.06V2h2v2.06c1.46.18 2.8.76 3.9\r
                1.62l1.46-1.46 1.42 1.42-1.46 1.45zM10 18a6 6 0 1 0 0-12 6 6 0 0\r
                0 0 12zM7 0h6v2H7V0zm5.12 8.46l1.42 1.42L10 13.4 8.59\r
                12l3.53-3.54z`),attr(p,"class","icon svelte-nycks5"),attr(p,"xmlns","http://www.w3.org/2000/svg"),attr(p,"viewBox","0 0 20 20"),attr(F,"class","text svelte-nycks5"),attr(A,"class","page-info svelte-nycks5"),attr(A,"style",f=O[5].includes("timeInfo")?"":"display: none;"),attr(I,"d",`M16 2h4v15a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V0h16v2zm0 2v13a1 1 0\r
                0 0 1 1 1 1 0 0 0 1-1V4h-2zM2 2v15a1 1 0 0 0 1 1h11.17a2.98 2.98\r
                0 0 1-.17-1V2H2zm2 8h8v2H4v-2zm0 4h8v2H4v-2zM4 4h8v4H4V4z`),attr(o,"class","icon svelte-nycks5"),attr(o,"xmlns","http://www.w3.org/2000/svg"),attr(o,"viewBox","0 0 20 20"),attr(V,"class","text svelte-nycks5"),attr(v,"class","page-info svelte-nycks5"),attr(v,"style",lt=O[5].includes("pageInfo")?"":"display: none;"),attr(l,"class","line svelte-nycks5"),attr(pt,"width",O[17]),attr(pt,"height",O[18]),attr(pt,"class","svelte-nycks5"),attr(ct,"class",Et=null_to_empty(O[6]===!0?"viewer":"null")+" svelte-nycks5"),attr(t,"class","control-start svelte-nycks5")},m(m,D){insert_hydration(m,t,D),append_hydration(t,l),C&&C.m(l,null),append_hydration(l,u),s&&s.m(l,null),append_hydration(l,k),a&&a.m(l,null),append_hydration(l,b),r&&r.m(l,null),append_hydration(l,g),c&&c.m(l,null),append_hydration(l,j),d&&d.m(l,null),append_hydration(l,E),append_hydration(l,A),append_hydration(A,p),append_hydration(p,y),append_hydration(A,M),append_hydration(A,F),append_hydration(F,P),append_hydration(F,h),append_hydration(l,N),append_hydration(l,v),append_hydration(v,o),append_hydration(o,I),append_hydration(v,w),append_hydration(v,V),append_hydration(V,$),append_hydration(V,R),O[52](R),append_hydration(V,K),append_hydration(V,rt),O[53](rt),append_hydration(t,X),append_hydration(t,ct),append_hydration(ct,pt),O[54](pt),yt=!0},p(m,D){D[0]&32&&(n=m[5].includes("navigation")),n?C?(C.p(m,D),D[0]&32&&transition_in(C,1)):(C=create_if_block_9(m),C.c(),transition_in(C,1),C.m(l,u)):C&&(group_outros(),transition_out(C,1,1,()=>{C=null}),check_outros()),D[0]&32&&(T=m[5].includes("zoom")),T?s?(s.p(m,D),D[0]&32&&transition_in(s,1)):(s=create_if_block_8(m),s.c(),transition_in(s,1),s.m(l,k)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros()),D[0]&32&&(G=m[5].includes("print")),G?a?(a.p(m,D),D[0]&32&&transition_in(a,1)):(a=create_if_block_7(m),a.c(),transition_in(a,1),a.m(l,b)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros()),D[0]&32&&(_=m[5].includes("rotate")),_?r?(r.p(m,D),D[0]&32&&transition_in(r,1)):(r=create_if_block_6(m),r.c(),transition_in(r,1),r.m(l,g)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros()),D[0]&32&&(L=m[5].includes("download")),L?c?(c.p(m,D),D[0]&32&&transition_in(c,1)):(c=create_if_block_5(m),c.c(),transition_in(c,1),c.m(l,j)):c&&(group_outros(),transition_out(c,1,1,()=>{c=null}),check_outros()),D[0]&32&&(x=m[5].includes("autoflip")),x?d?(d.p(m,D),D[0]&32&&transition_in(d,1)):(d=create_if_block_3(m),d.c(),transition_in(d,1),d.m(l,E)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),(!yt||D[0]&2048)&&set_data(P,m[11]),(!yt||D[0]&32&&f!==(f=m[5].includes("timeInfo")?"":"display: none;"))&&attr(A,"style",f),(!yt||D[0]&32&&lt!==(lt=m[5].includes("pageInfo")?"":"display: none;"))&&attr(v,"style",lt),(!yt||D[0]&131072)&&attr(pt,"width",m[17]),(!yt||D[0]&262144)&&attr(pt,"height",m[18]),(!yt||D[0]&64&&Et!==(Et=null_to_empty(m[6]===!0?"viewer":"null")+" svelte-nycks5"))&&attr(ct,"class",Et)},i(m){yt||(transition_in(C),transition_in(s),transition_in(a),transition_in(r),transition_in(c),transition_in(d),yt=!0)},o(m){transition_out(C),transition_out(s),transition_out(a),transition_out(r),transition_out(c),transition_out(d),yt=!1},d(m){m&&detach(t),C&&C.d(),s&&s.d(),a&&a.d(),r&&r.d(),c&&c.d(),d&&d.d(),O[52](null),O[53](null),O[54](null)}}}function create_if_block_1(O){let t,l,n="This document requires a password to open:",u,T,k,G,b,_,g,L,j="Submit",x,E;return{c(){t=element("div"),l=element("p"),l.textContent=n,u=space(),T=element("p"),k=text(O[16]),G=space(),b=element("div"),_=element("input"),g=space(),L=element("button"),L.textContent=j,this.h()},l(A){t=claim_element(A,"DIV",{class:!0});var p=children(t);l=claim_element(p,"P",{["data-svelte-h"]:!0}),get_svelte_dataset(l)!=="svelte-1d6vq7g"&&(l.textContent=n),u=claim_space(p),T=claim_element(p,"P",{class:!0});var y=children(T);k=claim_text(y,O[16]),y.forEach(detach),G=claim_space(p),b=claim_element(p,"DIV",{class:!0});var M=children(b);_=claim_element(M,"INPUT",{type:!0,class:!0}),g=claim_space(M),L=claim_element(M,"BUTTON",{class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(L)!=="svelte-pjp04f"&&(L.textContent=j),M.forEach(detach),p.forEach(detach),this.h()},h(){attr(T,"class","password-message svelte-nycks5"),attr(_,"type","password"),attr(_,"class","password-input svelte-nycks5"),attr(L,"class","password-button svelte-nycks5"),attr(b,"class","password-container svelte-nycks5"),attr(t,"class","password-viewer svelte-nycks5")},m(A,p){insert_hydration(A,t,p),append_hydration(t,l),append_hydration(t,u),append_hydration(t,T),append_hydration(T,k),append_hydration(t,G),append_hydration(t,b),append_hydration(b,_),set_input_value(_,O[14]),append_hydration(b,g),append_hydration(b,L),x||(E=[listen(_,"input",O[42]),listen(L,"click",O[26])],x=!0)},p(A,p){p[0]&65536&&set_data(k,A[16]),p[0]&16384&&_.value!==A[14]&&set_input_value(_,A[14])},i:noop,o:noop,d(A){A&&detach(t),x=!1,run_all(E)}}}function create_if_block_9(O){let t,l,n,u;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_8],default:[create_default_slot_8]},$$scope:{ctx:O}}}),n=new Tooltip({props:{$$slots:{activator:[create_activator_slot_7],default:[create_default_slot_7]},$$scope:{ctx:O}}}),{c(){create_component(t.$$.fragment),l=space(),create_component(n.$$.fragment)},l(T){claim_component(t.$$.fragment,T),l=claim_space(T),claim_component(n.$$.fragment,T)},m(T,k){mount_component(t,T,k),insert_hydration(T,l,k),mount_component(n,T,k),u=!0},p(T,k){const G={};k[0]&1|k[2]&512&&(G.$$scope={dirty:k,ctx:T}),t.$set(G);const b={};k[0]&5|k[2]&512&&(b.$$scope={dirty:k,ctx:T}),n.$set(b)},i(T){u||(transition_in(t.$$.fragment,T),transition_in(n.$$.fragment,T),u=!0)},o(T){transition_out(t.$$.fragment,T),transition_out(n.$$.fragment,T),u=!1},d(T){T&&detach(l),destroy_component(t,T),destroy_component(n,T)}}}function create_default_slot_8(O){let t;return{c(){t=text("Previous")},l(l){t=claim_text(l,"Previous")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_8(O){let t,l,n,u,T,k;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("polygon"),this.h()},l(G){t=claim_element(G,"SPAN",{role:!0,tabindex:!0,slot:!0,class:!0});var b=children(t);l=claim_svg_element(b,"svg",{class:!0,xmlns:!0,viewBox:!0});var _=children(l);n=claim_svg_element(_,"polygon",{points:!0}),children(n).forEach(detach),_.forEach(detach),b.forEach(detach),this.h()},h(){attr(n,"points",`3.828 9 9.899 2.929 8.485 1.515 0 10 .707 10.707 8.485\r
                  18.485 9.899 17.071 3.828 11 20 11 20 9 3.828 9`),attr(l,"class","icon svelte-nycks5"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"role","button"),attr(t,"tabindex","0"),attr(t,"slot","activator"),attr(t,"class",u="button-control "+(O[0]<=1?"disabled":null)+" svelte-nycks5")},m(G,b){insert_hydration(G,t,b),append_hydration(t,l),append_hydration(l,n),T||(k=[listen(t,"click",O[43]),listen(t,"keydown",O[40])],T=!0)},p(G,b){b[0]&1&&u!==(u="button-control "+(G[0]<=1?"disabled":null)+" svelte-nycks5")&&attr(t,"class",u)},d(G){G&&detach(t),T=!1,run_all(k)}}}function create_default_slot_7(O){let t;return{c(){t=text("Next")},l(l){t=claim_text(l,"Next")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_7(O){let t,l,n,u,T,k;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("polygon"),this.h()},l(G){t=claim_element(G,"SPAN",{role:!0,tabindex:!0,slot:!0,class:!0});var b=children(t);l=claim_svg_element(b,"svg",{class:!0,xmlns:!0,viewBox:!0});var _=children(l);n=claim_svg_element(_,"polygon",{points:!0}),children(n).forEach(detach),_.forEach(detach),b.forEach(detach),this.h()},h(){attr(n,"points",`16.172 9 10.101 2.929 11.515 1.515 20 10 19.293 10.707\r
                  11.515 18.485 10.101 17.071 16.172 11 0 11 0 9`),attr(l,"class","icon svelte-nycks5"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"role","button"),attr(t,"tabindex","0"),attr(t,"slot","activator"),attr(t,"class",u="button-control "+(O[0]>=O[2]?"disabled":null)+" svelte-nycks5")},m(G,b){insert_hydration(G,t,b),append_hydration(t,l),append_hydration(l,n),T||(k=[listen(t,"click",O[44]),listen(t,"keydown",O[39])],T=!0)},p(G,b){b[0]&5&&u!==(u="button-control "+(G[0]>=G[2]?"disabled":null)+" svelte-nycks5")&&attr(t,"class",u)},d(G){G&&detach(t),T=!1,run_all(k)}}}function create_if_block_8(O){let t,l,n,u;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_6],default:[create_default_slot_6]},$$scope:{ctx:O}}}),n=new Tooltip({props:{$$slots:{activator:[create_activator_slot_5],default:[create_default_slot_5]},$$scope:{ctx:O}}}),{c(){create_component(t.$$.fragment),l=space(),create_component(n.$$.fragment)},l(T){claim_component(t.$$.fragment,T),l=claim_space(T),claim_component(n.$$.fragment,T)},m(T,k){mount_component(t,T,k),insert_hydration(T,l,k),mount_component(n,T,k),u=!0},p(T,k){const G={};k[0]&2|k[2]&512&&(G.$$scope={dirty:k,ctx:T}),t.$set(G);const b={};k[0]&2|k[2]&512&&(b.$$scope={dirty:k,ctx:T}),n.$set(b)},i(T){u||(transition_in(t.$$.fragment,T),transition_in(n.$$.fragment,T),u=!0)},o(T){transition_out(t.$$.fragment,T),transition_out(n.$$.fragment,T),u=!1},d(T){T&&detach(l),destroy_component(t,T),destroy_component(n,T)}}}function create_default_slot_6(O){let t;return{c(){t=text("Zoom In")},l(l){t=claim_text(l,"Zoom In")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_6(O){let t,l,n,u,T,k;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("path"),this.h()},l(G){t=claim_element(G,"SPAN",{role:!0,tabindex:!0,slot:!0,class:!0});var b=children(t);l=claim_svg_element(b,"svg",{class:!0,xmlns:!0,viewBox:!0});var _=children(l);n=claim_svg_element(_,"path",{"fill-rule":!0,d:!0}),children(n).forEach(detach),_.forEach(detach),b.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42\r
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM7\r
                  7V5h2v2h2v2H9v2H7V9H5V7h2z`),attr(l,"class","icon svelte-nycks5"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"role","button"),attr(t,"tabindex","0"),attr(t,"slot","activator"),attr(t,"class",u="button-control "+(O[1]>=maxScale?"disabled":null)+" svelte-nycks5")},m(G,b){insert_hydration(G,t,b),append_hydration(t,l),append_hydration(l,n),T||(k=[listen(t,"click",O[45]),listen(t,"keydown",O[38])],T=!0)},p(G,b){b[0]&2&&u!==(u="button-control "+(G[1]>=maxScale?"disabled":null)+" svelte-nycks5")&&attr(t,"class",u)},d(G){G&&detach(t),T=!1,run_all(k)}}}function create_default_slot_5(O){let t;return{c(){t=text("Zoom Out")},l(l){t=claim_text(l,"Zoom Out")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_5(O){let t,l,n,u,T,k;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("path"),this.h()},l(G){t=claim_element(G,"SPAN",{role:!0,tabindex:!0,slot:!0,class:!0});var b=children(t);l=claim_svg_element(b,"svg",{class:!0,xmlns:!0,viewBox:!0});var _=children(l);n=claim_svg_element(_,"path",{"fill-rule":!0,d:!0}),children(n).forEach(detach),_.forEach(detach),b.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42\r
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM5\r
                  7h6v2H5V7z`),attr(l,"class","icon svelte-nycks5"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"role","button"),attr(t,"tabindex","0"),attr(t,"slot","activator"),attr(t,"class",u="button-control "+(O[1]<=minScale?"disabled":null)+" svelte-nycks5")},m(G,b){insert_hydration(G,t,b),append_hydration(t,l),append_hydration(l,n),T||(k=[listen(t,"click",O[46]),listen(t,"keydown",O[37])],T=!0)},p(G,b){b[0]&2&&u!==(u="button-control "+(G[1]<=minScale?"disabled":null)+" svelte-nycks5")&&attr(t,"class",u)},d(G){G&&detach(t),T=!1,run_all(k)}}}function create_if_block_7(O){let t,l;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_4],default:[create_default_slot_4]},$$scope:{ctx:O}}}),{c(){create_component(t.$$.fragment)},l(n){claim_component(t.$$.fragment,n)},m(n,u){mount_component(t,n,u),l=!0},p(n,u){const T={};u[0]&8|u[2]&512&&(T.$$scope={dirty:u,ctx:n}),t.$set(T)},i(n){l||(transition_in(t.$$.fragment,n),l=!0)},o(n){transition_out(t.$$.fragment,n),l=!1},d(n){destroy_component(t,n)}}}function create_default_slot_4(O){let t;return{c(){t=text("Print")},l(l){t=claim_text(l,"Print")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_4(O){let t,l=`<svg class="icon svelte-nycks5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 16H0V6h20v10h-4v4H4v-4zm2-4v6h8v-6H6zM4 0h12v5H4V0zM2
                  8v2h2V8H2zm4 0v2h2V8H6z"></path></svg>`,n,u;return{c(){t=element("span"),t.innerHTML=l,this.h()},l(T){t=claim_element(T,"SPAN",{role:!0,tabindex:!0,slot:!0,class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(t)!=="svelte-19y611v"&&(t.innerHTML=l),this.h()},h(){attr(t,"role","button"),attr(t,"tabindex","0"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-nycks5")},m(T,k){insert_hydration(T,t,k),n||(u=[listen(t,"click",O[47]),listen(t,"keydown",O[36])],n=!0)},p:noop,d(T){T&&detach(t),n=!1,run_all(u)}}}function create_if_block_6(O){let t,l,n,u;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_3],default:[create_default_slot_3]},$$scope:{ctx:O}}}),n=new Tooltip({props:{$$slots:{activator:[create_activator_slot_2],default:[create_default_slot_2]},$$scope:{ctx:O}}}),{c(){create_component(t.$$.fragment),l=space(),create_component(n.$$.fragment)},l(T){claim_component(t.$$.fragment,T),l=claim_space(T),claim_component(n.$$.fragment,T)},m(T,k){mount_component(t,T,k),insert_hydration(T,l,k),mount_component(n,T,k),u=!0},p(T,k){const G={};k[2]&512&&(G.$$scope={dirty:k,ctx:T}),t.$set(G);const b={};k[2]&512&&(b.$$scope={dirty:k,ctx:T}),n.$set(b)},i(T){u||(transition_in(t.$$.fragment,T),transition_in(n.$$.fragment,T),u=!0)},o(T){transition_out(t.$$.fragment,T),transition_out(n.$$.fragment,T),u=!1},d(T){T&&detach(l),destroy_component(t,T),destroy_component(n,T)}}}function create_default_slot_3(O){let t;return{c(){t=text("Anti-Clockwise")},l(l){t=claim_text(l,"Anti-Clockwise")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_3(O){let t,l=`<svg class="icon rot-icon svelte-nycks5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z"></path></svg>`,n,u;return{c(){t=element("span"),t.innerHTML=l,this.h()},l(T){t=claim_element(T,"SPAN",{role:!0,tabindex:!0,slot:!0,class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(t)!=="svelte-tk6nke"&&(t.innerHTML=l),this.h()},h(){attr(t,"role","button"),attr(t,"tabindex","0"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-nycks5")},m(T,k){insert_hydration(T,t,k),n||(u=[listen(t,"click",O[48]),listen(t,"keydown",O[35])],n=!0)},p:noop,d(T){T&&detach(t),n=!1,run_all(u)}}}function create_default_slot_2(O){let t;return{c(){t=text("Clockwise")},l(l){t=claim_text(l,"Clockwise")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_2(O){let t,l=`<svg class="icon svelte-nycks5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z"></path></svg>`,n,u;return{c(){t=element("span"),t.innerHTML=l,this.h()},l(T){t=claim_element(T,"SPAN",{role:!0,tabindex:!0,slot:!0,class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(t)!=="svelte-10vh4p"&&(t.innerHTML=l),this.h()},h(){attr(t,"role","button"),attr(t,"tabindex","0"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-nycks5")},m(T,k){insert_hydration(T,t,k),n||(u=[listen(t,"click",O[49]),listen(t,"keydown",O[34])],n=!0)},p:noop,d(T){T&&detach(t),n=!1,run_all(u)}}}function create_if_block_5(O){let t,l;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_1],default:[create_default_slot_1]},$$scope:{ctx:O}}}),{c(){create_component(t.$$.fragment)},l(n){claim_component(t.$$.fragment,n)},m(n,u){mount_component(t,n,u),l=!0},p(n,u){const T={};u[0]&24|u[2]&512&&(T.$$scope={dirty:u,ctx:n}),t.$set(T)},i(n){l||(transition_in(t.$$.fragment,n),l=!0)},o(n){transition_out(t.$$.fragment,n),l=!1},d(n){destroy_component(t,n)}}}function create_default_slot_1(O){let t;return{c(){t=text("Download")},l(l){t=claim_text(l,"Download")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_1(O){let t,l='<svg class="icon svelte-nycks5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"></path></svg>',n,u;return{c(){t=element("span"),t.innerHTML=l,this.h()},l(T){t=claim_element(T,"SPAN",{role:!0,tabindex:!0,slot:!0,class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(t)!=="svelte-1sz9e7n"&&(t.innerHTML=l),this.h()},h(){attr(t,"role","button"),attr(t,"tabindex","0"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-nycks5")},m(T,k){insert_hydration(T,t,k),n||(u=[listen(t,"click",O[50]),listen(t,"keydown",O[33])],n=!0)},p:noop,d(T){T&&detach(t),n=!1,run_all(u)}}}function create_if_block_3(O){let t,l;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot],default:[create_default_slot]},$$scope:{ctx:O}}}),{c(){create_component(t.$$.fragment)},l(n){claim_component(t.$$.fragment,n)},m(n,u){mount_component(t,n,u),l=!0},p(n,u){const T={};u[0]&12288|u[2]&512&&(T.$$scope={dirty:u,ctx:n}),t.$set(T)},i(n){l||(transition_in(t.$$.fragment,n),l=!0)},o(n){transition_out(t.$$.fragment,n),l=!1},d(n){destroy_component(t,n)}}}function create_default_slot(O){let t=(O[12]===!0?O[13]:"Auto Turn Page")+"",l;return{c(){l=text(t)},l(n){l=claim_text(n,t)},m(n,u){insert_hydration(n,l,u)},p(n,u){u[0]&12288&&t!==(t=(n[12]===!0?n[13]:"Auto Turn Page")+"")&&set_data(l,t)},d(n){n&&detach(l)}}}function create_else_block(O){let t;return{c(){t=svg_element("path"),this.h()},l(l){t=claim_svg_element(l,"path",{d:!0}),children(t).forEach(detach),this.h()},h(){attr(t,"d",`M9.896,3.838L0.792,1.562v14.794l9.104,2.276L19,16.356V1.562L9.896,3.838z\r
                    M9.327,17.332L1.93,15.219V3.27 l7.397,1.585V17.332z\r
                    M17.862,15.219l-7.397,2.113V4.855l7.397-1.585V15.219z`)},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_if_block_4(O){let t;return{c(){t=svg_element("path"),this.h()},l(l){t=claim_svg_element(l,"path",{d:!0}),children(t).forEach(detach),this.h()},h(){attr(t,"d","M4 18h12V6h-4V2H4v16zm-2 1V0h12l4 4v16H2v-1z")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot(O){let t,l,n,u;function T(b,_){return b[12]===!0?create_if_block_4:create_else_block}let k=T(O),G=k(O);return{c(){t=element("span"),l=svg_element("svg"),G.c(),this.h()},l(b){t=claim_element(b,"SPAN",{role:!0,tabindex:!0,slot:!0,class:!0});var _=children(t);l=claim_svg_element(_,"svg",{class:!0,xmlns:!0,viewBox:!0});var g=children(l);G.l(g),g.forEach(detach),_.forEach(detach),this.h()},h(){attr(l,"class","icon svelte-nycks5"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"role","button"),attr(t,"tabindex","0"),attr(t,"slot","activator"),attr(t,"class","page-info button-control svelte-nycks5")},m(b,_){insert_hydration(b,t,_),append_hydration(t,l),G.m(l,null),n||(u=[listen(t,"click",O[51]),listen(t,"keydown",O[32])],n=!0)},p(b,_){k!==(k=T(b))&&(G.d(1),G=k(b),G&&(G.c(),G.m(l,null)))},d(b){b&&detach(t),G.d(),n=!1,run_all(u)}}}function create_if_block(O){let t,l='<svg class="icon svelte-nycks5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 10v8h6v-8h5l-8-8-8 8h5z"></path></svg>',n,u;return{c(){t=element("button"),t.innerHTML=l,this.h()},l(T){t=claim_element(T,"BUTTON",{id:!0,class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(t)!=="svelte-doxth2"&&(t.innerHTML=l),this.h()},h(){attr(t,"id","topBtn"),attr(t,"class","svelte-nycks5")},m(T,k){insert_hydration(T,t,k),n||(u=listen(t,"click",O[56]),n=!0)},p:noop,d(T){T&&detach(t),n=!1,u()}}}function create_fragment(O){let t,l,n,u,T,k,G,b,_;add_render_callback(O[41]);const g=[create_if_block_1,create_if_block_2,create_else_block_1],L=[];function j(E,A){return E[15]===!0?0:E[5].length?1:2}n=j(O),u=L[n]=g[n](O);let x=O[7]&&create_if_block(O);return{c(){t=element("div"),l=element("div"),u.c(),k=space(),x&&x.c(),this.h()},l(E){t=claim_element(E,"DIV",{class:!0});var A=children(t);l=claim_element(A,"DIV",{class:!0});var p=children(l);u.l(p),p.forEach(detach),k=claim_space(A),x&&x.l(A),A.forEach(detach),this.h()},h(){attr(l,"class",T=null_to_empty(O[6]===!0?"control":"null")+" svelte-nycks5"),attr(t,"class","parent svelte-nycks5")},m(E,A){insert_hydration(E,t,A),append_hydration(t,l),L[n].m(l,null),append_hydration(t,k),x&&x.m(t,null),G=!0,b||(_=listen(window_1,"resize",O[41]),b=!0)},p(E,A){let p=n;n=j(E),n===p?L[n].p(E,A):(group_outros(),transition_out(L[p],1,1,()=>{L[p]=null}),check_outros(),u=L[n],u?u.p(E,A):(u=L[n]=g[n](E),u.c()),transition_in(u,1),u.m(l,null)),(!G||A[0]&64&&T!==(T=null_to_empty(E[6]===!0?"control":"null")+" svelte-nycks5"))&&attr(l,"class",T),E[7]?x?x.p(E,A):(x=create_if_block(E),x.c(),x.m(t,null)):x&&(x.d(1),x=null)},i(E){G||(transition_in(u),G=!0)},o(E){transition_out(u),G=!1},d(E){E&&detach(t),L[n].d(),x&&x.d(),b=!1,_()}}}const minScale=1,maxScale=2.3;function instance(O,t,l){let{url:n}=t,{data:u}=t,{scale:T=1.8}=t,{pageNum:k=1}=t,{flipTime:G=120}=t,{showButtons:b=["navigation","zoom","print","rotate","download","autoflip","timeInfo","pageInfo"]}=t,{showBorder:_=!0}=t,{totalPage:g=0}=t,{downloadFileName:L=""}=t,{showTopButton:j=!0}=t;pdfExports.GlobalWorkerOptions.workerSrc=new URL(""+new URL("../assets/pdf.worker.e3f005b2.js",import.meta.url).href,self.location);let x,E=0,A=0,p=null,y=!1,M=null,F=0,P="",h=0,f=!1,N,v,o=G,I=[],w="",V=!1,$="",R=!1;const K=B=>{y=!0,p.getPage(B).then(function(mt){let bt=mt.getViewport({scale:T,rotation:F});const te=x.getContext("2d");l(8,x.height=bt.height,x),l(8,x.width=bt.width,x);let Zt={canvasContext:te,viewport:bt};mt.render(Zt).promise.then(function(){if(y=!1,M!==null){if(k<p.totalPage)I[k]=x,l(0,k++,k),p.getPage(k).then(K);else for(let St=1;St<I.length;St++)x.appendChild(I[St]);M=null}})}),b.length&&l(9,E.textContent=B,E)},rt=B=>{y?M=B:K(B)},lt=()=>{k<=1||(l(0,k--,k),rt(k))},X=()=>{k>=p.numPages||(l(0,k++,k),rt(k))},ct=()=>{T<=maxScale&&(l(1,T=T+.1),rt(k))},pt=()=>{T>=minScale&&(l(1,T=T-.1),rt(k))},Et=B=>{onPrint(B)},yt=()=>{F=F+90,rt(k)},C=()=>{F=F-90,rt(k)},s=()=>{a()},a=async()=>{pdfExports.getDocument({...n&&{url:n},...u&&{data:u},...w&&{password:w}}).promise.then(async function(mt){if(p=mt,l(15,V=!1),await tick(),b.length&&l(10,A.textContent=p.numPages,A),l(2,g=p.numPages),b.length)for(let bt=1;bt<=g;bt++)getPageText(bt,p).then(function(te){P=P.concat(te),l(11,h=calcRT(P))});l(31,R=!0)}).catch(function(mt){l(15,V=!0),l(16,$=mt.message)})};a();const r=()=>{l(12,f=!f),f===!1&&(clearInterval(N),clearInterval(v)),f===!0&&k<=g&&(v=setInterval(()=>{l(13,o=o-1)},1e3),N=setInterval(()=>{l(13,o=G),X()},G*1e3))},c=({url:B,data:mt})=>{let bt=L||B&&B.substring(B.lastIndexOf("/")+1);savePDF({fileURL:B,data:mt,name:bt})};let d;const m=()=>{clearTimeout(d),d=setTimeout(()=>{rt(k),console.log("rendering")},300)};onMount(async()=>{window.addEventListener("resize",m)}),onDestroy(()=>{clearInterval(N),clearInterval(v),typeof window<"u"&&window.removeEventListener("resize",m),clearTimeout(d)});let D,W;function tt(B){bubble.call(this,O,B)}function et(B){bubble.call(this,O,B)}function ot(B){bubble.call(this,O,B)}function dt(B){bubble.call(this,O,B)}function vt(B){bubble.call(this,O,B)}function ut(B){bubble.call(this,O,B)}function Mt(B){bubble.call(this,O,B)}function Bt(B){bubble.call(this,O,B)}function wt(B){bubble.call(this,O,B)}function Dt(){l(17,D=window_1.innerWidth),l(18,W=window_1.innerHeight)}function gt(){w=this.value,l(14,w)}const nt=()=>lt(),it=()=>X(),ft=()=>ct(),Tt=()=>pt(),Ct=()=>Et(n),Ut=()=>C(),zt=()=>yt(),Ht=()=>c({url:n,data:u}),Vt=()=>r();function Xt(B){binding_callbacks[B?"unshift":"push"](()=>{E=B,l(9,E)})}function Wt(B){binding_callbacks[B?"unshift":"push"](()=>{A=B,l(10,A)})}function qt(B){binding_callbacks[B?"unshift":"push"](()=>{x=B,l(8,x)})}function ht(B){binding_callbacks[B?"unshift":"push"](()=>{x=B,l(8,x)})}const Z=()=>window.scrollTo(0,0);return O.$$set=B=>{"url"in B&&l(3,n=B.url),"data"in B&&l(4,u=B.data),"scale"in B&&l(1,T=B.scale),"pageNum"in B&&l(0,k=B.pageNum),"flipTime"in B&&l(29,G=B.flipTime),"showButtons"in B&&l(5,b=B.showButtons),"showBorder"in B&&l(6,_=B.showBorder),"totalPage"in B&&l(2,g=B.totalPage),"downloadFileName"in B&&l(30,L=B.downloadFileName),"showTopButton"in B&&l(7,j=B.showTopButton)},O.$$.update=()=>{O.$$.dirty[0]&1|O.$$.dirty[1]&1&&R&&rt(k)},[k,T,g,n,u,b,_,j,x,E,A,h,f,o,w,V,$,D,W,lt,X,ct,pt,Et,yt,C,s,r,c,G,L,R,tt,et,ot,dt,vt,ut,Mt,Bt,wt,Dt,gt,nt,it,ft,Tt,Ct,Ut,zt,Ht,Vt,Xt,Wt,qt,ht,Z]}class PdfViewer extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{url:3,data:4,scale:1,pageNum:0,flipTime:29,showButtons:5,showBorder:6,totalPage:2,downloadFileName:30,showTopButton:7},null,[-1,-1,-1])}}const PdfViewer$1=PdfViewer;export{PdfViewer$1 as default};
